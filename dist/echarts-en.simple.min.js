
/*
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing,
* software distributed under the License is distributed on an
* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
* KIND, either express or implied.  See the License for the
* specific language governing permissions and limitations
* under the License.
*/


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.echarts={})}(this,function(t){"use strict";var e=2311,n=function(){return e++},v="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),t=/micromessenger/i.test(t);n&&(e.firefox=!0,e.version=n[1]);i&&(e.ie=!0,e.version=i[1]);r&&(e.edge=!0,e.version=r[1]);t&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent);var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},h=Object.prototype.toString,i=Array.prototype,o=i.forEach,u=i.filter,r=i.slice,c=i.map,d=i.reduce,a={};function T(t){if(null==t||"object"!=typeof t)return t;var e=t,n=h.call(t);if("[object Array]"===n){if(!U(t))for(var e=[],i=0,r=t.length;i<r;i++)e[i]=T(t[i])}else if(l[n]){if(!U(t)){var a=t.constructor;if(t.constructor.from)e=a.from(t);else{e=new a(t.length);for(i=0,r=t.length;i<r;i++)e[i]=T(t[i])}}}else if(!s[n]&&!U(t)&&!B(t))for(var o in e={},t)t.hasOwnProperty(o)&&(e[o]=T(t[o]));return e}function f(t,e,n){if(!O(e)||!O(t))return n?T(e):t;for(var i in e){var r,a;e.hasOwnProperty(i)&&(r=t[i],!O(a=e[i])||!O(r)||A(a)||A(r)||B(a)||B(r)||E(a)||E(r)||U(a)||U(r)?!n&&i in t||(t[i]=T(e[i])):f(r,a,n))}return t}function C(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function k(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function p(){return a.createCanvas()}var g;function m(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function y(t,e){var n,i=t.prototype;function r(){}for(n in r.prototype=e.prototype,t.prototype=new r,i)t.prototype[n]=i[n];(t.prototype.constructor=t).superClass=e}function _(t,e,n){k(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function P(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function D(t,e,n){if(t&&e)if(t.forEach&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function b(t,e,n){if(t&&e){if(t.map&&t.map===c)return t.map(e,n);for(var i=[],r=0,a=t.length;r<a;r++)i.push(e.call(n,t[r],r,t));return i}}function M(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===d)return t.reduce(e,n,i);for(var r=0,a=t.length;r<a;r++)n=e.call(i,n,t[r],r,t);return n}}function x(t,e,n){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,n);for(var i=[],r=0,a=t.length;r<a;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}}function w(t,e){var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}function S(t){var e=r.call(arguments,1);return function(){return t.apply(this,e.concat(r.call(arguments)))}}function A(t){return"[object Array]"===h.call(t)}function I(t){return"function"==typeof t}function L(t){return"[object String]"===h.call(t)}function O(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function E(t){return s[h.call(t)]}function N(t){return l[h.call(t)]}function B(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function R(t){return t!=t}function z(){for(var t=0,e=arguments.length;t<e;t++)if(null!=arguments[t])return arguments[t]}function F(t,e){return null!=t?t:e}function V(t,e,n){return null!=t?t:null!=e?e:n}function W(){return Function.call.apply(r,arguments)}function H(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function G(t,e){if(!t)throw new Error(e)}function q(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}a.createCanvas=function(){return document.createElement("canvas")};var X="__ec_primitive__";function Y(t){t[X]=!0}function U(t){return t[X]}function j(t){var n=A(t);this.data={};var i=this;function e(t,e){n?i.set(t,e):i.set(e,t)}t instanceof j?t.each(e):t&&D(t,e)}function Z(t){return new j(t)}function $(){}j.prototype={constructor:j,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=w(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var Q="undefined"==typeof Float32Array?Array:Float32Array;function K(t,e){var n=new Q(2);return null==e&&(e=0),n[0]=t=null==t?0:t,n[1]=e,n}function J(t){var e=new Q(2);return e[0]=t[0],e[1]=t[1],e}function tt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function et(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function it(t,e){var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function rt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var at=rt;var ot=function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])};function st(t,e,n){var i=e[0],e=e[1];return t[0]=n[0]*i+n[2]*e+n[4],t[1]=n[1]*i+n[3]*e+n[5],t}function lt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function ht(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ut(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function ct(t,e){return{target:t,topTarget:e&&e.topTarget}}ut.prototype={constructor:ut,_dragStart:function(t){var e=t.target;e&&e.draggable&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(ct(e,t),"dragstart",t.event))},_drag:function(t){var e,n,i,r,a=this._draggingTarget;a&&(i=t.offsetX,r=t.offsetY,e=i-this._x,n=r-this._y,this._x=i,this._y=r,a.drift(e,n,t),this.dispatchToElement(ct(a,t),"drag",t.event),i=this.findHover(i,r,a).target,r=this._dropTarget,a!==(this._dropTarget=i)&&(r&&i!==r&&this.dispatchToElement(ct(r,t),"dragleave",t.event),i&&i!==r&&this.dispatchToElement(ct(i,t),"dragenter",t.event)))},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(ct(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(ct(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var dt=Array.prototype.slice,ft=function(t){this._$handlers={},this._$eventProcessor=t};function pt(t,e,n,i,r,a){var o,s,l=t._$handlers;if("function"==typeof n&&(r=i,i=n,n=null),!i||!e)return t;s=n,o=(o=t)._$eventProcessor,n=s=null!=s&&o&&o.normalizeQuery?o.normalizeQuery(s):s,l[e]||(l[e]=[]);for(var h=0;h<l[e].length;h++)if(l[e][h].h===i)return t;a={h:i,one:a,query:n,ctx:r||t,callAtLast:i.zrEventfulCallAtLast},n=l[e].length-1,r=l[e][n];return r&&r.callAtLast?l[e].splice(n,0,a):l[e].push(a),t}ft.prototype={constructor:ft,one:function(t,e,n,i){return pt(this,t,e,n,i,!0)},on:function(t,e,n,i){return pt(this,t,e,n,i,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,a=n[t].length;r<a;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,r=i.length;3<r&&(i=dt.call(i,1));for(var a=e.length,o=0;o<a;){var s=e[o];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))o++;else{switch(r){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(e.splice(o,1),a--):o++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e)for(var i=arguments,r=i.length,a=(i=4<r?dt.call(i,1,i.length-1):i)[i.length-1],o=e.length,s=0;s<o;){var l=e[s];if(n&&n.filter&&null!=l.query&&!n.filter(t,l.query))s++;else{switch(r){case 1:l.h.call(a);break;case 2:l.h.call(a,i[1]);break;case 3:l.h.call(a,i[1],i[2]);break;default:l.h.apply(a,i)}l.one?(e.splice(s,1),o--):s++}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var gt="undefined"!=typeof window&&!!window.addEventListener,mt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function vt(t,e,n,i){return n=n||{},i||!v.canvasSupported?yt(t,e,n):v.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):yt(t,e,n),n}function yt(t,e,n){t=(t=t).getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0};n.zrX=e.clientX-t.left,n.zrY=e.clientY-t.top}function _t(t,e,n){if(null!=(e=e||window.event).zrX)return e;var i=e.type;i&&0<=i.indexOf("touch")?(i=("touchend"!==i?e.targetTouches:e.changedTouches)[0])&&vt(t,i,e,n):(vt(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3);n=e.button;return null==e.which&&void 0!==n&&mt.test(e.type)&&(e.which=1&n?1:2&n?3:4&n?2:0),e}function xt(){this._track=[]}var wt=gt?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function bt(t){var e=t[1][0]-t[0][0],t=t[1][1]-t[0][1];return Math.sqrt(e*e+t*t)}xt.prototype={constructor:xt,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},a=0,o=i.length;a<o;a++){var s=i[a],l=vt(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(t){for(var e in Mt)if(Mt.hasOwnProperty(e)){e=Mt[e](this._track,t);if(e)return e}}};var Mt={pinch:function(t,e){var n=t.length;if(n){var i=(t[n-1]||{}).points,n=(t[n-2]||{}).points||i;if(n&&1<n.length&&i&&1<i.length){n=bt(i)/bt(n);isFinite(n)||(n=1),e.pinchScale=n;i=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2];return e.pinchX=i[0],e.pinchY=i[1],{type:"pinch",target:t[0].target,event:e}}}}},St="silent";function It(t){wt(this.event)}function Tt(){}Tt.prototype.dispose=function(){};function Ct(t,e,n,i){ft.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new Tt,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,ut.call(this),this.setHandlerProxy(n)}var kt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];Ct.prototype={constructor:Ct,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(D(kt,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(t){var e=t.zrX,n=t.zrY,i=this._hovered,r=i.target;r&&!r.__zr&&(r=(i=this.findHover(i.x,i.y)).target);var a=this._hovered=this.findHover(e,n),e=a.target,n=this.proxy;n.setCursor&&n.setCursor(e?e.cursor:"default"),r&&e!==r&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),e&&e!==r&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);for(var e,n=t.toElement||t.relatedTarget;(n=n&&n.parentNode)&&9!==n.nodeType&&!(e=n===this.painterRoot););e||this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){t=this[t];t&&t.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,a={type:e,event:n,target:(t=t).target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:It};i&&(i[r]&&(a.cancelBubble=i[r].call(i,a)),i.trigger(e,a),i=i.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,a),t.trigger&&t.trigger(e,a)}))}},findHover:function(t,e,n){for(var i,r=this.storage.getDisplayList(),a={x:t,y:e},o=r.length-1;0<=o;o--)if(r[o]!==n&&!r[o].ignore&&(i=function(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||St}return!1}(r[o],t,e))&&(a.topTarget||(a.topTarget=r[o]),i!==St)){a.target=r[o];break}return a},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new xt);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);"end"===e&&n.clear(),i&&(n=i.type,t.gestureEvent=n,this.dispatchToElement({target:i.target},n,i.event))}},D(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(i){Ct.prototype[i]=function(t){var e=this.findHover(t.zrX,t.zrY),n=e.target;if("mousedown"===i)this._downEl=n,this._downPoint=[t.zrX,t.zrY],this._upEl=n;else if("mouseup"===i)this._upEl=n;else if("click"===i){if(this._downEl!==this._upEl||!this._downPoint||4<at(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(e,i,t)}}),_(Ct,ft),_(Ct,ut);var Dt="undefined"==typeof Float32Array?Array:Float32Array;function At(){var t=new Dt(6);return Lt(t),t}function Lt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Pt(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],o=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],e=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=e,t}function Ot(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function Et(t,e,n){var i=e[0],r=e[2],a=e[4],o=e[1],s=e[3],l=e[5],e=Math.sin(n),n=Math.cos(n);return t[0]=i*n+o*e,t[1]=-i*e+o*n,t[2]=r*n+s*e,t[3]=-r*e+n*s,t[4]=n*a+e*l,t[5]=n*l-e*a,t}function Nt(t,e,n){var i=n[0],n=n[1];return t[0]=e[0]*i,t[1]=e[1]*n,t[2]=e[2]*i,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*n,t}function Bt(t,e){var n=e[0],i=e[2],r=e[4],a=e[1],o=e[3],s=e[5],e=n*o-a*i;return e?(t[0]=o*(e=1/e),t[1]=-a*e,t[2]=-i*e,t[3]=n*e,t[4]=(i*s-o*r)*e,t[5]=(a*r-n*s)*e,t):null}var Rt=Lt;function zt(t){return 5e-5<t||t<-5e-5}var Ft=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},Vt=Ft.prototype;Vt.transform=null,Vt.needLocalTransform=function(){return zt(this.rotation)||zt(this.position[0])||zt(this.position[1])||zt(this.scale[0]-1)||zt(this.scale[1]-1)};var Wt=[];Vt.updateTransform=function(){var t,e,n=this.parent,i=n&&n.transform,r=this.needLocalTransform(),a=this.transform;r||i?(a=a||At(),r?this.getLocalTransform(a):Rt(a),i&&(r?Pt(a,n.transform,a):(t=a,e=n.transform,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5])),this.transform=a,null!=(n=this.globalScaleRatio)&&1!==n&&(this.getGlobalScale(Wt),e=((Wt[1]-(t=Wt[1]<0?-1:1))*n+t)/Wt[1]||0,a[0]*=t=((Wt[0]-(t=Wt[0]<0?-1:1))*n+t)/Wt[0]||0,a[1]*=t,a[2]*=e,a[3]*=e),this.invTransform=this.invTransform||At(),Bt(this.invTransform,a)):a&&Rt(a)},Vt.getLocalTransform=function(t){return Ft.getLocalTransform(this,t)},Vt.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},Vt.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Ht=[],Gt=At();Vt.setLocalTransform=function(t){var e,n,i,r;t&&(e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=this.position,r=this.scale,zt(e-1)&&(e=Math.sqrt(e)),zt(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),i[0]=t[4],i[1]=t[5],r[0]=e,r[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e))},Vt.decomposeTransform=function(){var t,e;this.transform&&(e=this.parent,t=this.transform,e&&e.transform&&(Pt(Ht,e.invTransform,t),t=Ht),(e=this.origin)&&(e[0]||e[1])&&(Gt[4]=e[0],Gt[5]=e[1],Pt(Ht,t,Gt),Ht[4]-=e[0],Ht[5]-=e[1],t=Ht),this.setLocalTransform(t))},Vt.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1])):(t[0]=1,t[1]=1),t},Vt.transformCoordToLocal=function(t,e){t=[t,e],e=this.invTransform;return e&&st(t,t,e),t},Vt.transformCoordToGlobal=function(t,e){t=[t,e],e=this.transform;return e&&st(t,t,e),t},Ft.getLocalTransform=function(t,e){Rt(e=e||[]);var n=t.origin,i=t.scale||[1,1],r=t.rotation||0,t=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),Nt(e,e,i),r&&Et(e,e,r),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=t[0],e[5]+=t[1],e};var qt={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-qt.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*qt.bounceIn(2*t):.5*qt.bounceOut(2*t-1)+.5}};function Xt(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}Xt.prototype={constructor:Xt,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else if(!((n=(t-this._startTime-this._pausedTime)/this._life)<0)){var n=Math.min(n,1),e=this.easing,e="string"==typeof e?qt[e]:e,e="function"==typeof e?e(n):n;return this.fire("frame",e),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};function Yt(){this.head=null,this.tail=null,this._len=0}var Ut=Yt.prototype;Ut.insert=function(t){t=new jt(t);return this.insertEntry(t),t},Ut.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Ut.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Ut.len=function(){return this._len},Ut.clear=function(){this.head=this.tail=null,this._len=0};var jt=function(t){this.value=t,this.next,this.prev},Zt=function(t){this._list=new Yt,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},$t=Zt.prototype;$t.put=function(t,e){var n,i,r=this._list,a=this._map,o=null;return null==a[t]&&(i=r.len(),n=this._lastRemovedEntry,i>=this._maxSize&&0<i&&(i=r.head,r.remove(i),delete a[i.key],o=i.value,this._lastRemovedEntry=i),n?n.value=e:n=new jt(e),n.key=t,r.insertEntry(n),a[t]=n),o},$t.get=function(t){var e=this._map[t],t=this._list;if(null!=e)return e!==t.tail&&(t.remove(e),t.insertEntry(e)),e.value},$t.clear=function(){this._list.clear(),this._map={}};var Qt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Kt(t){return(t=Math.round(t))<0?0:255<t?255:t}function Jt(t){return t<0?0:1<t?1:t}function te(t){return t.length&&"%"===t.charAt(t.length-1)?Kt(parseFloat(t)/100*255):Kt(parseInt(t,10))}function ee(t){return t.length&&"%"===t.charAt(t.length-1)?Jt(parseFloat(t)/100):Jt(parseFloat(t))}function ne(t,e,n){return n<0?n+=1:1<n&&--n,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function ie(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function re(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var ae=new Zt(20),oe=null;function se(t,e){oe&&re(oe,e),oe=ae.put(t,oe||e.slice())}function le(t,e){if(t){e=e||[];var n=ae.get(t);if(n)return re(e,n);var i=(t+="").replace(/ /g,"").toLowerCase();if(i in Qt)return re(e,Qt[i]),se(t,e),e;if("#"===i.charAt(0))return 4===i.length?0<=(a=parseInt(i.substr(1),16))&&a<=4095?(ie(e,(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1),se(t,e),e):void ie(e,0,0,0,1):7===i.length?0<=(a=parseInt(i.substr(1),16))&&a<=16777215?(ie(e,(16711680&a)>>16,(65280&a)>>8,255&a,1),se(t,e),e):void ie(e,0,0,0,1):void 0;var r=i.indexOf("("),n=i.indexOf(")");if(-1!==r&&n+1===i.length){var a=i.substr(0,r),o=i.substr(r+1,n-(r+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return void ie(e,0,0,0,1);s=ee(o.pop());case"rgb":return 3!==o.length?void ie(e,0,0,0,1):(ie(e,te(o[0]),te(o[1]),te(o[2]),s),se(t,e),e);case"hsla":return 4!==o.length?void ie(e,0,0,0,1):(o[3]=ee(o[3]),he(o,e),se(t,e),e);case"hsl":return 3!==o.length?void ie(e,0,0,0,1):(he(o,e),se(t,e),e);default:return}}ie(e,0,0,0,1)}}function he(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=ee(t[1]),r=ee(t[2]),i=r<=.5?r*(i+1):r+i-r*i,r=2*r-i;return ie(e=e||[],Kt(255*ne(r,i,n+1/3)),Kt(255*ne(r,i,n)),Kt(255*ne(r,i,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function ue(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var ce=Array.prototype.slice;function de(t,e){return t[e]}function fe(t,e,n){t[e]=n}function pe(t,e,n){return(e-t)*n+t}function ge(t,e,n){return.5<n?e:t}function me(t,e,n,i,r){var a=t.length;if(1===r)for(var o=0;o<a;o++)i[o]=pe(t[o],e[o],n);else for(var s=a&&t[0].length,o=0;o<a;o++)for(var l=0;l<s;l++)i[o][l]=pe(t[o][l],e[o][l],n)}function ve(t,e,n){var i=t.length,r=e.length;if(i!==r)if(r<i)t.length=r;else for(var a=i;a<r;a++)t.push(1===n?e[a]:ce.call(e[a]));for(var o=t[0]&&t[0].length,a=0;a<t.length;a++)if(1===n)isNaN(t[a])&&(t[a]=e[a]);else for(var s=0;s<o;s++)isNaN(t[a][s])&&(t[a][s]=e[a][s])}function ye(t,e,n,i,r,a,o,s,l){var h=t.length;if(1===l)for(var u=0;u<h;u++)s[u]=_e(t[u],e[u],n[u],i[u],r,a,o);else for(var c=t[0].length,u=0;u<h;u++)for(var d=0;d<c;d++)s[u][d]=_e(t[u][d],e[u][d],n[u][d],i[u][d],r,a,o)}function _e(t,e,n,i,r,a,o){t=.5*(n-t),i=.5*(i-e);return(2*(e-n)+t+i)*o+(-3*(e-n)-2*t-i)*a+t*r+e}function xe(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function we(t,e,n,i,a,r){var o=t._getter,s=t._setter,l="spline"===e,h=i.length;if(h){var u,c=P(i[0].value),d=!1,f=!1,p=c?P((u=(u=i)[u.length-1].value)&&u[0])?2:1:0;i.sort(function(t,e){return t.time-e.time});for(var g=i[h-1].time,m=[],v=[],y=i[0].value,_=!0,x=0;x<h;x++){m.push(i[x].time/g);var w,b=i[x].value;c&&function(t,e,n){if(t===e)return 1;var i=t.length;if(i===e.length){if(1===n){for(var r=0;r<i;r++)if(t[r]!==e[r])return}else for(var a=t[0].length,r=0;r<i;r++)for(var o=0;o<a;o++)if(t[r][o]!==e[r][o])return;return 1}}(b,y,p)||!c&&b===y||(_=!1),"string"==typeof(y=b)&&((w=le(b))?(b=w,d=!0):f=!0),v.push(b)}if(r||!_){for(var M=v[h-1],x=0;x<h-1;x++)c?ve(v[x],M,p):!isNaN(v[x])||isNaN(M)||f||d||(v[x]=M);c&&ve(o(t._target,a),M,p);var S,I,T,C,k,D,A=0,L=0;d&&(D=[0,0,0,0]);n=new Xt({target:t._target,life:g,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<L){for(n=Math.min(A+1,h-1);0<=n&&!(m[n]<=e);n--);n=Math.min(n,h-2)}else{for(n=A;n<h&&!(m[n]>e);n++);n=Math.min(n-1,h-2)}L=e;var i,r=m[(A=n)+1]-m[n];if(0!=r)if(S=(e-m[n])/r,l)if(T=v[n],I=v[0===n?n:n-1],C=v[h-2<n?h-1:n+1],k=v[h-3<n?h-1:n+2],c)ye(I,T,C,k,S,S*S,S*S*S,o(t,a),p);else{if(d)i=ye(I,T,C,k,S,S*S,S*S*S,D,1),i=xe(D);else{if(f)return.5<S?C:T;i=_e(I,T,C,k,S,S*S,S*S*S)}s(t,a,i)}else if(c)me(v[n],v[n+1],S,o(t,a),p);else{if(d)me(v[n],v[n+1],S,D,1),i=xe(D);else{if(f)return ge(v[n],v[n+1],S);i=pe(v[n],v[n+1],S)}s(t,a,i)}},ondestroy:n});return e&&"spline"!==e&&(n.easing=e),n}}}function be(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||de,this._setter=i||fe,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}be.prototype={when:function(t,e){var n,i=this._tracks;for(n in e)if(e.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:function(t){if(P(t)){var e=t.length;if(P(t[0])){for(var n=[],i=0;i<e;i++)n.push(ce.call(t[i]));return n}return ce.call(t)}return t}(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){function n(){--l||s._doneCallback()}var i,r,a,o,s=this,l=0;for(r in this._tracks)this._tracks.hasOwnProperty(r)&&((a=we(this,t,n,this._tracks[r],r,e))&&(this._clipList.push(a),l++,this.animation&&this.animation.addClip(a),i=a));return i&&(o=i.onframe,i.onframe=function(t,e){o(t,e);for(var n=0;n<s._onframeList.length;n++)s._onframeList[n](t,e)}),l||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var Me=1,Se=Me="undefined"!=typeof window?Math.max(window.devicePixelRatio||1,1):Me,Ie=function(){};function Te(){this.animators=[]}var Ce=Ie;function ke(t,e,n,i,r,a,o,s){L(i)?(a=r,r=i,i=0):I(r)?(a=r,r="linear",i=0):I(i)?(a=i,i=0):n=I(n)?(a=n,500):n||500,t.stopAnimation(),function t(e,n,i,r,a,o,s){var l={};var h=0;for(var u in r)r.hasOwnProperty(u)&&(null!=i[u]?O(r[u])&&!P(r[u])?t(e,n?n+"."+u:u,i[u],r[u],a,o,s):(s?(l[u]=i[u],De(e,n,u,r[u])):l[u]=r[u],h++):null==r[u]||s||De(e,n,u,r[u]));0<h&&e.animate(n,!1).when(null==a?500:a,l).delay(o||0)}(t,"",t,e,n,i,s);var l=t.animators.slice(),h=l.length;function u(){--h||a&&a()}h||a&&a();for(var c=0;c<l.length;c++)l[c].done(u).start(r,o)}function De(t,e,n,i){var r;e?((r={})[e]={},r[e][n]=i,t.attr(r)):t.attr(n,i)}Te.prototype={constructor:Te,animate:function(t,e){var n,i=!1,r=this,a=this.__zr;if(t){for(var o=t.split("."),s=r,i="shape"===o[0],l=0,h=o.length;l<h;l++)s=s&&s[o[l]];s&&(n=s)}else n=r;if(n){var u=r.animators,c=new be(n,e);return c.during(function(t){r.dirty(i)}).done(function(){u.splice(m(u,c),1)}),u.push(c),a&&a.animation.addAnimator(c),c}Ce('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,r,a){ke(this,t,e,n,i,r,a)},animateFrom:function(t,e,n,i,r,a){ke(this,t,e,n,i,r,a,!0)}};var Ae=function(t){Ft.call(this,t),ft.call(this,t),Te.call(this,t),this.id=t.id||n()};Ae.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){var n;"position"===t||"scale"===t||"origin"===t?e&&((n=(n=this[t])||(this[t]=[]))[0]=e[0],n[1]=e[1]):this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(O(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},_(Ae,Te),_(Ae,Ft),_(Ae,ft);var Le,Pe,Oe,Ee,Ne=st,Be=Math.min,Re=Math.max;function ze(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}ze.prototype={constructor:ze,union:function(t){var e=Be(t.x,this.x),n=Be(t.y,this.y);this.width=Re(t.x+t.width,this.x+this.width)-e,this.height=Re(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:(Le=[],Pe=[],Oe=[],Ee=[],function(t){var e;t&&(Le[0]=Oe[0]=this.x,Le[1]=Ee[1]=this.y,Pe[0]=Ee[0]=this.x+this.width,Pe[1]=Oe[1]=this.y+this.height,Ne(Le,Le,t),Ne(Pe,Pe,t),Ne(Oe,Oe,t),Ne(Ee,Ee,t),this.x=Be(Le[0],Pe[0],Oe[0],Ee[0]),this.y=Be(Le[1],Pe[1],Oe[1],Ee[1]),e=Re(Le[0],Pe[0],Oe[0],Ee[0]),t=Re(Le[1],Pe[1],Oe[1],Ee[1]),this.width=e-this.x,this.height=t-this.y)}),calculateTransform:function(t){var e=t.width/this.width,n=t.height/this.height,i=At();return Ot(i,i,[-this.x,-this.y]),Nt(i,i,[e,n]),Ot(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof ze||(t=ze.create(t));var e=this,n=e.x,i=e.x+e.width,r=e.y,a=e.y+e.height,o=t.x,s=t.x+t.width,e=t.y,t=t.y+t.height;return!(i<o||s<n||a<e||t<r)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new ze(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};var Fe=function(t){for(var e in Ae.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};Fe.prototype={constructor:Fe,isGroup:!0,type:"group",silent:!(ze.create=function(t){return new ze(t.x,t.y,t.width,t.height)}),children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){var n;return t&&t!==this&&t.parent!==this&&e&&e.parent===this&&(0<=(e=(n=this._children).indexOf(e))&&(n.splice(e,0,t),this._doAdd(t))),this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof Fe&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,r=m(i,t);return r<0||(i.splice(r,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof Fe&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){for(var t,e=this._children,n=this.__storage,i=0;i<e.length;i++)t=e[i],n&&(n.delFromStorage(t),t instanceof Fe&&t.delChildrenFromStorage(n)),t.parent=null;return e.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof Fe&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof Fe&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new ze(0,0,0,0),i=t||this._children,r=[],a=0;a<i.length;a++){var o,s=i[a];s.ignore||s.invisible||(o=s.getBoundingRect(),(s=s.getLocalTransform(r))?(n.copy(o),n.applyTransform(s),(e=e||n.clone()).union(n)):(e=e||o.clone()).union(o))}return e||n}},y(Fe,Ae);var Ve=32,We=7;function He(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){n--;for(;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&0<=i(t[r],t[r-1]);)r++;return r-e}function Ge(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var a,o=t[i],s=e,l=i;s<l;)r(o,t[a=s+l>>>1])<0?l=a:s=1+a;var h=i-s;switch(h){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;0<h;)t[s+h]=t[s+h-1],h--}t[s]=o}}function qe(t,e,n,i,r,a){var o=0,s=0,l=1;if(0<a(t,e[n+r])){for(s=i-r;l<s&&0<a(t,e[n+r+l]);)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s),o+=r,l+=r}else{for(s=r+1;l<s&&a(t,e[n+r-l])<=0;)(l=1+((o=l)<<1))<=0&&(l=s);i=o,o=r-(l=s<l?s:l),l=r-i}for(o++;o<l;){var h=o+(l-o>>>1);0<a(t,e[n+h])?o=h+1:l=h}return l}function Xe(t,e,n,i,r,a){var o=0,s=0,l=1;if(a(t,e[n+r])<0){for(s=r+1;l<s&&a(t,e[n+r-l])<0;)(l=1+((o=l)<<1))<=0&&(l=s);var h=o,o=r-(l=s<l?s:l),l=r-h}else{for(s=i-r;l<s&&0<=a(t,e[n+r+l]);)(l=1+((o=l)<<1))<=0&&(l=s);s<l&&(l=s),o+=r,l+=r}for(o++;o<l;){var u=o+(l-o>>>1);a(t,e[n+u])<0?l=u:o=u+1}return l}function Ye(p,g){var a,o,m=We,s=0,v=[];function e(t){var e=a[t],n=o[t],i=a[t+1],r=o[t+1];o[t]=n+r,t===s-3&&(a[t+1]=a[t+2],o[t+1]=o[t+2]),s--;t=Xe(p[i],p,e,n,0,g);e+=t,0!=(n-=t)&&0!==(r=qe(p[e+n-1],p,i,r,r-1,g))&&(n<=r?function(t,e,n,i){var r=0;for(r=0;r<e;r++)v[r]=p[t+r];var a=0,o=n,s=t;if(p[s++]=p[o++],0!=--i)if(1!==e){for(var l,h,u,c=m;;){h=l=0,u=!1;do{if(g(p[o],v[a])<0){if(p[s++]=p[o++],h++,(l=0)==--i){u=!0;break}}else if(p[s++]=v[a++],l++,h=0,1==--e){u=!0;break}}while((l|h)<c);if(u)break;do{if(0!==(l=Xe(p[o],v,a,e,0,g))){for(r=0;r<l;r++)p[s+r]=v[a+r];if(s+=l,a+=l,(e-=l)<=1){u=!0;break}}if(p[s++]=p[o++],0==--i){u=!0;break}if(0!==(h=qe(v[a],p,o,i,0,g))){for(r=0;r<h;r++)p[s+r]=p[o+r];if(s+=h,o+=h,0===(i-=h)){u=!0;break}}if(p[s++]=v[a++],1==--e){u=!0;break}}while(c--,We<=l||We<=h);if(u)break;c<0&&(c=0),c+=2}if((m=c)<1&&(m=1),1===e){for(r=0;r<i;r++)p[s+r]=p[o+r];p[s+i]=v[a]}else{if(0===e)throw new Error;for(r=0;r<e;r++)p[s+r]=v[a+r]}}else{for(r=0;r<i;r++)p[s+r]=p[o+r];p[s+i]=v[a]}else for(r=0;r<e;r++)p[s+r]=v[a+r]}:function(t,e,n,i){var r=0;for(r=0;r<i;r++)v[r]=p[n+r];var a=t+e-1,o=i-1,s=n+i-1,l=0,h=0;if(p[s--]=p[a--],0!=--e)if(1!==i){for(var u=m;;){var c=0,d=0,f=!1;do{if(g(v[o],p[a])<0){if(p[s--]=p[a--],c++,(d=0)==--e){f=!0;break}}else if(p[s--]=v[o--],d++,c=0,1==--i){f=!0;break}}while((c|d)<u);if(f)break;do{if(0!==(c=e-Xe(v[o],p,t,e,e-1,g))){for(e-=c,h=(s-=c)+1,l=(a-=c)+1,r=c-1;0<=r;r--)p[h+r]=p[l+r];if(0===e){f=!0;break}}if(p[s--]=v[o--],1==--i){f=!0;break}if(0!==(d=i-qe(p[a],v,0,i,i-1,g))){for(i-=d,h=(s-=d)+1,l=(o-=d)+1,r=0;r<d;r++)p[h+r]=v[l+r];if(i<=1){f=!0;break}}if(p[s--]=p[a--],0==--e){f=!0;break}}while(u--,We<=c||We<=d);if(f)break;u<0&&(u=0),u+=2}if((m=u)<1&&(m=1),1===i){for(h=(s-=e)+1,l=(a-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];p[s]=v[o]}else{if(0===i)throw new Error;for(l=s-(i-1),r=0;r<i;r++)p[l+r]=v[r]}}else{for(h=(s-=e)+1,l=(a-=e)+1,r=e-1;0<=r;r--)p[h+r]=p[l+r];p[s]=v[o]}else for(l=s-(i-1),r=0;r<i;r++)p[l+r]=v[r]})(e,n,i,r)}a=[],o=[],this.mergeRuns=function(){for(;1<s;){var t=s-2;if(1<=t&&o[t-1]<=o[t]+o[t+1]||2<=t&&o[t-2]<=o[t]+o[t-1])o[t-1]<o[t+1]&&t--;else if(o[t]>o[t+1])break;e(t)}},this.forceMergeRuns=function(){for(;1<s;){var t=s-2;0<t&&o[t-1]<o[t+1]&&t--,e(t)}},this.pushRun=function(t,e){a[s]=t,o[s]=e,s+=1}}function Ue(t,e,n,i){var r=(i=i||t.length)-(n=n||0);if(!(r<2)){var a=0;if(r<Ve)Ge(t,n,i,n+(a=He(t,n,i,e)),e);else{var o,s=new Ye(t,e),l=function(t){for(var e=0;Ve<=t;)e|=1&t,t>>=1;return t+e}(r);do{}while((a=He(t,n,i,e))<l&&(Ge(t,n,n+(o=l<(o=r)?l:r),n+a,e),a=o),s.pushRun(n,a),s.mergeRuns(),n+=a,0!==(r-=a));s.forceMergeRuns()}}}function je(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function Ze(){this._roots=[],this._displayList=[],this._displayListLen=0}Ze.prototype={constructor:Ze,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,v.canvasSupported&&Ue(n,je)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,a=t;r;)r.parent=a,r.updateTransform(),e.push(r),r=(a=r).clipPath}if(t.isGroup){for(var o=t._children,s=0;s<o.length;s++){var l=o[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof Fe&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof Fe&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);else{var r=m(this._roots,t);0<=r&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof Fe&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:je};var $e={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Qe=function(t,e,n){return $e.hasOwnProperty(e)?n*t.dpr:n},Ke={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},Je=9,tn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],en=function(t){this.extendFrom(t,!1)};function nn(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,a=null==e.y?0:e.y,o=null==e.y2?0:e.y2;e.global||(i=i*n.width+n.x,r=r*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y);i=isNaN(i)?0:i,r=isNaN(r)?1:r,a=isNaN(a)?0:a,o=isNaN(o)?0:o;return t.createLinearGradient(i,a,r,o)}function rn(t,e,n){var i=n.width,r=n.height,a=Math.min(i,r),o=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(o=o*i+n.x,s=s*r+n.y,l*=a),t.createRadialGradient(o,s,0,o,s,l)}en.prototype={constructor:en,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,r=n&&n.style,a=!r||t.__attrCachedBy!==Ke.STYLE_BIND;t.__attrCachedBy=Ke.STYLE_BIND;for(var o=0;o<tn.length;o++){var s=tn[o],l=s[0];!a&&i[l]===r[l]||(t[l]=Qe(t,l,i[l]||s[1]))}!a&&i.fill===r.fill||(t.fillStyle=i.fill),!a&&i.stroke===r.stroke||(t.strokeStyle=i.stroke),!a&&i.opacity===r.opacity||(t.globalAlpha=null==i.opacity?1:i.opacity),!a&&i.blend===r.blend||(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(n=i.lineWidth,t.lineWidth=n/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1))},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?rn:nn)(t,e,n),r=e.colorStops,a=0;a<r.length;a++)i.addColorStop(r[a].offset,r[a].color);return i}};for(var an=en.prototype,on=0;on<tn.length;on++){var sn=tn[on];sn[0]in an||(an[sn[0]]=sn[1])}en.getGradient=an.getGradient;function ln(t,e){this.image=t,this.repeat=e,this.type="pattern"}function hn(){return!1}function un(t,e,n){var i=p(),r=e.getWidth(),a=e.getHeight(),e=i.style;return e&&(e.position="absolute",e.left=0,e.top=0,e.width=r+"px",e.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=a*n,i}function cn(t,e,n){var i;n=n||Se,"string"==typeof t?i=un(t,e,n):O(t)&&(t=(i=t).id),this.id=t,(t=(this.dom=i).style)&&(i.onselectstart=hn,t["-webkit-user-select"]="none",t["user-select"]="none",t["-webkit-touch-callout"]="none",t["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",t.padding=0,t.margin=0,t["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}cn.prototype={constructor:cn,__dirty:!0,__used:!(ln.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=un("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,a=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,a&&(a.width=t*n,a.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,i=this.dom,r=this.ctx,a=i.width,o=i.height,e=e||this.clearColor,s=this.motionBlur&&!t,l=this.lastFrameAlpha,t=this.dpr;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/t,o/t)),r.clearRect(0,0,a,o),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||en.getGradient(r,e,{x:0,y:0,width:a,height:o}),e.__canvasGradient=n):e.image&&(n=ln.prototype.getCanvasPattern.call(e,r)),r.save(),r.fillStyle=n||e,r.fillRect(0,0,a,o),r.restore()),s&&(s=this.domBack,r.save(),r.globalAlpha=l,r.drawImage(s,0,0,a,o),r.restore())}};var dn="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},fn=new Zt(50);function pn(t,e,n,i,r){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!n)return e;var a=fn.get(t),r={hostEl:n,cb:i,cbPayload:r};return a?mn(e=a.image)||a.pending.push(r):((e=new Image).onload=e.onerror=gn,fn.put(t,e.__cachedImgObj={image:e,pending:[r]}),e.src=e.__zrImageSrc=t),e}return e}function gn(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function mn(t){return t&&t.width&&t.height}var vn={},yn=0,_n=5e3,xn=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,wn="12px sans-serif",bn={};function Mn(t,e){var n=t+":"+(e=e||wn);if(vn[n])return vn[n];for(var i,r,a=(t+"").split("\n"),o=0,s=0,l=a.length;s<l;s++)o=Math.max((i=a[s],r=e,bn.measureText(i,r)).width,o);return _n<yn&&(yn=0,vn={}),yn++,vn[n]=o}function Sn(t,e,n,i,r,a,o,s){return o?function(t,e,n,i,r,a,o,s){r=Pn(t,{rich:o,truncate:s,font:e,textAlign:n,textPadding:r,textLineHeight:a}),a=r.outerWidth,r=r.outerHeight,n=In(0,a,n),i=Tn(0,r,i);return new ze(n,i,a,r)}(t,e,n,i,r,a,o,s):function(t,e,n,i,r,a,o){o=Ln(t,e,r,a,o),e=Mn(t,e);r&&(e+=r[1]+r[3]);r=o.outerHeight,n=In(0,e,n),i=Tn(0,r,i),r=new ze(n,i,e,r);return r.lineHeight=o.lineHeight,r}(t,e,n,i,r,a,s)}function In(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Tn(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function Cn(t,e,n,i,r){if(!e)return"";var a=(t+"").split("\n");r=kn(e,n,i,r);for(var o=0,s=a.length;o<s;o++)a[o]=Dn(a[o],r);return a.join("\n")}function kn(t,e,n,i){(i=C({},i)).font=e;n=F(n,"...");i.maxIterations=F(i.maxIterations,2);var r=i.minChar=F(i.minChar,0);i.cnCharWidth=Mn("",e);var a=i.ascCharWidth=Mn("a",e);i.placeholder=F(i.placeholder,"");for(var o=t=Math.max(0,t-1),s=0;s<r&&a<=o;s++)o-=a;e=Mn(n,e);return o<e&&(n="",e=0),o=t-e,i.ellipsis=n,i.ellipsisWidth=e,i.contentWidth=o,i.containerWidth=t,i}function Dn(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";if((s=Mn(t,i))<=n)return t;for(var a=0;;a++){if(s<=r||a>=e.maxIterations){t+=e.ellipsis;break}var o=0===a?function(t,e,n,i){for(var r=0,a=0,o=t.length;a<o&&r<e;a++){var s=t.charCodeAt(a);r+=0<=s&&s<=127?n:i}return a}(t,r,e.ascCharWidth,e.cnCharWidth):0<s?Math.floor(t.length*r/s):0,s=Mn(t=t.substr(0,o),i)}return t=""===t?e.placeholder:t}function An(t){return Mn("",t)}function Ln(t,e,n,i,r){null!=t&&(t+="");var a=F(i,An(e)),o=t?t.split("\n"):[],s=o.length*a,l=s;if(n&&(l+=n[0]+n[2]),t&&r){var h=r.outerHeight,i=r.outerWidth;if(null!=h&&h<l)t="",o=[];else if(null!=i)for(var u=kn(i-(n?n[1]+n[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),c=0,d=o.length;c<d;c++)o[c]=Dn(o[c],u)}return{lines:o,height:s,outerHeight:l,lineHeight:a}}function Pn(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,r=xn.lastIndex=0;null!=(i=xn.exec(t));){var a=i.index;r<a&&On(n,t.substring(r,a)),On(n,i[2],i[1]),r=xn.lastIndex}r<t.length&&On(n,t.substring(r,t.length));var o=n.lines,s=0,l=0,h=[],u=e.textPadding,c=e.truncate,d=c&&c.outerWidth,f=c&&c.outerHeight;u&&(null!=d&&(d-=u[1]+u[3]),null!=f&&(f-=u[0]+u[2]));for(var p=0;p<o.length;p++){for(var g=o[p],m=0,v=0,y=0;y<g.tokens.length;y++){var _=(C=g.tokens[y]).styleName&&e.rich[C.styleName]||{},x=C.textPadding=_.textPadding,w=C.font=_.font||e.font,b=C.textHeight=F(_.textHeight,An(w));if(x&&(b+=x[0]+x[2]),C.height=b,C.lineHeight=V(_.textLineHeight,e.textLineHeight,b),C.textAlign=_&&_.textAlign||e.textAlign,C.textVerticalAlign=_&&_.textVerticalAlign||"middle",null!=f&&s+C.lineHeight>f)return{lines:[],width:0,height:0};C.textWidth=Mn(C.text,w);var M,S,I=_.textWidth,T=null==I||"auto"===I;"string"==typeof I&&"%"===I.charAt(I.length-1)?(C.percentWidth=I,h.push(C),I=0):(T&&(I=C.textWidth,(S=(M=_.textBackgroundColor)&&M.image)&&mn(S="string"!=typeof(M=S)?M:(M=fn.get(M))&&M.image)&&(I=Math.max(I,S.width*b/S.height))),I+=S=x?x[1]+x[3]:0,null!=(x=null!=d?d-v:null)&&x<I&&(!T||x<S?(C.text="",C.textWidth=I=0):(C.text=Cn(C.text,x-S,w,c.ellipsis,{minChar:c.minChar}),C.textWidth=Mn(C.text,w),I=C.textWidth+S))),v+=C.width=I,_&&(m=Math.max(m,C.lineHeight))}g.width=v,s+=g.lineHeight=m,l=Math.max(l,v)}n.outerWidth=n.width=F(e.textWidth,l),n.outerHeight=n.height=F(e.textHeight,s),u&&(n.outerWidth+=u[1]+u[3],n.outerHeight+=u[0]+u[2]);for(p=0;p<h.length;p++){var C,k=(C=h[p]).percentWidth;C.width=parseInt(k,10)/100*l}return n}function On(t,e,n){for(var i=""===e,r=e.split("\n"),a=t.lines,o=0;o<r.length;o++){var s,l,h=r[o],u={styleName:n,text:h,isLineHolder:!h&&!i};o?a.push({tokens:[u]}):1===(l=(s=(a[a.length-1]||(a[0]={tokens:[]})).tokens).length)&&s[0].isLineHolder?s[0]=u:!h&&l&&!i||s.push(u)}}function En(t,e){var n,i,r,a,o,s=e.x,l=e.y,h=e.width,u=e.height,e=e.r;h<0&&(s+=h,h=-h),u<0&&(l+=u,u=-u),"number"==typeof e?n=i=r=a=e:e instanceof Array?1===e.length?n=i=r=a=e[0]:2===e.length?(n=r=e[0],i=a=e[1]):3===e.length?(n=e[0],i=a=e[1],r=e[2]):(n=e[0],i=e[1],r=e[2],a=e[3]):n=i=r=a=0,h<n+i&&(n*=h/(o=n+i),i*=h/o),h<r+a&&(r*=h/(o=r+a),a*=h/o),u<i+r&&(i*=u/(o=i+r),r*=u/o),u<n+a&&(n*=u/(o=n+a),a*=u/o),t.moveTo(s+n,l),t.lineTo(s+h-i,l),0!==i&&t.arc(s+h-i,l+i,i,-Math.PI/2,0),t.lineTo(s+h,l+u-r),0!==r&&t.arc(s+h-r,l+u-r,r,0,Math.PI/2),t.lineTo(s+a,l+u),0!==a&&t.arc(s+a,l+u-a,a,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}bn.measureText=function(t,e){var n=g=g||p().getContext("2d");return n.font=e||wn,n.measureText(t)};var Nn=wn,Bn={left:1,right:1,center:1},Rn={top:1,bottom:1,middle:1},zn=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]];function Fn(t){return Vn(t),D(t.rich,Vn),t}function Vn(t){var e,n;t&&(t.font=(n=((e=t).fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" "))&&q(n)||e.textFont||e.font,e=t.textAlign,t.textAlign=null==(e="middle"===e?"center":e)||Bn[e]?e:"left",e=t.textVerticalAlign||t.textBaseline,t.textVerticalAlign=null==(e="center"===e?"middle":e)||Rn[e]?e:"top",t.textPadding&&(t.textPadding=H(t.textPadding)))}function Wn(t,e,n,i,r,a){(i.rich?function(t,e,n,i,r,a){a!==Je&&(e.__attrCachedBy=Ke.NONE);a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=Pn(n,i));!function(t,e,n,i,r){var a=n.width,o=n.outerWidth,s=n.outerHeight,l=i.textPadding,h=Un(0,i,r),u=h.baseX,c=h.baseY,d=h.textAlign,h=h.textVerticalAlign;Hn(e,i,r,u,c);var d=In(u,o,d),h=Tn(c,s,h),f=d,p=h;l&&(f+=l[3],p+=l[0]);var g=f+a;qn(i)&&Xn(t,e,i,d,h,o,s);for(var m,v=0;v<n.lines.length;v++){for(var y=n.lines[v],_=y.tokens,x=_.length,w=y.lineHeight,b=y.width,M=0,S=f,I=g,T=x-1;M<x&&(!(m=_[M]).textAlign||"left"===m.textAlign);)Gn(t,e,m,i,w,p,S,"left"),b-=m.width,S+=m.width,M++;for(;0<=T&&"right"===(m=_[T]).textAlign;)Gn(t,e,m,i,w,p,I,"right"),b-=m.width,I-=m.width,T--;for(S+=(a-(S-f)-(g-I)-b)/2;M<=T;)m=_[M],Gn(t,e,m,i,w,p,S+m.width/2,"center"),S+=m.width,M++;p+=w}}(t,e,a,i,r)}:function(t,e,n,i,r,a){var o,s=qn(i),l=!1,h=e.__attrCachedBy===Ke.PLAIN_TEXT;a!==Je?(a&&(o=a.style,l=!s&&h&&o),e.__attrCachedBy=s?Ke.NONE:Ke.PLAIN_TEXT):h&&(e.__attrCachedBy=Ke.NONE);var u=i.font||Nn;l&&u===(o.font||Nn)||(e.font=u);var c=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,c=t.__computedFont=e.font);var d=i.textPadding,f=i.textLineHeight,p=t.__textCotentBlock;p&&!t.__dirtyText||(p=t.__textCotentBlock=Ln(n,c,d,f,i.truncate));var a=p.outerHeight,g=p.lines,m=p.lineHeight,h=Un(0,i,r),u=h.baseX,f=h.baseY,p=h.textAlign||"left",h=h.textVerticalAlign;Hn(e,i,r,u,f);var h=Tn(f,a,h),v=u,y=h;(s||d)&&(n=Mn(n,c),d&&(n+=d[1]+d[3]),c=In(u,n,p),s&&Xn(t,e,i,c,h,n,a),d&&(v=Kn(u,p,d),y+=d[0]));e.textAlign=p,e.textBaseline="middle",e.globalAlpha=i.opacity||1;for(var _=0;_<zn.length;_++){var x=zn[_],w=x[0],b=x[1],M=i[w];l&&M===o[w]||(e[b]=Qe(e,b,M||x[2]))}y+=m/2;var u=i.textStrokeWidth,d=l?o.textStrokeWidth:null,p=!l||u!==d,d=!l||p||i.textStroke!==o.textStroke,S=Zn(i.textStroke,u),I=$n(i.textFill);S&&(p&&(e.lineWidth=u),d&&(e.strokeStyle=S));I&&(l&&i.textFill===o.textFill||(e.fillStyle=I));if(1===g.length)S&&e.strokeText(g[0],v,y),I&&e.fillText(g[0],v,y);else for(_=0;_<g.length;_++)S&&e.strokeText(g[_],v,y),I&&e.fillText(g[_],v,y),y+=m})(t,e,n,i,r,a)}function Hn(t,e,n,i,r){var a;n&&e.textRotation&&("center"===(a=e.textOrigin)?(i=n.width/2+n.x,r=n.height/2+n.y):a&&(i=a[0]+n.x,r=a[1]+n.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r))}function Gn(t,e,n,i,r,a,o,s){var l=i.rich[n.styleName]||{};l.text=n.text;var h=n.textVerticalAlign,u=a+r/2;"top"===h?u=a+n.height/2:"bottom"===h&&(u=a+r-n.height/2),!n.isLineHolder&&qn(l)&&Xn(t,e,l,"right"===s?o-n.width:"center"===s?o-n.width/2:o,u-n.height/2,n.width,n.height);t=n.textPadding;t&&(o=Kn(o,s,t),u-=n.height/2-t[2]-n.textHeight/2),jn(e,"shadowBlur",V(l.textShadowBlur,i.textShadowBlur,0)),jn(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),jn(e,"shadowOffsetX",V(l.textShadowOffsetX,i.textShadowOffsetX,0)),jn(e,"shadowOffsetY",V(l.textShadowOffsetY,i.textShadowOffsetY,0)),jn(e,"textAlign",s),jn(e,"textBaseline","middle"),jn(e,"font",n.font||Nn);t=Zn(l.textStroke||i.textStroke,void 0),s=$n(l.textFill||i.textFill),i=F(l.textStrokeWidth,i.textStrokeWidth);t&&(jn(e,"lineWidth",i),jn(e,"strokeStyle",t),e.strokeText(n.text,o,u)),s&&(jn(e,"fillStyle",s),e.fillText(n.text,o,u))}function qn(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Xn(t,e,n,i,r,a,o){var s,l,h,u=n.textBackgroundColor,c=n.textBorderWidth,d=n.textBorderColor,f=L(u);jn(e,"shadowBlur",n.textBoxShadowBlur||0),jn(e,"shadowColor",n.textBoxShadowColor||"transparent"),jn(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),jn(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),(f||c&&d)&&(e.beginPath(),(s=n.textBorderRadius)?En(e,{x:i,y:r,width:a,height:o,r:s}):e.rect(i,r,a,o),e.closePath()),f?(jn(e,"fillStyle",u),null!=n.fillOpacity?(h=e.globalAlpha,e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=h):e.fill()):O(u)&&(l=pn(l=u.image,null,t,Yn,u))&&mn(l)&&e.drawImage(l,i,r,a,o),c&&d&&(jn(e,"lineWidth",c),jn(e,"strokeStyle",d),null!=n.strokeOpacity?(h=e.globalAlpha,e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=h):e.stroke())}function Yn(t,e){e.image=t}function Un(t,e,n){var i,r=e.x||0,a=e.y||0,o=e.textAlign,s=e.textVerticalAlign;return n&&((i=e.textPosition)instanceof Array?(r=n.x+Qn(i[0],n.width),a=n.y+Qn(i[1],n.height)):(r=(n=function(t,e,n){var i=e.x,r=e.y,a=e.height,o=e.width,s=a/2,l="left",h="top";switch(t){case"left":i-=n,r+=s,l="right",h="middle";break;case"right":i+=n+o,r+=s,h="middle";break;case"top":i+=o/2,r-=n,l="center",h="bottom";break;case"bottom":i+=o/2,r+=a+n,l="center";break;case"inside":i+=o/2,r+=s,l="center",h="middle";break;case"insideLeft":i+=n,r+=s,h="middle";break;case"insideRight":i+=o-n,r+=s,l="right",h="middle";break;case"insideTop":i+=o/2,r+=n,l="center";break;case"insideBottom":i+=o/2,r+=a-n,l="center",h="bottom";break;case"insideTopLeft":i+=n,r+=n;break;case"insideTopRight":i+=o-n,r+=n,l="right";break;case"insideBottomLeft":i+=n,r+=a-n,h="bottom";break;case"insideBottomRight":i+=o-n,r+=a-n,l="right",h="bottom"}return{x:i,y:r,textAlign:l,textVerticalAlign:h}}(i,n,e.textDistance)).x,a=n.y,o=o||n.textAlign,s=s||n.textVerticalAlign),(e=e.textOffset)&&(r+=e[0],a+=e[1])),{baseX:r,baseY:a,textAlign:o,textVerticalAlign:s}}function jn(t,e,n){return t[e]=Qe(t,e,n),t[e]}function Zn(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function $n(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Qn(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function Kn(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function Jn(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}var ti=new ze,ei=function(){};function ni(t){for(var e in Ae.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new en(t.style,this),this._rect=null,this.__clipPaths=[]}function ii(t){ni.call(this,t)}ei.prototype={constructor:ei,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Fn(n);var i,r=n.text;null!=r&&(r+=""),Jn(r,n)&&(t.save(),i=this.transform,n.transformText?this.setTransform(t):i&&(ti.copy(e),ti.applyTransform(i),e=ti),Wn(this,t,r,n,e,Je),t.restore())}},ni.prototype={constructor:ni,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){e=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(e[0],e[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?Ae.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new en(t,this),this.dirty(!1),this}},y(ni,Ae),_(ni,ei),ii.prototype={constructor:ii,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var r,a,o,s,l,h=this._image=pn(i,this._image,this,this.onload);h&&mn(h)&&(r=n.x||0,a=n.y||0,o=n.width,e=n.height,i=h.width/h.height,null==o&&null!=e?o=e*i:null==e&&null!=o?e=o/i:null==o&&null==e&&(o=h.width,e=h.height),this.setTransform(t),n.sWidth&&n.sHeight?(s=n.sx||0,l=n.sy||0,t.drawImage(h,s,l,n.sWidth,n.sHeight,r,a,o,e)):n.sx&&n.sy?(s=n.sx,l=n.sy,t.drawImage(h,s,l,o-s,e-l,r,a,o,e)):t.drawImage(h,r,a,o,e),null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect())))},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new ze(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},y(ii,ni);var ri=314159;function ai(t){return parseInt(t,10)}var oi=new ze(0,0,0,0),si=new ze(0,0,0,0);var li=function(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=C({},n||{}),this.dpr=n.devicePixelRatio||Se,this._singleCanvas=i;var r=(this.root=t).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var a,r=this._zlevelList=[],e=this._layers={};this._layerConfig={},this._needsManuallyCompositing=!1,i?(i=t.width,a=t.height,null!=n.width&&(i=n.width),null!=n.height&&(a=n.height),this.dpr=n.devicePixelRatio||1,t.width=i*this.dpr,t.height=a*this.dpr,this._width=i,this._height=a,(a=new cn(t,this,this.dpr)).__builtin__=!0,a.initContext(),(e[ri]=a).zlevel=ri,r.push(ri),this._domRoot=t):(this._width=this._getSize(0),this._height=this._getSize(1),r=this._domRoot=(e=this._width,a=this._height,(r=document.createElement("div")).style.cssText=["position:relative","overflow:hidden","width:"+e+"px","height:"+a+"px","padding:0","margin:0","border-width:0"].join(";")+";",r),t.appendChild(r)),this._hoverlayer=null,this._hoverElements=[]};li.prototype={constructor:li,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var r=n[i],a=this._layers[r];!a.__builtin__&&a.refresh&&(r=0===i?this._backgroundColor:null,a.refresh(r))}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return(n.__from=t).__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,e=m(n,e);0<=e&&n.splice(e,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length;if((n=this._hoverlayer)&&n.clear(),e){Ue(t,this.storage.displayableSortFunc);var n,i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var r=0;r<e;){var a=t[r],o=a.__from;o&&o.__zr?(r++,o.invisible||(a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,n,!0,i))):(t.splice(r,1),o.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){var i,r;this._redrawId===n&&(e=e||!1,this._updateLayerStatus(t),i=this._doPaintList(t,e),this._needsManuallyCompositing&&this._compositeManually(),i||(r=this,dn(function(){r._paintList(t,e,n)})))},_compositeManually:function(){var e=this.getLayer(ri).ctx,n=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,n,i),this.eachBuiltinLayer(function(t){t.virtual&&e.drawImage(t.dom,0,0,n,i)})},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];(s=this._layers[r]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s)}for(var a=!0,o=0;o<n.length;o++){var s,l=(s=n[o]).ctx,h={};l.save();var u,c=e?s.__startIndex:s.__drawIndex,d=!e&&s.incremental&&Date.now,f=d&&Date.now(),p=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;s.__startIndex===s.__endIndex?s.clear(!1,p):c===s.__startIndex&&((u=t[c]).incremental&&u.notClear&&!e||s.clear(!1,p)),-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=s.__startIndex);for(var g=c;g<s.__endIndex;g++){var m=t[g];if(this._doPaintEl(m,s,e,h),m.__dirty=m.__dirtyText=!1,d)if(15<Date.now()-f)break}s.__drawIndex=g,s.__drawIndex<s.__endIndex&&(a=!1),h.prevElClipPaths&&l.restore(),l.restore()}return v.wxa&&D(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),a},_doPaintEl:function(t,e,n,i){var r,a=e.ctx,o=t.transform;!e.__dirty&&!n||t.invisible||0===t.style.opacity||o&&!o[0]&&!o[3]||t.culling&&(n=t,o=this._width,r=this._height,oi.copy(n.getBoundingRect()),n.transform&&oi.applyTransform(n.transform),si.width=o,si.height=r,!oi.intersect(si))||(r=t.__clipPaths,i.prevElClipPaths&&!function(t,e){if(t!==e){if(!t||!e||t.length!==e.length)return 1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return 1}}(r,i.prevElClipPaths)||(i.prevElClipPaths&&(e.ctx.restore(),i.prevElClipPaths=null,i.prevEl=null),r&&(a.save(),function(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(r,a),i.prevElClipPaths=r)),t.beforeBrush&&t.beforeBrush(a),t.brush(a,i.prevEl||null),(i.prevEl=t).afterBrush&&t.afterBrush(a))},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=ri);var n=this._layers[t];return n||((n=new cn("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&f(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n,i=this._layers,r=this._zlevelList,a=r.length,o=null,s=-1,l=this._domRoot;if(i[t])Ce("ZLevel "+t+" has been used already");else if((n=e)&&(n.__builtin__||"function"==typeof n.resize&&"function"==typeof n.refresh)){if(0<a&&t>r[0]){for(s=0;s<a-1&&!(r[s]<t&&r[s+1]>t);s++);o=i[r[s]]}r.splice(s+1,0,t),(i[t]=e).virtual||(o?(o=o.dom).nextSibling?l.insertBefore(e.dom,o.nextSibling):l.appendChild(e.dom):l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom))}else Ce("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){for(var n,i=this._zlevelList,r=0;r<i.length;r++)n=i[r],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){for(var n,i,r=this._zlevelList,a=0;a<r.length;a++)i=r[a],(n=this._layers[i]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){for(var n,i,r=this._zlevelList,a=0;a<r.length;a++)i=r[a],(n=this._layers[i]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){i&&(i.__endIndex!==t&&(i.__dirty=!0),i.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++)if((a=t[n]).zlevel!==t[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}for(var i=null,r=0,n=0;n<t.length;n++){var a,o,s=(a=t[n]).zlevel;a.incremental?((o=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,r=1):o=this.getLayer(s+(0<r?.01:0),this._needsManuallyCompositing),o.__builtin__||Ce("ZLevel "+s+" has been used by unkown layer "+o.id),o!==i&&(o.__used=!0,o.__startIndex!==n&&(o.__dirty=!0),o.__startIndex=n,o.incremental?o.__drawIndex=-1:o.__drawIndex=n,e(n),i=o),a.__dirty&&(o.__dirty=!0,o.incremental&&o.__drawIndex<0&&(o.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(t,e){!t.__used&&0<t.getElementCount()&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?f(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];r!==t&&r!==t+.01||f(this._layers[r],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(m(n,t),1))},resize:function(e,n){if(this._domRoot.style){var t=this._domRoot;t.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=n&&(i.height=n),e=this._getSize(0),n=this._getSize(1),t.style.display="",this._width!==e||n!==this._height){for(var r in t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,n);D(this._progressiveLayers,function(t){t.resize(e,n)}),this.refresh(!0)}this._width=e,this._height=n}else{if(null==e||null==n)return;this._width=e,this._height=n,this.getLayer(ri).resize(e,n)}return this},clearLayer:function(t){t=this._layers[t];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[ri].dom;var e=new cn("image",this,(t=t||{}).pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,r=e.ctx;this.eachLayer(function(t){t.__builtin__?r.drawImage(t.dom,0,0,n,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var a={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,e,!0,a)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);t=this.root,e=document.defaultView.getComputedStyle(t);return(t[i]||ai(e[n])||ai(t.style[n]))-(ai(e[r])||0)-(ai(e[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),a=t.style,o=a.shadowBlur*e,s=a.shadowOffsetX*e,l=a.shadowOffsetY*e,h=a.hasStroke()?a.lineWidth:0,u=Math.max(h/2,o-s),a=Math.max(h/2,s+o),s=Math.max(h/2,o-l),o=Math.max(h/2,l+o),a=r.width+u+a,o=r.height+s+o;n.width=a*e,n.height=o*e,i.scale(e,e),i.clearRect(0,0,a,o),i.dpr=e;e={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[u-r.x,s-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);n=new ii({style:{x:0,y:0,image:n}});return null!=e.position&&(n.position=t.position=e.position),null!=e.rotation&&(n.rotation=t.rotation=e.rotation),null!=e.scale&&(n.scale=t.scale=e.scale),n}};function hi(t){this.stage=(t=t||{}).stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,ft.call(this)}hi.prototype={constructor:hi,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){t=m(this._clips,t);0<=t&&this._clips.splice(t,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,r=[],a=[],o=0;o<i;o++){var s=n[o],l=s.step(t,e);l&&(r.push(l),a.push(s))}for(o=0;o<i;)n[o]._needsRemove?(n[o]=n[i-1],n.pop(),i--):o++;for(i=r.length,o=0;o<i;o++)a[o].fire(r[o]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,dn(function t(){e._running&&(dn(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=new be(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(e),e}},_(hi,ft);var ui=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],ci=["touchstart","touchend","touchmove"],di={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},fi=b(ui,function(t){var e=t.replace("mouse","pointer");return di[e]?e:t});function pi(t){return"mousewheel"===t&&v.browser.firefox?"DOMMouseScroll":t}function gi(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}var mi={mousemove:function(t){t=_t(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=_t(this.dom,t)).toElement||t.relatedTarget;if(e!==this.dom)for(;e&&9!==e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=_t(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,this.handler.processGesture(this,t,"start"),mi.mousemove.call(this,t),mi.mousedown.call(this,t),gi(this)},touchmove:function(t){(t=_t(this.dom,t)).zrByTouch=!0,this.handler.processGesture(this,t,"change"),mi.mousemove.call(this,t),gi(this)},touchend:function(t){(t=_t(this.dom,t)).zrByTouch=!0,this.handler.processGesture(this,t,"end"),mi.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&mi.click.call(this,t),gi(this)},pointerdown:function(t){mi.mousedown.call(this,t)},pointermove:function(t){vi(t)||mi.mousemove.call(this,t)},pointerup:function(t){mi.mouseup.call(this,t)},pointerout:function(t){vi(t)||mi.mouseout.call(this,t)}};function vi(t){t=t.pointerType;return"pen"===t||"touch"===t}function yi(i){D(ci,function(t){i._handlers[t]=w(mi[t],i)}),D(fi,function(t){i._handlers[t]=w(mi[t],i)}),D(ui,function(t){var e,n;i._handlers[t]=(e=mi[t],n=i,function(){if(!n._touching)return e.apply(n,arguments)})})}function _i(r){function t(t,i){D(t,function(t){var e,n;e=r,n=pi(t),t=i._handlers[t],gt?e.addEventListener(n,t):e.attachEvent("on"+n,t)},i)}ft.call(this),this.dom=r,this._touching=!1,this._touchTimer,this._handlers={},yi(this),v.pointerEventsSupported?t(fi,this):(v.touchEventsSupported&&t(ci,this),t(ui,this))}D(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){mi[e]=function(t){t=_t(this.dom,t),this.trigger(e,t)}});i=_i.prototype;i.dispose=function(){for(var t,e,n=ui.concat(ci),i=0;i<n.length;i++){var r=n[i];t=this.dom,e=pi(r),r=this._handlers[r],gt?t.removeEventListener(e,r):t.detachEvent("on"+e,r)}},i.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},_(_i,ft);var xi=!v.canvasSupported,wi={canvas:li};function bi(t,e){return new Mi(n(),t,e)}var Mi=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new Ze,a=n.renderer;if(xi){if(!wi.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&wi[a]||(a="canvas");n=new wi[a](e,r,n,t);this.storage=r,this.painter=n;t=v.node||v.worker?null:new _i(n.getViewportRoot());this.handler=new Ct(r,n,t,n.root),this.animation=new hi({stage:{update:w(this.flush,this)}}),this.animation.start(),this._needsRefresh;var o=r.delFromStorage,s=r.addToStorage;r.delFromStorage=function(t){o.call(r,t),t&&t.removeSelfFromZr(i)},r.addToStorage=function(t){s.call(r,t),t.addSelfToZr(i)}};Mi.prototype={constructor:Mi,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){e=this.painter.addHover(t,e);return this.refreshHover(),e}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null}};var Si=D,Ii=O,Ti=A,Ci="series\0";function ki(t){return t instanceof Array?t:null==t?[]:[t]}function Di(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var a=n[i];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var Ai=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Li(t){return!Ii(t)||Ti(t)||t instanceof Date?t:t.value}function Pi(t,r){r=(r||[]).slice();var a=b(t||[],function(t,e){return{exist:t}});return Si(r,function(t,e){if(Ii(t)){for(var n=0;n<a.length;n++)if(!a[n].option&&null!=t.id&&a[n].exist.id===t.id+"")return a[n].option=t,void(r[e]=null);for(n=0;n<a.length;n++){var i=a[n].exist;if(!(a[n].option||null!=i.id&&null!=t.id||null==t.name||Ei(t)||Ei(i)||i.name!==t.name+""))return a[n].option=t,void(r[e]=null)}}}),Si(r,function(t,e){if(Ii(t)){for(var n=0;n<a.length;n++){var i=a[n].exist;if(!a[n].option&&!Ei(i)&&null==t.id){a[n].option=t;break}}n>=a.length&&a.push({option:t})}}),a}function Oi(t){t=t.name;return t&&t.indexOf(Ci)}function Ei(t){return Ii(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function Ni(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?A(t.dataIndex)?b(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?A(t.name)?b(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0}function Bi(){var e="__\0ec_inner_"+Ri+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var Ri=0;function zi(a,o,s){L(o)&&((t={})[o+"Index"]=0,o=t);var t=s&&s.defaultMainType;!t||Fi(o,t+"Index")||Fi(o,t+"Id")||Fi(o,t+"Name")||(o[t+"Index"]=0);var l={};return Si(o,function(t,e){var n,i,r,t=o[e];"dataIndex"!==e&&"dataIndexInside"!==e?(n=(r=e.match(/^(\w+)(Index|Id|Name)$/)||[])[1],i=(r[2]||"").toLowerCase(),!n||!i||null==t||"index"===i&&"none"===t||s&&s.includeMainTypes&&m(s.includeMainTypes,n)<0||(r={mainType:n},"index"===i&&"all"===t||(r[i]=t),r=a.queryComponents(r),l[n+"Models"]=r,l[n+"Model"]=r[0])):l[e]=t}),l}function Fi(t,e){return t&&t.hasOwnProperty(e)}function Vi(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}var Wi=".",Hi="___EC__COMPONENT__CONTAINER___";function Gi(t){var e={main:"",sub:""};return t&&(t=t.split(Wi),e.main=t[0]||"",e.sub=t[1]||""),e}function qi(t){(t.$constructor=t).extend=function(t){function e(){(t.$constructor||n).apply(this,arguments)}var n=this;return C(e.prototype,t),e.extend=this.extend,e.superCall=Ui,e.superApply=ji,y(e,this),e.superClass=n,e}}var Xi=0;function Yi(t){var e=["__\0is_clz",Xi++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function Ui(t,e){var n=W(arguments,2);return this.superClass.prototype[e].apply(t,n)}function ji(t,e,n){return this.superClass.prototype[e].apply(t,n)}function Zi(n,t){t=t||{};var i,r={};return n.registerClass=function(t,e){var n;return e&&(n=e,G(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal'),(e=Gi(e)).sub?e.sub!==Hi&&(function(t){var e=r[t.main];e&&e[Hi]||((e=r[t.main]={})[Hi]=!0);return e}(e)[e.sub]=t):r[e.main]=t),t},n.getClass=function(t,e,n){var i=r[t];if(i&&i[Hi]&&(i=e?i[e]:null),n&&!i)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return i},n.getClassesByMainType=function(t){t=Gi(t);var n=[],t=r[t.main];return t&&t[Hi]?D(t,function(t,e){e!==Hi&&n.push(t)}):n.push(t),n},n.hasClass=function(t){return t=Gi(t),!!r[t.main]},n.getAllClassMainTypes=function(){var n=[];return D(r,function(t,e){n.push(e)}),n},n.hasSubTypes=function(t){t=Gi(t);t=r[t.main];return t&&t[Hi]},n.parseClassType=Gi,!t.registerWhenExtend||(i=n.extend)&&(n.extend=function(t){var e=i.call(this,t);return n.registerClass(e,t.type)}),n}var Vt=function(o){for(var t=0;t<o.length;t++)o[t][1]||(o[t][1]=o[t][0]);return function(t,e,n){for(var i={},r=0;r<o.length;r++){var a=o[r][1];e&&0<=m(e,a)||n&&m(n,a)<0||null!=(a=t.getShallow(a))&&(i[o[r][0]]=a)}return i}},$i=Vt([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Ut={getLineStyle:function(t){var e=$i(this,t),t=this.getLineDash(e.lineWidth);return t&&(e.lineDash=t),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),t=4*t;return"solid"===e||null==e?null:"dashed"===e?[t,t]:[n,n]}},Qi=Vt([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),$t={getAreaStyle:function(t,e){return Qi(this,t,e)}},Ki=Math.pow,Ji=Math.sqrt,tr=1e-8,er=1e-4,nr=Ji(3),ir=1/3,rr=K(),ar=K(),or=K();function sr(t){return-tr<t&&t<tr}function lr(t){return tr<t||t<-tr}function hr(t,e,n,i,r){var a=1-r;return a*a*(a*t+3*r*e)+r*r*(r*i+3*a*n)}function ur(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)}function cr(t,e,n,i,r){var a,o=6*n-12*e+6*t,i=9*e+3*i-3*t-9*n,n=3*e-3*t,e=0;return sr(i)?lr(o)&&0<=(a=-n/o)&&a<=1&&(r[e++]=a):sr(t=o*o-4*i*n)?r[0]=-o/(2*i):0<t&&(t=(-o-(n=Ji(t)))/(2*i),0<=(a=(-o+n)/(2*i))&&a<=1&&(r[e++]=a),0<=t&&t<=1&&(r[e++]=t)),e}function dr(t,e,n,i,r,a){var o=(e-t)*r+t,s=(n-e)*r+e,e=(i-n)*r+n,n=(s-o)*r+o,s=(e-s)*r+s,r=(s-n)*r+n;a[0]=t,a[1]=o,a[2]=n,a[3]=r,a[4]=r,a[5]=s,a[6]=e,a[7]=i}function fr(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function pr(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function gr(t,e,n){n=t+n-2*e;return 0==n?.5:(t-e)/n}function mr(t,e,n,i,r){var a=(e-t)*i+t,e=(n-e)*i+e,i=(e-a)*i+a;r[0]=t,r[1]=a,r[2]=i,r[3]=i,r[4]=e,r[5]=n}var vr=Math.min,yr=Math.max,_r=Math.sin,xr=Math.cos,wr=2*Math.PI,br=K(),Mr=K(),Sr=K();function Ir(t,e,n,i,r,a){r[0]=vr(t,n),r[1]=vr(e,i),a[0]=yr(t,n),a[1]=yr(e,i)}var Tr=[],Cr=[];var kr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Dr=[],Ar=[],Lr=[],Pr=[],Or=Math.min,Er=Math.max,Nr=Math.cos,Br=Math.sin,Rr=Math.sqrt,zr=Math.abs,Fr="undefined"!=typeof Float32Array,Vr=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};function Wr(t,e,n,i,r,a,o){if(0!==r){var s=r,r=0;if(!(e+s<o&&i+s<o||o<e-s&&o<i-s||t+s<a&&n+s<a||a<t-s&&a<n-s)){if(t===n)return Math.abs(a-t)<=s/2;n=(r=(e-i)/(t-n))*a-o+(t*i-n*e)/(t-n);return n*n/(r*r+1)<=s/2*s/2}}}function Hr(t,e,n,i,r,a,o,s,l,h,u){if(0!==l){l=l;return e+l<u&&i+l<u&&a+l<u&&s+l<u||u<e-l&&u<i-l&&u<a-l&&u<s-l||t+l<h&&n+l<h&&r+l<h&&o+l<h||h<t-l&&h<n-l&&h<r-l&&h<o-l?void 0:function(t,e,n,i,r,a,o,s,l,h,u){var c,d,f,p,g=.005,m=1/0;rr[0]=l,rr[1]=h;for(var v=0;v<1;v+=.05)ar[0]=hr(t,n,r,o,v),ar[1]=hr(e,i,a,s,v),(f=ot(rr,ar))<m&&(c=v,m=f);for(var m=1/0,y=0;y<32&&!(g<er);y++)d=c+g,ar[0]=hr(t,n,r,o,p=c-g),ar[1]=hr(e,i,a,s,p),f=ot(ar,rr),0<=p&&f<m?(c=p,m=f):(or[0]=hr(t,n,r,o,d),or[1]=hr(e,i,a,s,d),p=ot(or,rr),d<=1&&p<m?(c=d,m=p):g*=.5);return u&&(u[0]=hr(t,n,r,o,c),u[1]=hr(e,i,a,s,c)),Ji(m)}(t,e,n,i,r,a,o,s,h,u,null)<=l/2}}function Gr(t,e,n,i,r,a,o,s,l){if(0!==o){o=o;return e+o<l&&i+o<l&&a+o<l||l<e-o&&l<i-o&&l<a-o||t+o<s&&n+o<s&&r+o<s||s<t-o&&s<n-o&&s<r-o?void 0:function(t,e,n,i,r,a,o,s,l){var h,u=.005,c=1/0;rr[0]=o,rr[1]=s;for(var d=0;d<1;d+=.05)ar[0]=fr(t,n,r,d),ar[1]=fr(e,i,a,d),(m=ot(rr,ar))<c&&(h=d,c=m);for(var c=1/0,f=0;f<32&&!(u<er);f++){var p=h-u,g=h+u;ar[0]=fr(t,n,r,p),ar[1]=fr(e,i,a,p);var m=ot(ar,rr);0<=p&&m<c?(h=p,c=m):(or[0]=fr(t,n,r,g),or[1]=fr(e,i,a,g),p=ot(or,rr),g<=1&&p<c?(h=g,c=p):u*=.5)}return l&&(l[0]=fr(t,n,r,h),l[1]=fr(e,i,a,h)),Ji(c)}(t,e,n,i,r,a,s,l,null)<=o/2}}Vr.prototype={constructor:Vr,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=zr(1/Se/t)||0,this._uy=zr(1/Se/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(kr.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=zr(t-this._xi)>this._ux||zr(e-this._yi)>this._uy||this._len<5;return this.addData(kr.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,r,a){return this.addData(kr.C,t,e,n,i,r,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,a):this._ctx.bezierCurveTo(t,e,n,i,r,a)),this._xi=r,this._yi=a,this},quadraticCurveTo:function(t,e,n,i){return this.addData(kr.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,a){return this.addData(kr.A,t,e,n,n,i,r-i,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,a),this._xi=Nr(r)*n+t,this._yi=Br(r)*n+e,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(kr.R,t,e,n,i),this},closePath:function(){this.addData(kr.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!Fr||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){for(var e=(t=!(t instanceof Array)?[t]:t).length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();Fr&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(r=0;r<e;r++)for(var a=t[r].data,o=0;o<a.length;o++)this.data[i++]=a[o];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,l=this._xi,h=this._yi,u=t-l,c=e-h,d=Rr(u*u+c*c),f=l,p=h,g=o.length;for(a<0&&(a=r+a),f-=(a%=r)*(u/=d),p-=a*(c/=d);0<u&&f<=t||u<0&&t<=f||0===u&&(0<c&&p<=e||c<0&&e<=p);)f+=u*(n=o[i=this._dashIdx]),p+=c*n,this._dashIdx=(i+1)%g,0<u&&f<l||u<0&&l<f||0<c&&p<h||c<0&&h<p||s[i%2?"moveTo":"lineTo"]((0<=u?Or:Er)(f,t),(0<=c?Or:Er)(p,e));this._dashOffset=-Rr((u=f-t)*u+(c=p-e)*c)},_dashedBezierTo:function(t,e,n,i,r,a){var o,s,l,h,u,c=this._dashSum,d=this._dashOffset,f=this._lineDash,p=this._ctx,g=this._xi,m=this._yi,v=hr,y=0,_=this._dashIdx,x=f.length,w=0;for(d<0&&(d=c+d),d%=c,o=0;o<1;o+=.1)s=v(g,t,n,r,o+.1)-v(g,t,n,r,o),l=v(m,e,i,a,o+.1)-v(m,e,i,a,o),y+=Rr(s*s+l*l);for(;_<x&&!(d<(w+=f[_]));_++);for(o=(w-d)/y;o<=1;)h=v(g,t,n,r,o),u=v(m,e,i,a,o),_%2?p.moveTo(h,u):p.lineTo(h,u),o+=f[_]/y,_=(_+1)%x;_%2!=0&&p.lineTo(r,a),this._dashOffset=-Rr((s=r-h)*s+(l=a-u)*l)},_dashedQuadraticTo:function(t,e,n,i){var r=n,a=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,Fr&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Dr[0]=Dr[1]=Lr[0]=Lr[1]=Number.MAX_VALUE,Ar[0]=Ar[1]=Pr[0]=Pr[1]=-Number.MAX_VALUE;for(var t,e,n,i,r=this.data,a=0,o=0,s=0,l=0,h=0;h<r.length;){var u=r[h++];switch(1===h&&(s=a=r[h],l=o=r[h+1]),u){case kr.M:a=s=r[h++],o=l=r[h++],Lr[0]=s,Lr[1]=l,Pr[0]=s,Pr[1]=l;break;case kr.L:Ir(a,o,r[h],r[h+1],Lr,Pr),a=r[h++],o=r[h++];break;case kr.C:!function(t,e,n,i,r,a,o,s,l,h){var u,c=cr,d=hr,f=c(t,n,r,o,Tr);for(l[0]=1/0,l[1]=1/0,h[0]=-1/0,h[1]=-1/0,u=0;u<f;u++){var p=d(t,n,r,o,Tr[u]);l[0]=vr(p,l[0]),h[0]=yr(p,h[0])}for(f=c(e,i,a,s,Cr),u=0;u<f;u++){var g=d(e,i,a,s,Cr[u]);l[1]=vr(g,l[1]),h[1]=yr(g,h[1])}l[0]=vr(t,l[0]),h[0]=yr(t,h[0]),l[0]=vr(o,l[0]),h[0]=yr(o,h[0]),l[1]=vr(e,l[1]),h[1]=yr(e,h[1]),l[1]=vr(s,l[1]),h[1]=yr(s,h[1])}(a,o,r[h++],r[h++],r[h++],r[h++],r[h],r[h+1],Lr,Pr),a=r[h++],o=r[h++];break;case kr.Q:c=a,g=o,t=r[h++],e=r[h++],d=r[h],m=r[h+1],n=Lr,p=Pr,v=f=v=f=i=void 0,i=fr,f=yr(vr((v=gr)(c,t,d),1),0),v=yr(vr(v(g,e,m),1),0),f=i(c,t,d,f),v=i(g,e,m,v),n[0]=vr(c,d,f),n[1]=vr(g,m,v),p[0]=yr(c,d,f),p[1]=yr(g,m,v),a=r[h++],o=r[h++];break;case kr.A:var c=r[h++],d=r[h++],f=r[h++],p=r[h++],g=r[h++],m=r[h++]+g;h+=1;var v=1-r[h++];1===h&&(s=Nr(g)*f+c,l=Br(g)*p+d),function(t,e,n,i,r,a,o,s,l){var h=lt,u=ht,c=Math.abs(r-a);if(c%wr<1e-4&&1e-4<c)return s[0]=t-n,s[1]=e-i,l[0]=t+n,l[1]=e+i;br[0]=xr(r)*n+t,br[1]=_r(r)*i+e,Mr[0]=xr(a)*n+t,Mr[1]=_r(a)*i+e,h(s,br,Mr),u(l,br,Mr),(r%=wr)<0&&(r+=wr),(a%=wr)<0&&(a+=wr),a<r&&!o?a+=wr:r<a&&o&&(r+=wr),o&&(o=a,a=r,r=o);for(var d=0;d<a;d+=Math.PI/2)r<d&&(Sr[0]=xr(d)*n+t,Sr[1]=_r(d)*i+e,h(s,Sr,s),u(l,Sr,l))}(c,d,f,p,g,m,v,Lr,Pr),a=Nr(m)*f+c,o=Br(m)*p+d;break;case kr.R:Ir(s=a=r[h++],l=o=r[h++],s+r[h++],l+r[h++],Lr,Pr);break;case kr.Z:a=s,o=l}lt(Dr,Dr,Lr),ht(Ar,Ar,Pr)}return 0===h&&(Dr[0]=Dr[1]=Ar[0]=Ar[1]=0),new ze(Dr[0],Dr[1],Ar[0]-Dr[0],Ar[1]-Dr[1])},rebuildPath:function(t){for(var e,n,i,r,a=this.data,o=this._ux,s=this._uy,l=this._len,h=0;h<l;){var u=a[h++];switch(1===h&&(e=i=a[h],n=r=a[h+1]),u){case kr.M:e=i=a[h++],n=r=a[h++],t.moveTo(i,r);break;case kr.L:x=a[h++],w=a[h++],(zr(x-i)>o||zr(w-r)>s||h===l-1)&&(t.lineTo(x,w),i=x,r=w);break;case kr.C:t.bezierCurveTo(a[h++],a[h++],a[h++],a[h++],a[h++],a[h++]),i=a[h-2],r=a[h-1];break;case kr.Q:t.quadraticCurveTo(a[h++],a[h++],a[h++],a[h++]),i=a[h-2],r=a[h-1];break;case kr.A:var c=a[h++],d=a[h++],f=a[h++],p=a[h++],g=a[h++],m=a[h++],v=a[h++],y=a[h++],_=p<f?f:p,x=p<f?1:f/p,w=p<f?p/f:1,m=g+m;.001<Math.abs(f-p)?(t.translate(c,d),t.rotate(v),t.scale(x,w),t.arc(0,0,_,g,m,1-y),t.scale(1/x,1/w),t.rotate(-v),t.translate(-c,-d)):t.arc(c,d,_,g,m,1-y),1===h&&(e=Nr(g)*f+c,n=Br(g)*p+d),i=Nr(m)*f+c,r=Br(m)*p+d;break;case kr.R:e=i=a[h],n=r=a[h+1],t.rect(a[h++],a[h++],a[h++],a[h++]);break;case kr.Z:t.closePath(),i=e,r=n}}}},Vr.CMD=kr;var qr=2*Math.PI;function Xr(t){return(t%=qr)<0&&(t+=qr),t}var Yr=2*Math.PI;function Ur(t,e,n,i,r,a){if(e<a&&i<a||a<e&&a<i)return 0;if(i===e)return 0;var o=i<e?1:-1,a=(a-e)/(i-e);1!=a&&0!=a||(o=i<e?.5:-.5);t=a*(n-t)+t;return t===r?1/0:r<t?o:0}var jr=Vr.CMD,Zr=2*Math.PI,$r=1e-4;var Qr=[-1,-1,-1],Kr=[-1,-1];function Jr(t,e,n,i,r,a,o,s,l,h){if(e<h&&i<h&&a<h&&s<h||h<e&&h<i&&h<a&&h<s)return 0;var u,c,d,f,p,g,m,v,y,_,x=(p=Qr,y=(f=s)+3*((c=i)-(d=a))-(u=e),u=(_=3*(d-2*c+u))*(f=3*(c-u))-9*y*(d=u-(h=h)),h=f*f-3*_*d,d=0,sr(c=_*_-3*y*f)&&sr(u)?sr(_)?p[0]=0:0<=(m=-f/_)&&m<=1&&(p[d++]=m):sr(f=u*u-4*c*h)?(v=-(h=u/c)/2,0<=(m=-_/y+h)&&m<=1&&(p[d++]=m),0<=v&&v<=1&&(p[d++]=v)):0<f?(g=c*_+1.5*y*(-u-(f=Ji(f))),0<=(m=(-_-((f=(f=c*_+1.5*y*(-u+f))<0?-Ki(-f,ir):Ki(f,ir))+(g=g<0?-Ki(-g,ir):Ki(g,ir))))/(3*y))&&m<=1&&(p[d++]=m)):(g=(2*c*_-3*y*u)/(2*Ji(c*c*c)),u=Math.acos(g)/3,m=(-_-2*(g=Ji(c))*(c=Math.cos(u)))/(3*y),v=(-_+g*(c+nr*Math.sin(u)))/(3*y),y=(-_+g*(c-nr*Math.sin(u)))/(3*y),0<=m&&m<=1&&(p[d++]=m),0<=v&&v<=1&&(p[d++]=v),0<=y&&y<=1&&(p[d++]=y)),d);if(0===x)return 0;for(var w,b,M=0,S=-1,I=0;I<x;I++){var T=Qr[I],C=0===T||1===T?.5:1;hr(t,n,r,o,T)<l||(S<0&&(S=cr(e,i,a,s,Kr),Kr[1]<Kr[0]&&1<S&&(b=void 0,b=Kr[0],Kr[0]=Kr[1],Kr[1]=b),b=hr(e,i,a,s,Kr[0]),1<S&&(w=hr(e,i,a,s,Kr[1]))),2===S?T<Kr[0]?M+=b<e?C:-C:T<Kr[1]?M+=w<b?C:-C:M+=s<w?C:-C:T<Kr[0]?M+=b<e?C:-C:M+=s<b?C:-C)}return M}function ta(t,e,n,i,r,a,o,s){if(e<s&&i<s&&a<s||s<e&&s<i&&s<a)return 0;var l,h,u,c,d,f,p=(c=Qr,f=(l=e)-2*(h=i)+(u=a),u=2*(h-l),h=l-(s=s),l=0,sr(f)?lr(u)&&0<=(d=-h/u)&&d<=1&&(c[l++]=d):sr(s=u*u-4*f*h)?0<=(d=-u/(2*f))&&d<=1&&(c[l++]=d):0<s&&(s=(-u-(h=Ji(s)))/(2*f),0<=(d=(-u+h)/(2*f))&&d<=1&&(c[l++]=d),0<=s&&s<=1&&(c[l++]=s)),l);if(0===p)return 0;var g=gr(e,i,a);if(0<=g&&g<=1){for(var m=0,v=fr(e,i,a,g),y=0;y<p;y++){var _=0===Qr[y]||1===Qr[y]?.5:1;fr(t,n,r,Qr[y])<o||(Qr[y]<g?m+=v<e?_:-_:m+=a<v?_:-_)}return m}_=0===Qr[0]||1===Qr[0]?.5:1;return fr(t,n,r,Qr[0])<o?0:a<e?_:-_}function ea(t,e,n,i,r){for(var a,o,s=0,l=0,h=0,u=0,c=0,d=0;d<t.length;){var f=t[d++];switch(f===jr.M&&1<d&&(n||(s+=Ur(l,h,u,c,i,r))),1===d&&(u=l=t[d],c=h=t[d+1]),f){case jr.M:l=u=t[d++],h=c=t[d++];break;case jr.L:if(n){if(Wr(l,h,t[d],t[d+1],e,i,r))return!0}else s+=Ur(l,h,t[d],t[d+1],i,r)||0;l=t[d++],h=t[d++];break;case jr.C:if(n){if(Hr(l,h,t[d++],t[d++],t[d++],t[d++],t[d],t[d+1],e,i,r))return!0}else s+=Jr(l,h,t[d++],t[d++],t[d++],t[d++],t[d],t[d+1],i,r)||0;l=t[d++],h=t[d++];break;case jr.Q:if(n){if(Gr(l,h,t[d++],t[d++],t[d],t[d+1],e,i,r))return!0}else s+=ta(l,h,t[d++],t[d++],t[d],t[d+1],i,r)||0;l=t[d++],h=t[d++];break;case jr.A:var p=t[d++],g=t[d++],m=t[d++],v=t[d++],y=t[d++],_=t[d++];d+=1;var x=1-t[d++],w=Math.cos(y)*m+p,b=Math.sin(y)*v+g;1<d?s+=Ur(l,h,w,b,i,r):(u=w,c=b);var M=(i-p)*v/m+p;if(n){if(function(t,e,n,i,r,a,o,s,l){if(0!==o){o=o;s-=t,l-=e;e=Math.sqrt(s*s+l*l);if(!(n<e-o||e+o<n)){if(Math.abs(i-r)%Yr<1e-4)return 1;(r=a?(a=i,i=Xr(r),Xr(a)):(i=Xr(i),Xr(r)))<i&&(r+=Yr);s=Math.atan2(l,s);return s<0&&(s+=Yr),i<=s&&s<=r||i<=s+Yr&&s+Yr<=r}}}(p,g,v,y,y+_,x,e,M,r))return!0}else s+=function(t,e,n,i,r,a,o,s){if(n<(s-=e)||s<-n)return 0;if(e=Math.sqrt(n*n-s*s),Qr[0]=-e,Qr[1]=e,(n=Math.abs(i-r))<1e-4)return 0;if(n%Zr<1e-4){r=Zr;var l=a?1:-1;return o>=Qr[i=0]+t&&o<=Qr[1]+t?l:0}(r=a?(e=i,i=Xr(r),Xr(e)):(i=Xr(i),Xr(r)))<i&&(r+=Zr);for(var h=0,u=0;u<2;u++){var c=Qr[u];o<c+t&&(l=a?1:-1,(i<=(c=(c=Math.atan2(s,c))<0?Zr+c:c)&&c<=r||i<=c+Zr&&c+Zr<=r)&&(h+=l=c>Math.PI/2&&c<1.5*Math.PI?-l:l))}return h}(p,g,v,y,y+_,x,M,r);l=Math.cos(y+_)*m+p,h=Math.sin(y+_)*v+g;break;case jr.R:u=l=t[d++],c=h=t[d++],w=u+t[d++],b=c+t[d++];if(n){if(Wr(u,c,w,c,e,i,r)||Wr(w,c,w,b,e,i,r)||Wr(w,b,u,b,e,i,r)||Wr(u,b,u,c,e,i,r))return!0}else s+=Ur(w,c,w,b,i,r),s+=Ur(u,b,u,c,i,r);break;case jr.Z:if(n){if(Wr(l,h,u,c,e,i,r))return!0}else s+=Ur(l,h,u,c,i,r);l=u,h=c}}return n||(a=h,o=c,Math.abs(a-o)<$r)||(s+=Ur(l,h,u,c,i,r)||0),0!==s}var na=ln.prototype.getCanvasPattern,ia=Math.abs,ra=new Vr(!0);function aa(t){ni.call(this,t),this.path=null}aa.prototype={constructor:aa,type:"path",__dirtyPath:!0,strokeContainThreshold:5,subPixelOptimize:!1,brush:function(t,e){var n,i=this.style,r=this.path||ra,a=i.hasStroke(),o=i.hasFill(),s=i.fill,l=i.stroke,h=o&&!!s.colorStops,u=a&&!!l.colorStops,c=o&&!!s.image,d=a&&!!l.image;i.bind(t,this,e),this.setTransform(t),this.__dirty&&(h&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,n)),u&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,l,n))),h?t.fillStyle=this._fillGradient:c&&(t.fillStyle=na.call(s,t)),u?t.strokeStyle=this._strokeGradient:d&&(t.strokeStyle=na.call(l,t));var f,s=i.lineDash,u=i.lineDashOffset,d=!!t.setLineDash,l=this.getGlobalScale();r.setScale(l[0],l[1]),this.__dirtyPath||s&&!d&&a?(r.beginPath(t),s&&!d&&(r.setLineDash(s),r.setLineDashOffset(u)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o&&(null!=i.fillOpacity?(f=t.globalAlpha,t.globalAlpha=i.fillOpacity*i.opacity,r.fill(t),t.globalAlpha=f):r.fill(t)),s&&d&&(t.setLineDash(s),t.lineDashOffset=u),a&&(null!=i.strokeOpacity?(f=t.globalAlpha,t.globalAlpha=i.strokeOpacity*i.opacity,r.stroke(t),t.globalAlpha=f):r.stroke(t)),s&&d&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new Vr},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n&&(i=(i=this.path)||(this.path=new Vr),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()),this._rect=t,e.hasStroke()){var i,r=this._rectWithStroke||(this._rectWithStroke=t.clone());return(this.__dirty||n)&&(r.copy(t),i=e.lineWidth,n=e.strokeNoScale?this.getLineScale():1,e.hasFill()||(i=Math.max(i,this.strokeContainThreshold||4)),1e-10<n&&(r.width+=i/n,r.height+=i/n,r.x-=i/n/2,r.y-=i/n/2)),r}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var a=this.path.data;if(r.hasStroke()){n=r.lineWidth,i=r.strokeNoScale?this.getLineScale():1;if(1e-10<i&&(r.hasFill()||(n=Math.max(n,this.strokeContainThreshold)),ea(a,n/i,!0,t,e)))return!0}if(r.hasFill())return ea(a,0,!1,t,e)}return!1},dirty:function(t){(t=null==t?!0:t)&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):ni.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(O(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<ia(t[0]-1)&&1e-10<ia(t[3]-1)?Math.sqrt(ia(t[0]*t[3]-t[2]*t[1])):1}},aa.extend=function(r){function t(t){aa.call(this,t),r.style&&this.style.extendFrom(r.style,!1);var e=r.shape;if(e){this.shape=this.shape||{};var n,i=this.shape;for(n in e)!i.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i[n]=e[n])}r.init&&r.init.call(this,t)}for(var e in y(t,aa),r)"style"!==e&&"shape"!==e&&(t.prototype[e]=r[e]);return t},y(aa,ni);function oa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}var sa=Vr.CMD,la=[[],[],[]],ha=Math.sqrt,ua=Math.atan2,ca=function(t,e){for(var n,i,r,a,o=t.data,s=sa.M,l=sa.C,h=sa.L,u=sa.R,c=sa.A,d=sa.Q,f=0,p=0;f<o.length;){switch(n=o[f++],p=f,i=0,n){case s:case h:i=1;break;case l:i=3;break;case d:i=2;break;case c:var g=e[4],m=e[5],v=ha(e[0]*e[0]+e[1]*e[1]),y=ha(e[2]*e[2]+e[3]*e[3]),_=ua(-e[1]/y,e[0]/v);o[f]*=v,o[f++]+=g,o[f]*=y,o[f++]+=m,o[f++]*=v,o[f++]*=y,o[f++]+=_,o[f++]+=_,p=f+=2;break;case u:a[0]=o[f++],a[1]=o[f++],st(a,a,e),o[p++]=a[0],o[p++]=a[1],a[0]+=o[f++],a[1]+=o[f++],st(a,a,e),o[p++]=a[0],o[p++]=a[1]}for(r=0;r<i;r++)(a=la[r])[0]=o[f++],a[1]=o[f++],st(a,a,e),o[p++]=a[0],o[p++]=a[1]}},da=Math.sqrt,fa=Math.sin,pa=Math.cos,ga=Math.PI,ma=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(oa(t)*oa(e))},va=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(ma(t,e))};function ya(t,e,n,i,r,a,o,s,l,h,u){var c=l*(ga/180),d=pa(c)*(t-n)/2+fa(c)*(e-i)/2,f=-1*fa(c)*(t-n)/2+pa(c)*(e-i)/2,l=d*d/(o*o)+f*f/(s*s);1<l&&(o*=da(l),s*=da(l));l=(r===a?-1:1)*da((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,r=l*o*f/s,l=l*-s*d/o,t=(t+n)/2+pa(c)*r-fa(c)*l,n=(e+i)/2+fa(c)*r+pa(c)*l,e=va([1,0],[(d-r)/o,(f-l)/s]),i=[(d-r)/o,(f-l)/s],f=[(-1*d-r)/o,(-1*f-l)/s],l=va(i,f);ma(i,f)<=-1&&(l=ga),1<=ma(i,f)&&(l=0),0===a&&0<l&&(l-=2*ga),1===a&&l<0&&(l+=2*ga),u.addData(h,t,n,o,s,e,l,c,a)}var _a=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,xa=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function wa(t,e){var n=function(t){if(!t)return new Vr;for(var e,n=0,i=0,r=n,a=i,o=new Vr,s=Vr.CMD,l=t.match(_a),h=0;h<l.length;h++){for(var u,c=l[h],d=c.charAt(0),f=c.match(xa)||[],p=f.length,g=0;g<p;g++)f[g]=parseFloat(f[g]);for(var m=0;m<p;){var v,y,_,x,w,b=n,M=i;switch(d){case"l":n+=f[m++],i+=f[m++],u=s.L,o.addData(u,n,i);break;case"L":n=f[m++],i=f[m++],u=s.L,o.addData(u,n,i);break;case"m":n+=f[m++],i+=f[m++],u=s.M,o.addData(u,n,i),r=n,a=i,d="l";break;case"M":n=f[m++],i=f[m++],u=s.M,o.addData(u,n,i),r=n,a=i,d="L";break;case"h":n+=f[m++],u=s.L,o.addData(u,n,i);break;case"H":n=f[m++],u=s.L,o.addData(u,n,i);break;case"v":i+=f[m++],u=s.L,o.addData(u,n,i);break;case"V":i=f[m++],u=s.L,o.addData(u,n,i);break;case"C":u=s.C,o.addData(u,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),n=f[m-2],i=f[m-1];break;case"c":u=s.C,o.addData(u,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i),n+=f[m-2],i+=f[m-1];break;case"S":var S=n,I=i,T=o.len(),C=o.data;e===s.C&&(S+=n-C[T-4],I+=i-C[T-3]),u=s.C,b=f[m++],M=f[m++],n=f[m++],i=f[m++],o.addData(u,S,I,b,M,n,i);break;case"s":S=n,I=i;T=o.len(),C=o.data;e===s.C&&(S+=n-C[T-4],I+=i-C[T-3]),u=s.C,b=n+f[m++],M=i+f[m++],n+=f[m++],i+=f[m++],o.addData(u,S,I,b,M,n,i);break;case"Q":b=f[m++],M=f[m++],n=f[m++],i=f[m++],u=s.Q,o.addData(u,b,M,n,i);break;case"q":b=f[m++]+n,M=f[m++]+i,n+=f[m++],i+=f[m++],u=s.Q,o.addData(u,b,M,n,i);break;case"T":S=n,I=i;T=o.len(),C=o.data;e===s.Q&&(S+=n-C[T-4],I+=i-C[T-3]),n=f[m++],i=f[m++],u=s.Q,o.addData(u,S,I,n,i);break;case"t":S=n,I=i;T=o.len(),C=o.data;e===s.Q&&(S+=n-C[T-4],I+=i-C[T-3]),n+=f[m++],i+=f[m++],u=s.Q,o.addData(u,S,I,n,i);break;case"A":v=f[m++],y=f[m++],_=f[m++],x=f[m++],w=f[m++],ya(b=n,M=i,n=f[m++],i=f[m++],x,w,v,y,_,u=s.A,o);break;case"a":v=f[m++],y=f[m++],_=f[m++],x=f[m++],w=f[m++],ya(b=n,M=i,n+=f[m++],i+=f[m++],x,w,v,y,_,u=s.A,o)}}"z"!==d&&"Z"!==d||(u=s.Z,o.addData(u),n=r,i=a),e=u}return o.toStatic(),o}(t);return(e=e||{}).buildPath=function(t){var e;t.setData?(t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e)):n.rebuildPath(e=t)},e.applyTransform=function(t){ca(n,t),this.dirty(!0)},e}function ba(t,e){return new aa(wa(t,e))}function Ma(t){ni.call(this,t)}Ma.prototype={constructor:Ma,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Fn(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),Jn(i,n)?(this.setTransform(t),Wn(this,t,i,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=Ke.NONE},getBoundingRect:function(){var t,e=this.style;return this.__dirty&&Fn(e),this._rect||(null!=(t=e.text)?t+="":t="",(t=Sn(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich)).x+=e.x||0,t.y+=e.y||0,Zn(e.textStroke,e.textStrokeWidth)&&(e=e.textStrokeWidth,t.x-=e/2,t.y-=e/2,t.width+=e,t.height+=e),this._rect=t),this._rect}},y(Ma,ni);var Sa=aa.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Ia=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Me=function(s){return v.browser.ie&&11<=v.browser.version?function(){var t,e=this.__clipPaths,n=this.style;if(e)for(var i=0;i<e.length;i++){var r=e[i],a=r&&r.shape,r=r&&r.type;if(a&&("sector"===r&&a.startAngle===a.endAngle||"rect"===r&&(!a.width||!a.height))){for(var o=0;o<Ia.length;o++)Ia[o][2]=n[Ia[o][0]],n[Ia[o][0]]=Ia[o][1];t=!0;break}}if(s.apply(this,arguments),t)for(o=0;o<Ia.length;o++)n[Ia[o][0]]=Ia[o][2]}:s},Ta=aa.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Me(aa.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),a=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,l=e.clockwise,h=Math.cos(o),e=Math.sin(o);t.moveTo(h*r+n,e*r+i),t.lineTo(h*a+n,e*a+i),t.arc(n,i,a,o,s,!l),t.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&t.arc(n,i,r,s,o,l),t.closePath()}}),Ie=aa.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}});function Ca(t,e,n,i,r,a,o){t=.5*(n-t),i=.5*(i-e);return(2*(e-n)+t+i)*o+(-3*(e-n)-2*t-i)*a+t*r+e}function ka(t,e,n){var i=e.points,r=e.smooth;if(i&&2<=i.length){if(r&&"spline"!==r){var a=function(t,e,n,i){var r,a,o=[],s=[],l=[],h=[];if(i){for(var u=[1/0,1/0],c=[-1/0,-1/0],d=0,f=t.length;d<f;d++)lt(u,u,t[d]),ht(c,c,t[d]);lt(u,u,i[0]),ht(c,c,i[1])}for(d=0,f=t.length;d<f;d++){var p=t[d];if(n)r=t[d?d-1:f-1],a=t[(d+1)%f];else{if(0===d||d===f-1){o.push(J(t[d]));continue}r=t[d-1],a=t[d+1]}et(s,a,r),nt(s,s,e);var g=rt(p,r),m=rt(p,a),v=g+m;0!==v&&(g/=v,m/=v),nt(l,s,-g),nt(h,s,m);m=tt([],p,l),p=tt([],p,h);i&&(ht(m,m,u),lt(m,m,c),ht(p,p,u),lt(p,p,c)),o.push(m),o.push(p)}return n&&o.push(o.shift()),o}(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[2*s],h=a[2*s+1],u=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],h[0],h[1],u[0],u[1])}}else{"spline"===r&&(i=function(t,e){for(var n=t.length,i=[],r=0,a=1;a<n;a++)r+=rt(t[a-1],t[a]);for(var o=(o=r/2)<n?n:o,a=0;a<o;a++){var s,l,h=a/(o-1)*(e?n:n-1),u=Math.floor(h),c=h-u,d=t[u%n],f=e?(s=t[(u-1+n)%n],l=t[(u+1)%n],t[(u+2)%n]):(s=t[0===u?u:u-1],l=t[n-2<u?n-1:u+1],t[n-3<u?n-1:u+2]),h=c*c,u=c*h;i.push([Ca(s[0],d[0],l[0],f[0],c,h,u),Ca(s[1],d[1],l[1],f[1],c,h,u)])}return i}(i,n)),t.moveTo(i[0][0],i[0][1]);for(var s=1,c=i.length;s<c;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var Da=aa.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){ka(t,e,!0)}}),Aa=aa.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){ka(t,e,!1)}}),La=Math.round;function Pa(t,e,n){t=La(2*t);return(t+La(e))%2==0?t/2:(t+(n?1:-1))/2}var Oa={},Ea=aa.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,i,r,a,o,s;this.subPixelOptimize?(n=Oa,i=e,r=this.style,s=r&&r.lineWidth,i&&s&&(a=i.x,o=i.y,r=i.width,i=i.height,n.x=Pa(a,s,!0),n.y=Pa(o,s,!0),n.width=Math.max(Pa(a+r,s,!1)-n.x,0===r?0:1),n.height=Math.max(Pa(o+i,s,!1)-n.y,0===i?0:1)),o=Oa.x,s=Oa.y,n=Oa.width,i=Oa.height,Oa.r=e.r,e=Oa):(o=e.x,s=e.y,n=e.width,i=e.height),e.r?En(t,e):t.rect(o,s,n,i),t.closePath()}}),Na={},Ba=aa.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,i,r,a,o,s=this.subPixelOptimize?(n=Na,s=e,i=this.style,o=i&&i.lineWidth,s&&o&&(r=s.x1,a=s.x2,i=s.y1,s=s.y2,La(2*r)===La(2*a)?n.x1=n.x2=Pa(r,o,!0):(n.x1=r,n.x2=a),La(2*i)===La(2*s)?n.y1=n.y2=Pa(i,o,!0):(n.y1=i,n.y2=s)),o=Na.x1,i=Na.y1,n=Na.x2,Na.y2):(o=e.x1,i=e.y1,n=e.x2,e.y2),e=e.percent;0!==e&&(t.moveTo(o,i),e<1&&(n=o*(1-e)+n*e,s=i*(1-e)+s*e),t.lineTo(n,s))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Ra=[];function za(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?ur:hr)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?ur:hr)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?pr:fr)(t.x1,t.cpx1,t.x2,e),(n?pr:fr)(t.y1,t.cpy1,t.y2,e)]}function Fa(t){this.colorStops=t||[]}var Zt=aa.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,a=e.y2,o=e.cpx1,s=e.cpy1,l=e.cpx2,h=e.cpy2,e=e.percent;0!==e&&(t.moveTo(n,i),null==l||null==h?(e<1&&(mr(n,o,r,e,Ra),o=Ra[1],r=Ra[2],mr(i,s,a,e,Ra),s=Ra[1],a=Ra[2]),t.quadraticCurveTo(o,s,r,a)):(e<1&&(dr(n,o,l,r,e,Ra),o=Ra[1],l=Ra[2],r=Ra[3],dr(i,s,h,a,e,Ra),s=Ra[1],h=Ra[2],a=Ra[3]),t.bezierCurveTo(o,s,l,h,r,a)))},pointAt:function(t){return za(this.shape,t,!1)},tangentAt:function(t){t=za(this.shape,t,!0);return it(t,t)}}),Va=aa.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),a=e.startAngle,o=e.endAngle,s=e.clockwise,l=Math.cos(a),e=Math.sin(a);t.moveTo(l*r+n,e*r+i),t.arc(n,i,r,a,o,!s)}}),ei=aa.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),aa.prototype.getBoundingRect.call(this)}});Fa.prototype={constructor:Fa,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};function Wa(t,e,n,i,r,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=a||!1,Fa.call(this,r)}Wa.prototype={constructor:Wa},y(Wa,Fa);i=function(t,e,n,i,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=r||!1,Fa.call(this,i)};function Ha(t){ni.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}i.prototype={constructor:i},y(i,Fa),Ha.prototype.incremental=!0,Ha.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Ha.prototype.addDisplayable=function(t,e){(e?this._temporaryDisplayables:this._displayables).push(t),this.dirty()},Ha.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},Ha.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},Ha.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(var e,t=0;t<this._temporaryDisplayables.length;t++)(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null},Ha.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t);this._cursor=n;for(var i,n=0;n<this._temporaryDisplayables.length;n++)(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t);this._temporaryDisplayables=[],this.notClear=!0};var Ga=[];Ha.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new ze(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(Ga)),t.union(i)}this._rect=t}return this._rect},Ha.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},y(Ha,ni);var qa=Math.round,Xa=Math.max,Ya=Math.min,Ua={},ja=1;function Za(t){return aa.extend(t)}function $a(t,e,n,i){e=ba(t,e);return n&&("center"===i&&(n=Ka(n,e.getBoundingRect())),Ja(e,n)),e}function Qa(t,e,n){var i=new ii({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){"center"===n&&(t={width:t.width,height:t.height},i.setStyle(Ka(e,t)))}});return i}function Ka(t,e){var n=e.width/e.height,e=t.height*n,n=e<=t.width?t.height:(e=t.width)/n;return{x:t.x+t.width/2-e/2,y:t.y+t.height/2-n/2,width:e,height:n}}li=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var a=t[r];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}return(e=new aa(e)).createPathProxy(),e.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},e};function Ja(t,e){t.applyTransform&&(e=t.getBoundingRect().calculateTransform(e),t.applyTransform(e))}function to(t){var e=t.shape,n=t.style.lineWidth;return qa(2*e.x1)===qa(2*e.x2)&&(e.x1=e.x2=eo(e.x1,n,!0)),qa(2*e.y1)===qa(2*e.y2)&&(e.y1=e.y2=eo(e.y1,n,!0)),t}function eo(t,e,n){t=qa(2*t);return(t+qa(e))%2==0?t/2:(t+(n?1:-1))/2}function no(t){return null!=t&&"none"!==t}var io=Z(),ro=0;function ao(t){if("string"!=typeof t)return t;var e=io.get(t);return e||(e=function(t,e){var n=le(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,255<n[i]?n[i]=255:t[i]<0&&(n[i]=0);return ue(n,4===n.length?"rgba":"rgb")}}(t,-.1),ro<1e4&&(io.set(t,e),ro++)),e}function oo(t){var e,n,i,r,a=t.__hoverStl;a&&!t.__highlighted&&(e=t.useHoverLayer,t.__highlighted=e?"layer":"plain",!(n=t.__zr)&&e||(r=(i=t).style,Io(r=e?(i=n.addHover(t)).style:r),e||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i,r=t.style;for(i in e)null!=e[i]&&(n[i]=r[i]);n.fill=r.fill,n.stroke=r.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}(i),r.extendFrom(a),so(r,a,"fill"),so(r,a,"stroke"),So(r),e||(t.dirty(!1),t.z2+=ja)))}function so(t,e,n){!no(e[n])&&no(t[n])&&(t[n]=ao(t[n]))}function lo(t){var e,n=t.__highlighted;n&&(t.__highlighted=!1,"layer"===n?t.__zr&&t.__zr.removeHover(t):n&&(e=t.style,(n=t.__cachedNormalStl)&&(Io(e),t.setStyle(n),So(e)),null!=(e=t.__cachedNormalZ2)&&t.z2-e===ja&&(t.z2=e)))}function ho(t,e){t.isGroup?t.traverse(function(t){t.isGroup||e(t)}):e(t)}function uo(t,e){e=t.__hoverStl=!1!==e&&(e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,lo(t),oo(t))}function co(t){return t&&t.__isEmphasisEntered}function fo(t){this.__hoverSilentOnTouch&&t.zrByTouch||this.__isEmphasisEntered||ho(this,oo)}function po(t){this.__hoverSilentOnTouch&&t.zrByTouch||this.__isEmphasisEntered||ho(this,lo)}function go(){this.__isEmphasisEntered=!0,ho(this,oo)}function mo(){this.__isEmphasisEntered=!1,ho(this,lo)}function vo(t,e,n){t.isGroup?t.traverse(function(t){t.isGroup||uo(t,t.hoverStyle||e)}):uo(t,t.hoverStyle||e),yo(t,n)}function yo(t,e){var n=!1===e;t.__hoverSilentOnTouch=null!=e&&e.hoverSilentOnTouch,n&&!t.__hoverStyleTrigger||(t[e=n?"off":"on"]("mouseover",fo)[e]("mouseout",po),t[e]("emphasis",go)[e]("normal",mo),t.__hoverStyleTrigger=!n)}function _o(t,e,n,i,r,a,o){var s=(r=r||Ua).labelFetcher,l=r.labelDataIndex,h=r.labelDimIndex,u=n.getShallow("show"),c=i.getShallow("show");(u||c)&&null==(d=s?s.getFormattedLabel(l,"normal",null,h):d)&&(d=I(r.defaultText)?r.defaultText(l,r):r.defaultText);var u=u?d:null,d=c?F(s?s.getFormattedLabel(l,"emphasis",null,h):null,d):null;null==u&&null==d||(xo(t,n,a,r),xo(e,i,o,r,!0)),t.text=u,e.text=d}function xo(t,e,n,i,r){return wo(t,e,i,r),n&&C(t,n),t}function wo(t,e,n,i){(n=n||Ua).isRectText&&(o=e.getShallow("position")||(i?null:"inside"),t.textPosition=o="outside"===o?"top":o,t.textOffset=e.getShallow("offset"),null!=(o=e.getShallow("rotate"))&&(o*=Math.PI/180),t.textRotation=o,t.textDistance=F(e.getShallow("distance"),i?null:5));var r,a,o=e.ecModel,s=o&&o.option.textStyle,l=function(t){var e;for(;t&&t!==t.ecModel;){var n=(t.option||Ua).rich;if(n)for(var i in e=e||{},n)n.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(l)for(var h in r={},l)l.hasOwnProperty(h)&&(a=e.getModel(["rich",h]),bo(r[h]={},a,s,n,i));return t.rich=r,bo(t,e,s,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function bo(t,e,n,i,r,a){n=!r&&n||Ua,t.textFill=Mo(e.getShallow("color"),i)||n.color,t.textStroke=Mo(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=F(e.getShallow("textBorderWidth"),n.textBorderWidth),t.insideRawTextPosition=t.textPosition,r||(a&&(t.insideRollbackOpt=i,So(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&i.disableBox||(t.textBackgroundColor=Mo(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=Mo(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Mo(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function So(t){var e,n,i,r,a=t.insideRollbackOpt;a&&null==t.textFill&&(e=a.useInsideStyle,n=t.insideRawTextPosition,r=a.autoColor,!1!==e&&(!0===e||a.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside"))?(i={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth},t.textFill="#fff",null==t.textStroke&&(t.textStroke=r,null==t.textStrokeWidth&&(t.textStrokeWidth=2))):null!=r&&(i={textFill:null},t.textFill=r),i&&(t.insideRollback=i))}function Io(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function To(t,e){e=e||e.getModel("textStyle");return q([t.fontStyle||e&&e.getShallow("fontStyle")||"",t.fontWeight||e&&e.getShallow("fontWeight")||"",(t.fontSize||e&&e.getShallow("fontSize")||12)+"px",t.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}function Co(t,e,n,i,r,a){var o,s;"function"==typeof r&&(a=r,r=null),i&&i.isAnimationEnabled()?(o=i.getShallow("animationDuration"+(s=t?"Update":"")),t=i.getShallow("animationEasing"+s),"function"==typeof(s=i.getShallow("animationDelay"+s))&&(s=s(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),0<(o="function"==typeof o?o(r):o)?e.animateTo(n,o,s||0,t,a,!!a):(e.stopAnimation(),e.attr(n),a&&a())):(e.stopAnimation(),e.attr(n),a&&a())}function ko(t,e,n,i,r){Co(!0,t,e,n,i,r)}function Do(t,e,n,i,r){Co(!1,t,e,n,i,r)}function Ao(t,e,n){return e&&!P(e)&&(e=Ft.getLocalTransform(e)),st([],t,e=n?Bt([],e):e)}function Lo(t,e,i,n){var r,a;function o(t){var e={position:J(t.position),rotation:t.rotation};return t.shape&&(e.shape=C({},t.shape)),e}t&&e&&(a={},t.traverse(function(t){!t.isGroup&&t.anid&&(a[t.anid]=t)}),r=a,e.traverse(function(t){var e,n;t.isGroup||!t.anid||(e=r[t.anid])&&(n=o(t),t.attr(o(e)),ko(t,n,i,t.dataIndex))}))}var Po=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:ja,extendShape:Za,extendPath:function(t,e){return aa.extend(wa(t,e))},makePath:$a,makeImage:Qa,mergePath:li,resizePath:Ja,subPixelOptimizeLine:to,subPixelOptimizeRect:function(t){var e=t.shape,n=t.style.lineWidth,i=e.x,r=e.y,a=e.width,o=e.height;return e.x=eo(e.x,n,!0),e.y=eo(e.y,n,!0),e.width=Math.max(eo(i+a,n,!1)-e.x,0===a?0:1),e.height=Math.max(eo(r+o,n,!1)-e.y,0===o?0:1),t},subPixelOptimize:eo,setElementHoverStyle:uo,isInEmphasis:co,setHoverStyle:vo,setAsHoverStyleTrigger:yo,setLabelStyle:_o,setTextStyle:xo,setText:function(t,e,n){var i,r={isRectText:!0};!1===n?i=!0:r.autoColor=n,wo(t,e,r,i)},getFont:To,updateProps:ko,initProps:Do,getTransform:function(t,e){for(var n=Lt([]);t&&t!==e;)Pt(n,t.getLocalTransform(),n),t=t.parent;return n},applyTransform:Ao,transformDirection:function(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),r=Ao(r=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0],e,n);return Math.abs(r[0])>Math.abs(r[1])?0<r[0]?"right":"left":0<r[1]?"bottom":"top"},groupTransition:Lo,clipPointsByRect:function(t,n){return b(t,function(t){var e=t[0],e=Xa(e,n.x);e=Ya(e,n.x+n.width);t=t[1],t=Xa(t,n.y);return[e,t=Ya(t,n.y+n.height)]})},clipRectByRect:function(t,e){var n=Xa(t.x,e.x),i=Ya(t.x+t.width,e.x+e.width),r=Xa(t.y,e.y),e=Ya(t.y+t.height,e.y+e.height);if(n<=i&&r<=e)return{x:n,y:r,width:i-n,height:e-r}},createIcon:function(t,e,n){var i=(e=C({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),k(i,n),new ii(e)):$a(t.replace("path://",""),e,n,"center")},Group:Fe,Image:ii,Text:Ma,Circle:Sa,Sector:Ta,Ring:Ie,Polygon:Da,Polyline:Aa,Rect:Ea,Line:Ba,BezierCurve:Zt,Arc:Va,IncrementalDisplayable:Ha,CompoundPath:ei,LinearGradient:Wa,RadialGradient:i,BoundingRect:ze}),Oo=["textStyle","color"],Ie={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Oo):null)},getFont:function(){return To({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return Sn(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},Eo=Vt([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Zt={getItemStyle:function(t,e){t=Eo(this,t,e),e=this.getBorderLineDash();return e&&(t.lineDash=e),t},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},ei=_,No=Bi();function Bo(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function Ro(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return t=null==t&&n?n.get(e):t}function zo(t,e){var n=No(t).getParent;return n?n.call(t,e):t.parentModel}Bo.prototype={constructor:Bo,init:null,mergeOption:function(t){f(this.option,t,!0)},get:function(t,e){return null==t?this.option:Ro(this.option,this.parsePath(t),!e&&zo(this,t))},getShallow:function(t,e){var n=this.option,n=null==n?n:n[t],e=!e&&zo(this,t);return n=null==n&&e?e.getShallow(t):n},getModel:function(t,e){var n;return new Bo(null==t?this.option:Ro(this.option,t=this.parsePath(t)),e=e||(n=zo(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(T(this.option))},setReadOnly:function(t){},parsePath:function(t){return t="string"==typeof t?t.split("."):t},customizeGetParent:function(t){No(this).getParent=t},isAnimationEnabled:function(){if(!v.node)return null!=this.option.animation?!!this.option.animation:this.parentModel?this.parentModel.isAnimationEnabled():void 0}},qi(Bo),Yi(Bo),ei(Bo,Ut),ei(Bo,$t),ei(Bo,Ie),ei(Bo,Zt);var Fo=0;function Vo(t){return[t||"",Fo++,Math.random().toFixed(5)].join("_")}var Wo=1e-4;function Ho(t,e,n,i){var r=e[1]-e[0],a=n[1]-n[0];if(0==r)return 0==a?n[0]:(n[0]+n[1])/2;if(i)if(0<r){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/r*a+n[0]}function Go(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?t.replace(/^\s+/,"").replace(/\s+$/,"").match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function qo(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function Xo(t){var e=t.toString(),t=e.indexOf("e");if(0<t){var n=+e.slice(t+1);return n<0?-n:0}n=e.indexOf(".");return n<0?0:e.length-1-n}function Yo(t){var e=2*Math.PI;return(t%e+e)%e}function Uo(t){return-Wo<t&&t<Wo}var jo=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Zo(t){if(t instanceof Date)return t;if("string"!=typeof t)return null==t?new Date(NaN):new Date(Math.round(t));var e=jo.exec(t);if(!e)return new Date(NaN);if(e[8]){t=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(t-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}function $o(t){return Math.floor(Math.log(t)/Math.LN10)}function Qo(t,e){var n=$o(t),i=Math.pow(10,n),r=t/i,r=e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10;return t=r*i,-20<=n?+t.toFixed(n<0?-n:0):t}function Ko(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<t.length?"."+t[1]:"")}var Jo=H,ts=/([&<>"'])/g,es={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ns(t){return null==t?"":(t+"").replace(ts,function(t,e){return es[e]})}function is(t,e){return"{"+t+(null==e?"":e)+"}"}var rs=["a","b","c","d","e","f","g"];function as(t,e){var n=(t=L(t)?{color:t,extraCssText:e}:t||{}).color,i=t.type,e=t.extraCssText,r=t.renderMode||"html",t=t.markerId||"X";return n?"html"===r?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ns(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+ns(n)+";"+(e||"")+'"></span>':{renderMode:r,content:"{marker"+t+"|}  ",style:{color:n}}:""}function os(t,e){return"0000".substr(0,e-(t+="").length)+t}function ss(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=Zo(e),r=n?"UTC":"",a=i["get"+r+"FullYear"](),o=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),e=i["get"+r+"Minutes"](),n=i["get"+r+"Seconds"](),r=i["get"+r+"Milliseconds"]();return t=t.replace("MM",os(o,2)).replace("M",o).replace("yyyy",a).replace("yy",a%100).replace("dd",os(s,2)).replace("d",s).replace("hh",os(l,2)).replace("h",l).replace("mm",os(e,2)).replace("m",e).replace("ss",os(n,2)).replace("s",n).replace("SSS",os(r,3))}var ls=Cn,hs=D,us=["left","right","top","bottom","width","height"],cs=[["width","left","right"],["height","top","bottom"]];function ds(s,l,h,u,c){var d=0,f=0;null==u&&(u=1/0),null==c&&(c=1/0);var p=0;l.eachChild(function(t,e){var n,i,r=t.position,a=t.getBoundingRect(),o=l.childAt(e+1),e=o&&o.getBoundingRect();p="horizontal"===s?(o=a.width+(e?-e.x+a.x:0),u<(n=d+o)||t.newline?(d=0,n=o,f+=p+h,a.height):Math.max(p,a.height)):(e=a.height+(e?-e.y+a.y:0),c<(i=f+e)||t.newline?(d+=p+h,f=0,i=e,a.width):Math.max(p,a.width)),t.newline||(r[0]=d,r[1]=f,"horizontal"===s?d=n+h:f=i+h)})}S(ds,"vertical"),S(ds,"horizontal");function fs(l,h,t){var u=(t=!O(t)?{}:t).ignoreSize;A(u)||(u=[u,u]);var e=n(cs[0],0),t=n(cs[1],1);function n(t,e){var n={},i=0,r={},a=0;if(hs(t,function(t){r[t]=l[t]}),hs(t,function(t){c(h,t)&&(n[t]=r[t]=h[t]),d(n,t)&&i++,d(r,t)&&a++}),u[e])return d(h,t[1])?r[t[2]]=null:d(h,t[2])&&(r[t[1]]=null),r;if(2!==a&&i){if(2<=i)return n;for(var o=0;o<t.length;o++){var s=t[o];if(!c(n,s)&&c(l,s)){n[s]=l[s];break}}return n}return r}function c(t,e){return t.hasOwnProperty(e)}function d(t,e){return null!=t[e]&&"auto"!==t[e]}function i(t,e,n){hs(t,function(t){e[t]=n[t]})}i(cs[0],l,e),i(cs[1],l,t)}function ps(t){return e={},(n=t)&&e&&hs(us,function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e;var e,n}var gs,ms,vs,ys=Bi(),_s=Bo.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){Bo.call(this,t,e,n,i),this.uid=Vo("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?ps(t):{};f(t,e.getTheme().get(this.mainType)),f(t,this.getDefaultOption()),n&&fs(t,i,n)},mergeOption:function(t,e){f(this.option,t,!0);var n=this.layoutMode;n&&fs(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=ys(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var r={},a=e.length-1;0<=a;a--)r=f(r,e[a],!0);t.defaultOption=r}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function xs(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}Zi(_s,{registerWhenExtend:!0}),ms={},(gs=_s).registerSubTypeDefaulter=function(t,e){t=Gi(t),ms[t.main]=e},gs.determineSubType=function(t,e){var n,i=e.type;return i||(n=Gi(t).main,gs.hasSubTypes(t)&&ms[n]&&(i=ms[n](e))),i},vs=function(t){var e=[];D(_s.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=b(e,function(t){return Gi(t).main}),"dataset"!==t&&m(e,"dataset")<=0&&e.unshift("dataset");return e},_s.topologicalTravel=function(t,e,n,i){if(t.length){var a,o,s,e=(o={},s=[],D(a=e,function(n){var e,i,r=xs(o,n),t=r.originalDeps=vs(n),t=(e=a,i=[],D(t,function(t){0<=m(e,t)&&i.push(t)}),i);r.entryCount=t.length,0===r.entryCount&&s.push(n),D(t,function(t){m(r.predecessor,t)<0&&r.predecessor.push(t);var e=xs(o,t);m(e.successor,t)<0&&e.successor.push(n)})}),{graph:o,noEntryList:s}),r=e.graph,l=e.noEntryList,h={};for(D(t,function(t){h[t]=!0});l.length;){var u=l.pop(),c=r[u],d=!!h[u];d&&(n.call(i,u,c.originalDeps.slice()),delete h[u]),D(c.successor,d?p:f)}D(h,function(){throw new Error("Circle dependency may exists")})}function f(t){r[t].entryCount--,0===r[t].entryCount&&l.push(t)}function p(t){h[t]=!0,f(t)}},_(_s,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var i="",ws={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:(i="undefined"!=typeof navigator?navigator.platform||"":i).match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},bs=Bi();var Ms={clearColorPalette:function(){bs(this).colorIdx=0,bs(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var i=bs(e=e||this),r=i.colorIdx||0,a=i.colorNameMap=i.colorNameMap||{};if(a.hasOwnProperty(t))return a[t];var o=ki(this.get("color",!0)),e=this.get("colorLayer",!0);if((n=(n=null!=n&&e?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(e,n):o)||o)&&n.length){o=n[r];return t&&(a[t]=o),i.colorIdx=(r+1)%n.length,o}}};function Ss(t){var e=t.get("coordinateSystem"),n={coordSysName:e,coordSysDims:[],axisMap:Z(),categoryAxisMap:Z()},e=Is[e];if(e)return e(t,n,n.axisMap,n.categoryAxisMap),n}var Is={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis")[0],t=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",t),Ts(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),Ts(t)&&(i.set("y",t),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,i){t=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",t),Ts(t)&&(i.set("single",t),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar")[0],t=r.findAxisModel("radiusAxis"),r=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",t),n.set("angle",r),Ts(t)&&(i.set("radius",t),e.firstCategoryDimIndex=0),Ts(r)&&(i.set("angle",r),e.firstCategoryDimIndex=1)},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,i,r,a){var o=t.ecModel,t=o.getComponent("parallel",t.get("parallelIndex")),s=i.coordSysDims=t.dimensions.slice();D(t.parallelAxisIndex,function(t,e){var n=o.getComponent("parallelAxis",t),t=s[e];r.set(t,n),Ts(n)&&null==i.firstCategoryDimIndex&&(a.set(t,n),i.firstCategoryDimIndex=e)})}};function Ts(t){return"category"===t.get("type")}var Cs="original",ks="arrayRows",Ds="objectRows",As="keyedColumns",Ls="unknown",Ps="typedArray",Os="column",Es="row";function Ns(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===As?{}:[]),this.sourceFormat=t.sourceFormat||Ls,this.seriesLayoutBy=t.seriesLayoutBy||Os,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&Z(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}Ns.seriesDataToSource=function(t){return new Ns({data:t,sourceFormat:N(t)?Ps:Cs,fromDataset:!1})},Yi(Ns);var Bs=Bi();function Rs(t){var e,n=t.option,i=n.data,r=N(i)?Ps:Cs,a=!1,o=n.seriesLayoutBy,s=n.sourceHeader,l=n.dimensions,h=function(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}(t);h&&(i=(e=h.option).source,r=Bs(h).sourceFormat,a=!0,o=o||e.seriesLayoutBy,null==s&&(s=e.sourceHeader),l=l||e.dimensions);l=function(t,e,n,i,r){if(!t)return{dimensionsDefine:zs(r)};var a,o,s,l;e===ks?("auto"===i||null==i?Fs(function(t){null!=t&&"-"!==t&&(L(t)?null==o&&(o=1):o=0)},n,t,10):o=i?1:0,r||1!==o||(r=[],Fs(function(t,e){r[e]=null!=t?t:""},n,t)),a=r?r.length:n===Es?t.length:t[0]?t[0].length:null):e===Ds?r||(r=function(t){var e,n=0;for(;n<t.length&&!(e=t[n++]););if(e){var i=[];return D(e,function(t,e){i.push(e)}),i}}(t),s=!0):e===As?r||(r=[],s=!0,D(t,function(t,e){r.push(e)})):e===Cs&&(t=Li(t[0]),a=A(t)&&t.length||1);s&&D(r,function(t,e){"name"===(O(t)?t.name:t)&&(l=e)});return{startIndex:o,dimensionsDefine:zs(r),dimensionsDetectCount:a,potentialNameDimIndex:l}}(i,r,o,s,l),n=n.encode;!n&&h&&(n=function(t,e,n,i,r,a){var o,s=Ss(t),l={},h=[],u=[],c=t.subType,d=Z(["pie","map","funnel"]),f=Z(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(s&&null!=f.get(c)){var t=t.ecModel,t=Bs(t).datasetMap,e=e.uid+"_"+r,p=t.get(e)||t.set(e,{categoryWayDim:1,valueWayDim:0});D(s.coordSysDims,function(t){var e;null==s.firstCategoryDimIndex?(e=p.valueWayDim++,l[t]=e,u.push(e)):s.categoryAxisMap.get(t)?(l[t]=0,h.push(0)):(e=p.categoryWayDim++,l[t]=e,u.push(e))})}else if(null!=d.get(c)){for(var g=0;g<5&&null==o;g++)Vs(n,i,r,a.dimensionsDefine,a.startIndex,g)||(o=g);null!=o&&(l.value=o,c=a.potentialNameDimIndex||Math.max(o-1,0),u.push(c),h.push(c))}return h.length&&(l.itemName=h),u.length&&(l.seriesName=u),l}(t,h,i,r,o,l)),Bs(t).source=new Ns({data:i,fromDataset:a,seriesLayoutBy:o,sourceFormat:r,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectCount:l.dimensionsDetectCount,encodeDefine:n})}function zs(t){if(t){var i=Z();return b(t,function(t,e){if(null==(t=C({},O(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var n=i.get(t.name);return n?t.name+="-"+n.count++:i.set(t.name,{count:1}),t})}}function Fs(t,e,n,i){if(null==i&&(i=1/0),e===Es)for(var r=0;r<n.length&&r<i;r++)t(n[r]?n[r][0]:null,r);else for(var a=n[0]||[],r=0;r<a.length&&r<i;r++)t(a[r],r)}function Vs(t,e,n,i,r,a){var o,s;if(N(t))return!1;if(i&&(s=O(s=i[a])?s.name:s),e===ks)if(n===Es){for(var l=t[a],h=0;h<(l||[]).length&&h<5;h++)if(null!=(o=f(l[r+h])))return o}else for(h=0;h<t.length&&h<5;h++){var u=t[r+h];if(u&&null!=(o=f(u[a])))return o}else if(e===Ds){if(!s)return;for(h=0;h<t.length&&h<5;h++)if((c=t[h])&&null!=(o=f(c[s])))return o}else if(e===As){if(!s)return;if(!(l=t[s])||N(l))return!1;for(h=0;h<l.length&&h<5;h++)if(null!=(o=f(l[h])))return o}else if(e===Cs)for(h=0;h<t.length&&h<5;h++){var c,d=Li(c=t[h]);if(!A(d))return!1;if(null!=(o=f(d[a])))return o}function f(t){return(null==t||!isFinite(t)||""===t)&&(!(!L(t)||"-"===t)||void 0)}return!1}var Ws="\0_ec_inner",Hs=Bo.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new Bo(n),this._optionManager=i},setOption:function(t,e){G(!(Ws in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e,n=!1,i=this._optionManager;return t&&"recreate"!==t||(e=i.mountOption("recreate"===t),this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(e)):function(t){this.option={},this.option[Ws]=1,this._componentsMap=Z({series:[]}),this._seriesIndices,this._seriesIndicesMap,function(n,t){var i=n.color&&!n.colorLayer;D(t,function(t,e){"colorLayer"===e&&i||_s.hasClass(e)||("object"==typeof t?n[e]=n[e]?f(n[e],t,!1):T(t):null==n[e]&&(n[e]=t))})}(t,this._theme.option),f(t,ws,!1),this.mergeOption(t)}.call(this,e),n=!0),"timeline"!==t&&"media"!==t||this.restoreData(),t&&"recreate"!==t&&"timeline"!==t||(e=i.getTimelineOption(this))&&(this.mergeOption(e),n=!0),t&&"recreate"!==t&&"media"!==t||(i=i.getMediaOption(this,this._api)).length&&D(i,function(t){this.mergeOption(t,n=!0)},this),n},mergeOption:function(n){var s=this.option,l=this._componentsMap,i=[];Bs(this).datasetMap=Z(),D(n,function(t,e){null!=t&&(_s.hasClass(e)?e&&i.push(e):s[e]=null==s[e]?T(t):f(s[e],t,!0))}),_s.topologicalTravel(i,_s.getAllClassMainTypes(),function(a,t){var e=ki(n[a]),e=Pi(l.get(a),e);(function(t){var o=Z();Si(t,function(t,e){var n=t.exist;n&&o.set(n.id,t)}),Si(t,function(t,e){var n=t.option;G(!n||null==n.id||!o.get(n.id)||o.get(n.id)===t,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&o.set(n.id,t),t.keyInfo||(t.keyInfo={})}),Si(t,function(t,e){var n=t.exist,i=t.option,r=t.keyInfo;if(Ii(i)){if(r.name=null!=i.name?i.name+"":n?n.name:Ci+e,n)r.id=n.id;else if(null!=i.id)r.id=i.id+"";else for(var a=0;r.id="\0"+r.name+"\0"+a++,o.get(r.id););o.set(r.id,t)}})})(e),D(e,function(t,e){var n,i=t.option;O(i)&&(t.keyInfo.mainType=a,t.keyInfo.subType=(n=a,i=i,t=t.exist,i.type||(t?t.subType:_s.determineSubType(n,i))))});var o=function(e,t){A(t)||(t=t?[t]:[]);var n={};return D(t,function(t){n[t]=(e.get(t)||[]).slice()}),n}(l,t);s[a]=[],l.set(a,[]),D(e,function(t,e){var n,i=t.exist,r=t.option;G(O(r)||i,"Empty component definition"),r?(n=_s.getClass(a,t.keyInfo.subType,!0),i&&i instanceof n?(i.name=t.keyInfo.name,i.mergeOption(r,this),i.optionUpdated(r,!1)):(t=C({dependentModels:o,componentIndex:e},t.keyInfo),C(i=new n(r,this,this,t),t),i.init(r,this,this,t),i.optionUpdated(null,!0))):(i.mergeOption({},this),i.optionUpdated({},!1)),l.get(a)[e]=i,s[a][e]=i.option},this),"series"===a&&Gs(this,l.get("series"))},this),this._seriesIndicesMap=Z(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var i=T(this.option);return D(i,function(t,e){if(_s.hasClass(e)){for(var n=(t=ki(t)).length-1;0<=n;n--)Ei(t[n])&&t.splice(n,1);i[e]=t}}),delete i[Ws],i},getTheme:function(){return this._theme},getComponent:function(t,e){t=this._componentsMap.get(t);if(t)return t[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i,r=t.index,a=t.id,o=t.name,s=this._componentsMap.get(e);return s&&s.length?qs(null!=r?x(b(r=!A(r)?[r]:r,function(t){return s[t]}),function(t){return!!t}):null!=a?(n=A(a),x(s,function(t){return n&&0<=m(a,t.id)||!n&&t.id===a})):null!=o?(i=A(o),x(s,function(t){return i&&0<=m(o,t.name)||!i&&t.name===o})):s.slice(),t):[]},findComponents:function(t){var e,n,i,r,a,o=t.query,s=t.mainType,l=(n=s+"Index",i=s+"Id",r=s+"Name",!(e=o)||null==e[n]&&null==e[i]&&null==e[r]?null:{mainType:s,index:e[n],id:e[i],name:e[r]}),l=l?this.queryComponents(l):this._componentsMap.get(s);return a=qs(l,t),t.filter?x(a,t.filter):a},eachComponent:function(t,i,r){var e=this._componentsMap;"function"==typeof t?(r=i,i=t,e.each(function(t,n){D(t,function(t,e){i.call(r,n,t,e)})})):L(t)?D(e.get(t),i,r):O(t)&&D(this.findComponents(t),i,r)},getSeriesByName:function(e){return x(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(e){return x(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(n,i){D(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];n.call(i,e,t)},this)},eachRawSeries:function(t,e){D(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(n,i,r){D(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];e.subType===n&&i.call(r,e,t)},this)},eachRawSeriesByType:function(t,e,n){return D(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){e=x(this._componentsMap.get("series"),t,e);Gs(this,e)},restoreData:function(n){var i=this._componentsMap;Gs(this,i.get("series"));var r=[];i.each(function(t,e){r.push(e)}),_s.topologicalTravel(r,_s.getAllClassMainTypes(),function(e,t){D(i.get(e),function(t){"series"===e&&function(t,e){if(e){var n=e.seiresIndex,i=e.seriesId,e=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=e&&t.name!==e}}(t,n)||t.restoreData()})})}});function Gs(t,e){t._seriesIndicesMap=Z(t._seriesIndices=b(e,function(t){return t.componentIndex})||[])}function qs(t,e){return e.hasOwnProperty("subType")?x(t,function(t){return t.subType===e.subType}):t}_(Hs,Ms);var Xs=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Ys(e){D(Xs,function(t){this[t]=w(e[t],e)},this)}var Us={};function js(){this._coordinateSystems=[]}js.prototype={constructor:js,create:function(n,i){var r=[];D(Us,function(t,e){t=t.create(n,i);r=r.concat(t||[])}),this._coordinateSystems=r},update:function(e,n){D(this._coordinateSystems,function(t){t.update&&t.update(e,n)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},js.register=function(t,e){Us[t]=e},js.get=function(t){return Us[t]};var Zs=D,$s=T,Qs=b,Ks=f,Js=/^(min|max)?(.+)$/;function tl(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}tl.prototype={constructor:tl,setOption:function(t,e){t&&D(ki(t.series),function(t){t&&t.data&&N(t.data)&&Y(t.data)}),t=$s(t,!0);var r,n=this._optionBackup,t=function(t,n,i){var e,r,a=[],o=[],s=t.timeline;t.baseOption&&(r=t.baseOption);(s||t.options)&&(r=r||{},a=(t.options||[]).slice());{var l;t.media&&(r=r||{},l=t.media,Zs(l,function(t){t&&t.option&&(t.query?o.push(t):e=e||t)}))}r=r||t;r.timeline||(r.timeline=s);return Zs([r].concat(a).concat(b(o,function(t){return t.option})),function(e){Zs(n,function(t){t(e,i)})}),{baseOption:r,timelineOptions:a,mediaDefault:e,mediaList:o}}.call(this,t,e,!n);this._newBaseOption=t.baseOption,n?(r=n.baseOption,e=t.baseOption,Zs(e=e||{},function(t,e){var n,i;null!=t&&(n=r[e],_s.hasClass(e)?(t=ki(t),i=Pi(n=ki(n),t),r[e]=Qs(i,function(t){return t.option&&t.exist?Ks(t.exist,t.option,!0):t.exist||t.option})):r[e]=Ks(n,t,!0))}),t.timelineOptions.length&&(n.timelineOptions=t.timelineOptions),t.mediaList.length&&(n.mediaList=t.mediaList),t.mediaDefault&&(n.mediaDefault=t.mediaDefault)):this._optionBackup=t},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=Qs(e.timelineOptions,$s),this._mediaList=Qs(e.mediaList,$s),this._mediaDefault=$s(e.mediaDefault),this._currentMediaIndices=[],$s(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;return!n.length||(t=t.getComponent("timeline"))&&(e=$s(n[t.getCurrentIndex()],!0)),e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,a=[],o=[];if(!i.length&&!r)return o;for(var s,l,h=0,u=i.length;h<u;h++)!function(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return D(t,function(t,e){var n=e.match(Js);n&&n[1]&&n[2]&&(e=n[1],n=n[2].toLowerCase(),n=i[n],t=t,("min"===(e=e)?t<=n:"max"===e?n<=t:n===t)||(r=!1))}),r}(i[h].query,e,n)||a.push(h);return(a=!a.length&&r?[-1]:a).length&&(s=a,l=this._currentMediaIndices,s.join(",")!==l.join(","))&&(o=Qs(a,function(t){return $s((-1===t?r:i[t]).option)})),this._currentMediaIndices=a,o}};var el=D,nl=O,il=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function rl(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=il.length;n<i;n++){var r=il[n],a=e.normal,o=e.emphasis;a&&a[r]&&(t[r]=t[r]||{},t[r].normal?f(t[r].normal,a[r]):t[r].normal=a[r],a[r]=null),o&&o[r]&&(t[r]=t[r]||{},t[r].emphasis?f(t[r].emphasis,o[r]):t[r].emphasis=o[r],o[r]=null)}}function al(t,e,n){var i,r;t&&t[e]&&(t[e].normal||t[e].emphasis)&&(i=t[e].normal,r=t[e].emphasis,i&&(n?(t[e].normal=t[e].emphasis=null,k(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r))}function ol(t){al(t,"itemStyle"),al(t,"lineStyle"),al(t,"areaStyle"),al(t,"label"),al(t,"labelLine"),al(t,"upperLabel"),al(t,"edgeLabel")}function sl(t,e){var n=nl(t)&&t[e],i=nl(n)&&n.textStyle;if(i)for(var r=0,a=Ai.length;r<a;r++){e=Ai[r];i.hasOwnProperty(e)&&(n[e]=i[e])}}function ll(t){t&&(ol(t),sl(t,"label"),t.emphasis&&sl(t.emphasis,"label"))}function hl(t){return A(t)?t:t?[t]:[]}function ul(t){return(A(t)?t[0]:t)||{}}function cl(e,t){el(hl(e.series),function(t){nl(t)&&function(t){if(nl(t)){rl(t),ol(t),sl(t,"label"),sl(t,"upperLabel"),sl(t,"edgeLabel"),t.emphasis&&(sl(t.emphasis,"label"),sl(t.emphasis,"upperLabel"),sl(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(rl(e),ll(e));var n=t.markLine;n&&(rl(n),ll(n));var i=t.markArea;i&&ll(i);var r=t.data;if("graph"===t.type){var r=r||t.nodes,a=t.links||t.edges;if(a&&!N(a))for(var o=0;o<a.length;o++)ll(a[o]);D(t.categories,function(t){ol(t)})}if(r&&!N(r))for(o=0;o<r.length;o++)ll(r[o]);if((e=t.markPoint)&&e.data)for(var s=e.data,o=0;o<s.length;o++)ll(s[o]);if((n=t.markLine)&&n.data)for(var l=n.data,o=0;o<l.length;o++)A(l[o])?(ll(l[o][0]),ll(l[o][1])):ll(l[o]);"gauge"===t.type?(sl(t,"axisLabel"),sl(t,"title"),sl(t,"detail")):"treemap"===t.type?(al(t.breadcrumb,"itemStyle"),D(t.levels,function(t){ol(t)})):"tree"===t.type&&ol(t.leaves)}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),el(n,function(t){el(hl(e[t]),function(t){t&&(sl(t,"axisLabel"),sl(t.axisPointer,"label"))})}),el(hl(e.parallel),function(t){t=t&&t.parallelAxisDefault;sl(t,"axisLabel"),sl(t&&t.axisPointer,"label")}),el(hl(e.calendar),function(t){al(t,"itemStyle"),sl(t,"dayLabel"),sl(t,"monthLabel"),sl(t,"yearLabel")}),el(hl(e.radar),function(t){sl(t,"name")}),el(hl(e.geo),function(t){nl(t)&&(ll(t),el(hl(t.regions),function(t){ll(t)}))}),el(hl(e.timeline),function(t){ll(t),al(t,"label"),al(t,"itemStyle"),al(t,"controlStyle",!0);t=t.data;A(t)&&D(t,function(t){O(t)&&(al(t,"label"),al(t,"itemStyle"))})}),el(hl(e.toolbox),function(t){al(t,"iconStyle"),el(t.feature,function(t){al(t,"iconStyle")})}),sl(ul(e.axisPointer),"label"),sl(ul(e.tooltip).axisPointer,"label")}function dl(e){D(fl,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var fl=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],pl=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],gl=function(e,t){cl(e,t),e.series=ki(e.series),D(e.series,function(t){var e,n;O(t)&&("pie"!==(e=t.type)&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e&&null!=(n=function(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&null!=(n=n&&n[e[i]]);i++);return n}(t,"pointer.color"))&&function(t,e,n,i){e=e.split(",");for(var r,a=t,o=0;o<e.length-1;o++)null==a[r=e[o]]&&(a[r]={}),a=a[r];!i&&null!=a[e[o]]||(a[e[o]]=n)}(t,"itemStyle.normal.color",n),dl(t))}),e.dataRange&&(e.visualMap=e.dataRange),D(pl,function(t){t=e[t];t&&D(t=!A(t)?[t]:t,function(t){dl(t)})})};function ml(g){D(g,function(h,u){var c=[],d=[NaN,NaN],t=[h.stackResultDimension,h.stackedOverDimension],f=h.data,p=h.isStackedByIndex,t=f.map(t,function(t,e,n){var i,r,a=f.get(h.stackedDimension,n);if(isNaN(a))return d;p?r=f.getRawIndex(n):i=f.get(h.stackedByDimension,n);for(var o=NaN,s=u-1;0<=s;s--){var l=g[s];if(0<=(r=!p?l.data.rawIndexOf(l.stackedByDimension,i):r)){l=l.data.getByRawIndex(l.stackResultDimension,r);if(0<=a&&0<l||a<=0&&l<0){a+=l,o=l;break}}}return c[0]=a,c[1]=o,c});f.hostModel.setData(t),h.data=t})}function vl(t,e){Ns.isInstance(t)||(t=Ns.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===Ps&&(this._offset=0,this._dimSize=e,this._data=n),C(this,yl[i===ks?i+"_"+t.seriesLayoutBy:i])}Ut=vl.prototype;Ut.pure=!1;var yl={arrayRows_column:{pure:Ut.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:wl},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var r=n[i];e.push(r?r[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:_l,getItem:xl,appendData:wl},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,t=this._data[t];return t?t.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var r=this._data[n[i].name];e.push(r?r[t]:null)}return e},appendData:function(t){var r=this._data;D(t,function(t,e){for(var n=r[e]||(r[e]=[]),i=0;i<(t||[]).length;i++)n.push(t[i])})}},original:{count:_l,getItem:xl,appendData:wl},typedArray:{persistent:!(Ut.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var n=this._dimSize*t,i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function _l(){return this._data.length}function xl(t){return this._data[t]}function wl(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var bl={arrayRows:Ml,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:Ml,original:function(t,e,n,i){t=Li(t);return null!=n&&t instanceof Array?t[n]:t},typedArray:Ml};function Ml(t,e,n,i){return null!=n?t[n]:t}var Sl={arrayRows:Il,objectRows:function(t,e,n,i){return Tl(t[e],this._dimensionInfos[e])},keyedColumns:Il,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return this._rawData.pure||(!Ii(t=t)||t instanceof Array)||(this.hasItemOption=!0),Tl(r instanceof Array?r[i]:r,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}};function Il(t,e,n,i){return Tl(t[i],this._dimensionInfos[e])}function Tl(t,e){var n=e&&e.type;if("ordinal"!==n)return null==(t="time"===n&&"number"!=typeof t&&null!=t&&"-"!==t?+Zo(t):t)||""===t?NaN:+t;e=e&&e.ordinalMeta;return e?e.parseAndCollect(t):t}function Cl(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r,a,o=t.getProvider().getSource().sourceFormat,n=t.getDimensionInfo(n);return n&&(r=n.name,a=n.index),bl[o](i,e,a,r)}}}var kl=/\{@(.+?)\}/g,$t={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),a=n.getName(t),o=n.getRawDataItem(t),s=n.getItemVisual(t,"color"),l=this.ecModel.getComponent("tooltip"),n=l&&l.get("renderMode"),l="auto"===(t=n)?v.domSupported?"html":"richText":t||"html",n=this.mainType,t="series"===n;return{componentType:n,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:t?this.subType:null,seriesIndex:this.seriesIndex,seriesId:t?this.id:null,seriesName:t?this.name:null,name:a,dataIndex:r,data:o,dataType:e,value:i,color:s,marker:as({color:s,renderMode:l}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(i,t,e,n,r){t=t||"normal";var a=this.getData(e),o=a.getItemModel(i),e=this.getDataParams(i,e);null!=n&&e.value instanceof Array&&(e.value=e.value[n]);r=o.get("normal"===t?[r||"label","formatter"]:[t,r||"label","formatter"]);return"function"==typeof r?(e.status=t,r(e)):"string"==typeof r?function(t,e,n){var i=(e=!A(e)?[e]:e).length;if(!i)return"";for(var r=e[0].$vars||[],a=0;a<r.length;a++){var o=rs[a];t=t.replace(is(o),is(o,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var h=e[s][r[l]];t=t.replace(is(rs[l],s),n?ns(h):h)}return t}(r,e).replace(kl,function(t,e){var n=e.length;return"["===e.charAt(0)&&"]"===e.charAt(n-1)&&(e=+e.slice(1,n-1)),Cl(a,i,e)}):void 0},getRawValue:function(t,e){return Cl(this.getData(e),t)},formatTooltip:function(){}};function Dl(t){return new Al(t)}function Al(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}Ie=Al.prototype;Ie.perform=function(t){var e,n=this._upstream,i=t&&t.skip;this._dirty&&n&&((a=this.context).data=a.outputData=n.context.outputData),this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var r=l(this._modBy),a=this._modDataCount||0,o=l(t&&t.modBy),s=t&&t.modDataCount||0;function l(t){return t=!(1<=t)?1:t}r===o&&a===s||(e="reset"),!this._dirty&&"reset"!==e||(this._dirty=!1,f=function(t,e){var n,i;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(i=n.forceFirstProgress,n=n.progress),A(n)&&!n.length&&(n=null));t._progress=n,t._modBy=t._modDataCount=null;t=t._downstream;return t&&t.dirty(),i}(this,i)),this._modBy=o,this._modDataCount=s;t=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,u=Math.min(null!=t?this._dueIndex+t:1/0,this._dueEnd);if(!i&&(f||h<u)){var c=this._progress;if(A(c))for(var d=0;d<c.length;d++)Vl(this,c[d],h,u,o,s);else Vl(this,c,h,u,o,s)}this._dueIndex=u;var f=null!=this._settedOutputEnd?this._settedOutputEnd:u;this._outputDueEnd=f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var Ll,Pl,Ol,El,Nl,Bl,Rl=Bl={reset:function(t,e,n,i){Pl=t,Ll=e,Ol=n,El=i,Nl=Math.ceil(El/Ol),Bl.next=1<Ol&&0<El?Fl:zl}};function zl(){return Pl<Ll?Pl++:null}function Fl(){var t=Pl%Nl*Ol+Math.ceil(Pl/Nl),t=Ll<=Pl?null:t<El?t:Pl;return Pl++,t}function Vl(t,e,n,i,r,a){Rl.reset(n,i,r,a),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:Rl.next},t.context)}Ie.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Ie.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Ie.pipe=function(t){this._downstream===t&&!this._dirty||((this._downstream=t)._upstream=this,t.dirty())},Ie.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Ie.getUpstream=function(){return this._upstream},Ie.getDownstream=function(){return this._downstream},Ie.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var Wl=Bi(),Hl=_s.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Dl({count:ql,reset:Xl}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),Rs(this);n=this.getInitialData(t,n);Ul(n,this),this.dataTask.context.data=n,Wl(this).dataBeforeProcessed=n,Gl(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?ps(t):{},r=this.subType;_s.hasClass(r),f(t,e.getTheme().get(this.subType)),f(t,this.getDefaultOption()),Di(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&fs(t,i,n)},mergeOption:function(t,e){t=f(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&fs(this.option,t,n),Rs(this);e=this.getInitialData(t,e);Ul(e,this),this.dataTask.dirty(),this.dataTask.context.data=e,Wl(this).dataBeforeProcessed=e,Gl(this)},fillDataTextStyle:function(t){if(t&&!N(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Di(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=Zl(this);if(e){e=e.context.data;return null==t?e:e.getLinkedData(t)}return Wl(this).data},setData:function(t){var e,n=Zl(this);n&&((e=n.context).data!==t&&n.modifyOutputEnd&&n.setOutputEnd(t.count()),e.outputData=t,n!==this.dataTask&&(e.data=t)),Wl(this).data=t},getSource:function(){return Bs(this).source},getRawData:function(){return Wl(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(e,a,t,o){var s=this,n="html"===(o=o||"html")?"<br/>":"\n",l="richText"===o,h={},u=0;function i(t){return{renderMode:o,content:ns(Ko(t)),style:h}}var r,c,d,f=this.getData(),p=f.mapDimension("defaultedTooltip",!0),g=p.length,m=this.getRawValue(e),v=A(m),y=(y=O(y=f.getItemVisual(e,"color"))&&y.colorStops?(y.colorStops[0]||{}).color:y)||"transparent";function _(t,e){var n,i,r=f.getDimensionInfo(e);r&&!1!==r.otherDims.tooltip&&(n=r.type,i="sub"+s.seriesIndex+"at"+u,e="string"==typeof(e=as({color:y,type:"subItem",renderMode:o,markerId:i}))?e:e.content,(t=(c?e+ns(r.displayName||"-")+": ":"")+ns("ordinal"===n?t+"":"time"===n?a?"":ss("yyyy/MM/dd hh:mm:ss",t):Ko(t)))&&d.push(t),l&&(h[i]=y,++u))}var x=(1<g||v&&!g?(c=M(r=m,function(t,e,n){n=f.getDimensionInfo(n);return t|(n&&!1!==n.tooltip&&null!=n.displayName)},0),d=[],p.length?D(p,function(t){_(Cl(f,e,t),t)}):D(r,_),r=c?l?"\n":"<br/>":"",r+=d.join(r||", "),{renderMode:o,content:r,style:h}):i(g?Cl(f,e,p[0]):v?m[0]:m)).content,w=s.seriesIndex+"at"+u,g=as({color:y,type:"item",renderMode:o,markerId:w});h[w]=y,++u;v=f.getName(e),w=this.name,w=(w=!Oi(this)?"":w)?ns(w)+(a?": ":n):"",g="string"==typeof g?g:g.content;return{html:a?g+w+x:w+g+(v?ns(v)+": "+x:x),markers:h}},isAnimationEnabled:function(){if(v.node)return!1;var t=this.getShallow("animation");return t=t&&this.getData().count()>this.getShallow("animationThreshold")?!1:t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel;return Ms.getColorFromPalette.call(this,t,e,n)||i.getColorFromPalette(t,e,n)},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Gl(t){var e,n,i=t.name;Oi(t)||(t.name=(t=(e=(t=t).getRawData()).mapDimension("seriesName",!0),n=[],D(t,function(t){t=e.getDimensionInfo(t);t.displayName&&n.push(t.displayName)}),n.join(" ")||i))}function ql(t){return t.model.getRawData().count()}function Xl(t){t=t.model;return t.setData(t.getRawData().cloneShallow()),Yl}function Yl(t,e){t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Ul(e,n){D(e.CHANGABLE_METHODS,function(t){e.wrapMethod(t,S(jl,n))})}function jl(t){t=Zl(t);t&&t.setOutputEnd(this.count())}function Zl(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){e=n.currentTask;return!e||(n=e.agentStubMap)&&(e=n.get(t.uid)),e}}_(Hl,$t),_(Hl,Ms);var $l=function(){this.group=new Fe,this.uid=Vo("viewComponent")};$l.prototype={constructor:$l,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){},filterForExposedEvent:null};ei=$l.prototype;ei.updateView=ei.updateLayout=ei.updateVisual=function(t,e,n,i){},qi($l),Zi($l,{registerWhenExtend:!0});function Ql(){var a=Bi();return function(t){var e=a(t),n=t.pipelineContext,i=e.large,r=e.progressiveRender,t=e.large=n.large,n=e.progressiveRender=n.progressiveRender;return!!(i^t||r^n)&&"reset"}}var Kl=Bi(),Jl=Ql();function th(){this.group=new Fe,this.uid=Vo("viewChart"),this.renderTask=Dl({plan:ih,reset:rh}),this.renderTask.context={view:this}}Zt=th.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){nh(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){nh(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function eh(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var n=0;n<t.childCount();n++)eh(t.childAt(n),e)}function nh(e,t,n){t=Ni(e,t);null!=t?D(ki(t),function(t){eh(e.getItemGraphicEl(t),n)}):e.eachItemGraphicEl(function(t){eh(t,n)})}function ih(t){return Jl(t.model)}function rh(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,t=r&&Kl(r).updateMethod,t=a?"incrementalPrepareRender":t&&o[t]?t:"render";return"render"!==t&&o[t](e,n,i,r),ah[t]}Zt.updateView=Zt.updateLayout=Zt.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},qi(th),Zi(th,{registerWhenExtend:!0}),th.markUpdateMethod=function(t,e){Kl(t).updateMethod=e};var ah={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};function oh(t,n,i){var r,a,o,s,l,h=0,u=0,c=null;function d(){u=(new Date).getTime(),c=null,t.apply(o,s||[])}n=n||0;function e(){r=(new Date).getTime(),o=this,s=arguments;var t=l||n,e=l||i;l=null,a=r-(e?h:u)-t,clearTimeout(c),e?c=setTimeout(d,t):0<=a?d():c=setTimeout(d,-a),h=r}return e.clear=function(){c&&(clearTimeout(c),c=null)},e.debounceNextCall=function(t){l=t},e}var i={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),i=(e.visualColorAccessPath||"itemStyle.color").split("."),r=e.get(i)||e.getColorFromPalette(e.name,null,t.getSeriesCount());if(n.setVisual("color",r),!t.isSeriesFiltered(e)){"function"!=typeof r||r instanceof Fa||n.each(function(t){n.setItemVisual(t,"color",r(e.getDataParams(t)))});return{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e).get(i,!0);null!=n&&t.setItemVisual(e,"color",n)}:null}}}},sh={toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}},lh=function(t,e){var l,h,u,n,c,a=e.getModel("aria");function d(t,e){if("string"!=typeof t)return t;var n=t;return D(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function f(t){var e=a.get(t);if(null!=e)return e;for(var n=t.split("."),i=sh.aria,r=0;r<n.length;++r)i=i[n[r]];return i}a.get("show")&&(a.get("description")?t.setAttribute("aria-label",a.get("description")):(l=0,e.eachSeries(function(t,e){++l},this),h=a.get("data.maxCount")||10,n=a.get("series.maxCount")||10,u=Math.min(l,n),l<1||(n=(n=function(){var t=e.getModel("title").option;t&&t.length&&(t=t[0]);return t&&t.text}())?d(f("general.withTitle"),{title:n}):f("general.withoutTitle"),c=[],n+=d(f(1<l?"series.multiple.prefix":"series.single.prefix"),{seriesCount:l}),e.eachSeries(function(t,e){if(e<u){var n=t.get("name"),e="series."+(1<l?"multiple":"single")+".",n=f(n?e+"withName":e+"withoutName");n=d(n,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:(e=t.subType,sh.series.typeNames[e]||"")});var i=t.getData();(window.data=i).count()>h?n+=d(f("data.partialData"),{displayCnt:h}):n+=f("data.allData");for(var r,a,o=[],s=0;s<i.count();s++)s<h&&(r=i.getName(s),a=Cl(i,s),o.push(d(f(r?"data.withName":"data.withoutName"),{name:r,value:a})));n+=o.join(f("data.separator.middle"))+f("data.separator.end"),c.push(n)}}),n+=c.join(f("series.multiple.separator.middle"))+f("series.multiple.separator.end"),t.setAttribute("aria-label",n))))},hh=Math.PI;function uh(t,e,n,i){this.ecInstance=t,this.api=e,this.unfinished;n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice();this._allHandlers=n.concat(i),this._stageTaskMap=Z()}Ut=uh.prototype;function ch(s,t,l,h,u){var c;function d(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}u=u||{},D(t,function(i,t){var e,n,r,a,o;u.visualType&&u.visualType!==i.visualType||(e=(a=s._stageTaskMap.get(i.uid)).seriesTaskMap,(n=a.overallTask)?((a=n.agentStubMap).each(function(t){d(u,t)&&(t.dirty(),r=!0)}),r&&n.dirty(),dh(n,h),o=s.getPerformArgs(n,u.block),a.each(function(t){t.perform(o)}),c|=n.perform(o)):e&&e.each(function(t,e){d(u,t)&&t.dirty();var n=s.getPerformArgs(t,u.block);n.skip=!i.performRawSeries&&l.isSeriesFiltered(t.context.model),dh(t,h),c|=t.perform(n)}))}),s.unfinished|=c}Ut.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){t=t.overallTask;t&&t.dirty()})},Ut.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,n=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,i=i&&i.modDataCount;return{step:n,modBy:null!=i?Math.ceil(i/n):null,modDataCount:i}}},Ut.getPipeline=function(t){return this._pipelineMap.get(t)},Ut.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),r=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,e=t.get("large")&&i>=t.get("largeThreshold"),i="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:r,modDataCount:i,large:e}},Ut.restorePipelines=function(t){var i=this,r=i._pipelineMap=Z();t.eachSeries(function(t){var e=t.getProgressive(),n=t.uid;r.set(n,{id:n,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:e&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(e||700),count:0}),bh(i,t,t.dataTask)})},Ut.prepareStageTasks=function(){var n=this._stageTaskMap,i=this.ecInstance.getModel(),r=this.api;D(this._allHandlers,function(t){var e=n.get(t.uid)||n.set(t.uid,[]);t.reset&&function(n,i,t,r,a){var o=t.seriesTaskMap||(t.seriesTaskMap=Z()),e=i.seriesType,t=i.getTargetSeries;i.createOnAllSeries?r.eachRawSeries(s):e?r.eachRawSeriesByType(e,s):t&&t(r,a).each(s);function s(t){var e=t.uid,e=o.get(e)||o.set(e,Dl({plan:vh,reset:yh,count:wh}));e.context={model:t,ecModel:r,api:a,useClearVisual:i.isVisual&&!i.isLayout,plan:i.plan,reset:i.reset,scheduler:n},bh(n,t,e)}var l=n._pipelineMap;o.each(function(t,e){l.get(e)||(t.dispose(),o.removeKey(e))})}(this,t,e,i,r),t.overallReset&&function(i,t,e,n,r){var a=e.overallTask=e.overallTask||Dl({reset:fh});a.context={ecModel:n,api:r,overallReset:t.overallReset,scheduler:i};var o=a.agentStubMap=a.agentStubMap||Z(),s=t.seriesType,e=t.getTargetSeries,l=!0,h=t.modifyOutputEnd;s?n.eachRawSeriesByType(s,u):e?e(n,r).each(u):(l=!1,D(n.getSeries(),u));function u(t){var e=t.uid,n=o.get(e);n||(n=o.set(e,Dl({reset:ph,onDirty:mh})),a.dirty()),n.context={model:t,overallProgress:l,modifyOutputEnd:h},n.agent=a,n.__block=l,bh(i,t,n)}var c=i._pipelineMap;o.each(function(t,e){c.get(e)||(t.dispose(),a.dirty(),o.removeKey(e))})}(this,t,e,i,r)},this)},Ut.prepareView=function(t,e,n,i){var r=t.renderTask,a=r.context;a.model=e,a.ecModel=n,a.api=i,r.__block=!t.incrementalPrepareRender,bh(this,e,r)},Ut.performDataProcessorTasks=function(t,e){ch(this,this._dataProcessorHandlers,t,e,{block:!0})},Ut.performVisualTasks=function(t,e,n){ch(this,this._visualHandlers,t,e,n)},Ut.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},Ut.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}}while(e=e.getUpstream())})};var dh=Ut.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function fh(t){t.overallReset(t.ecModel,t.api,t.payload)}function ph(t,e){return t.overallProgress&&gh}function gh(){this.agent.dirty(),this.getDownstream().dirty()}function mh(){this.agent&&this.agent.dirty()}function vh(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function yh(t){t.useClearVisual&&t.data.clearAllVisual();t=t.resetDefines=ki(t.reset(t.model,t.ecModel,t.api,t.payload));return 1<t.length?b(t,function(t,e){return xh(e)}):_h}var _h=xh(0);function xh(a){return function(t,e){var n=e.data,i=e.resetDefines[a];if(i&&i.dataEach)for(var r=t.start;r<t.end;r++)i.dataEach(n,r);else i&&i.progress&&i.progress(t,n)}}function wh(t){return t.data.count()}function bh(t,e,n){e=e.uid,e=t._pipelineMap.get(e);e.head||(e.head=n),e.tail&&e.tail.pipe(n),(e.tail=n).__idxInPipeline=e.count++,n.__pipeline=e}uh.wrapStageHandler=function(t,e){return(t=I(t)?{overallReset:t,seriesType:function(t){Mh=null;try{t(Sh,Ih)}catch(t){}return Mh}(t)}:t).uid=Vo("stageHandler"),e&&(t.visualType=e),t};var Mh,Sh={},Ih={};function Th(t,e){for(var n in e.prototype)t[n]=$}Th(Sh,Hs),Th(Ih,Ys),Sh.eachSeriesByType=Sh.eachRawSeriesByType=function(t){Mh=t},Sh.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Mh=t.subType)};var Ie=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],$t={color:Ie,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Ie]},Ch="#eee",ei=function(){return{axisLine:{lineStyle:{color:Ch}},axisTick:{lineStyle:{color:Ch}},axisLabel:{textStyle:{color:Ch}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Ch}}}},Zt=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Ut={color:Zt,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Ch},crossStyle:{color:Ch}}},legend:{textStyle:{color:Ch}},textStyle:{color:Ch},title:{textStyle:{color:Ch}},toolbox:{iconStyle:{normal:{borderColor:Ch}}},dataZoom:{textStyle:{color:Ch}},visualMap:{textStyle:{color:Ch}},timeline:{lineStyle:{color:Ch},itemStyle:{normal:{color:Zt[1]}},label:{normal:{textStyle:{color:Ch}}},controlStyle:{normal:{color:Ch,borderColor:Ch}}},timeAxis:ei(),logAxis:ei(),valueAxis:ei(),categoryAxis:ei(),line:{symbol:"circle"},graph:{color:Zt},gauge:{title:{textStyle:{color:Ch}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Ut.categoryAxis.splitLine.show=!1,_s.extend({type:"dataset",defaultOption:{seriesLayoutBy:Os,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=Ls;if(N(e))n=Ps;else if(A(e)){0===e.length&&(n=ks);for(var i=0,r=e.length;i<r;i++){var a=e[i];if(null!=a){if(A(a)){n=ks;break}if(O(a)){n=Ds;break}}}}else if(O(e)){for(var o in e)if(e.hasOwnProperty(o)&&P(e[o])){n=As;break}}else if(null!=e)throw new Error("Invalid data");Bs(t).sourceFormat=n}(this)}}),$l.extend({type:"dataset"});aa.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.rx,a=e.ry,o=.5522848*r,e=.5522848*a;t.moveTo(n-r,i),t.bezierCurveTo(n-r,i-e,n-o,i-a,n,i-a),t.bezierCurveTo(n+o,i-a,n+r,i-e,n+r,i),t.bezierCurveTo(n+r,i+e,n+o,i+a,n,i+a),t.bezierCurveTo(n-o,i+a,n-r,i+e,n-r,i),t.closePath()}});function kh(t){for(9===(t=L(t)?(new DOMParser).parseFromString(t,"text/xml"):t).nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var Dh=Z(),Ah=function(t,e,n){n=A(e)?e:e.svg?[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),[{type:"geoJSON",source:e,specialAreas:n}]);return D(n,function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,Ph[e])(t)}),Dh.set(t,n)},Lh=function(t){return Dh.get(t)},Ph={geoJSON:function(t){var e=t.source;t.geoJSON=L(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=kh(t.source)}},Oh=G,Eh=D,Nh=I,Bh=O,Rh=_s.parseClassType,Ie={PROCESSOR:{FILTER:1e3,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,GLOBAL:2e3,CHART:3e3,COMPONENT:4e3,BRUSH:5e3}},zh="__flagInMainProcess",Fh="__optionUpdated",Vh=/^[a-zA-Z0-9_]+$/;function Wh(i){return function(t,e,n){t=t&&t.toLowerCase(),ft.prototype[i].call(this,t,e,n)}}function Hh(){ft.call(this)}function Gh(t,e,n){n=n||{},"string"==typeof e&&(e=du[e]),this.id,this.group,this._dom=t;n=this._zr=bi(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=oh(w(n.flush,n),17),(e=T(e))&&gl(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new js;var i,r,a,e=this._api=(e=(i=this)._coordSysMgr,C(new Ys(i),{getCoordinateSystems:w(e.getCoordinateSystems,e),getComponentByElement:function(t){for(;t;){var e=t.__ecComponentInfo;if(null!=e)return i._model.getComponent(e.mainType,e.index);t=t.parent}}}));function o(t,e){return t.__prio-e.__prio}Ue(cu,o),Ue(lu,o),this._scheduler=new uh(this,e,lu,cu),ft.call(this,this._ecEventProcessor=new au),this._messageCenter=new Hh,this._initEvents(),this.resize=w(this.resize,this),this._pendingActions=[],n.animation.on("frame",this._onframe,this),a=this,(r=n).on("rendered",function(){a.trigger("rendered"),!r.animation.isFinished()||a[Fh]||a._scheduler.unfinished||a._pendingActions.length||a.trigger("finished")}),Y(this)}Hh.prototype.on=Wh("on"),Hh.prototype.off=Wh("off"),Hh.prototype.one=Wh("one"),_(Hh,ft);ei=Gh.prototype;function qh(t,e,n){var i,r=this._model,a=this._coordSysMgr.getCoordinateSystems();e=zi(r,e);for(var o=0;o<a.length;o++){var s=a[o];if(s[t]&&null!=(i=s[t](r,e,n)))return i}}ei._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[Fh]){var e=this[Fh].silent;this[zh]=!0,Yh(this),Xh.update.call(this),this[zh]=!1,this[Fh]=!1,$h.call(this,e),Qh.call(this,e)}else if(t.unfinished){var n=1,i=this._model,r=this._api;t.unfinished=!1;do{var a=+new Date}while(t.performSeriesTasks(i),t.performDataProcessorTasks(i),jh(this,i),t.performVisualTasks(i),eu(this,this._model,0,"remain"),0<(n-=+new Date-a)&&t.unfinished);t.unfinished||this._zr.flush()}}},ei.getDom=function(){return this._dom},ei.getZr=function(){return this._zr},ei.setOption=function(t,e,n){var i,r,a;Bh(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[zh]=!0,this._model&&!e||(r=new tl(this._api),a=this._theme,(e=this._model=new Hs(null,null,a,r)).scheduler=this._scheduler,e.init(null,null,a,r)),this._model.setOption(t,hu),n?(this[Fh]={silent:i},this[zh]=!1):(Yh(this),Xh.update.call(this),this._zr.flush(),this[Fh]=!1,this[zh]=!1,$h.call(this,i),Qh.call(this,i))},ei.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},ei.getModel=function(){return this._model},ei.getOption=function(){return this._model&&this._model.getOption()},ei.getWidth=function(){return this._zr.getWidth()},ei.getHeight=function(){return this._zr.getHeight()},ei.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},ei.getRenderedCanvas=function(t){if(v.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},ei.getSvgDataUrl=function(){if(v.svgSupported){var t=this._zr;return D(t.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),t.painter.pathToDataUrl()}},ei.getDataURL=function(t){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;Eh(e,function(t){n.eachComponent({mainType:t},function(t){t=r._componentsMap[t.__viewId];t.group.ignore||(i.push(t),t.group.ignore=!0)})});t="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Eh(i,function(t){t.group.ignore=!1}),t},ei.getConnectedDataURL=function(i){if(v.canvasSupported){var r=this.group,a=Math.min,o=Math.max;if(gu[r]){var s=1/0,l=1/0,h=-1/0,u=-1/0,c=[],e=i&&i.pixelRatio||1;D(pu,function(t,e){var n;t.group===r&&(n=t.getRenderedCanvas(T(i)),t=t.getDom().getBoundingClientRect(),s=a(t.left,s),l=a(t.top,l),h=o(t.right,h),u=o(t.bottom,u),c.push({dom:n,left:t.left,top:t.top}))});var t=(h*=e)-(s*=e),n=(u*=e)-(l*=e),d=p();d.width=t,d.height=n;var f=bi(d);return Eh(c,function(t){t=new ii({style:{x:t.left*e-s,y:t.top*e-l,image:t.dom}});f.add(t)}),f.refreshImmediately(),d.toDataURL("image/"+(i&&i.type||"png"))}return this.getDataURL(i)}},ei.convertToPixel=S(qh,"convertToPixel"),ei.convertFromPixel=S(qh,"convertFromPixel"),ei.containPixel=function(t,i){var r;return D(t=zi(this._model,t),function(t,n){0<=n.indexOf("Models")&&D(t,function(t){var e=t.coordinateSystem;e&&e.containPoint?r|=!!e.containPoint(i):"seriesModels"!==n||(e=this._chartsMap[t.__viewId])&&e.containPoint&&(r|=e.containPoint(i,t))},this)},this),!!r},ei.getVisual=function(t,e){var n=(t=zi(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),t=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=t?n.getItemVisual(t,e):n.getVisual(e)},ei.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},ei.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var Xh={prepareAndUpdate:function(t){Yh(this),Xh.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,a=this._scheduler;e&&(a.restoreData(e,t),a.performSeriesTasks(e),r.create(e,n),a.performDataProcessorTasks(e,t),jh(this,e),r.update(e,n),Jh(e),a.performVisualTasks(e,t),tu(this,e,n,t),t=e.get("backgroundColor")||"transparent",v.canvasSupported?i.setBackgroundColor(t):(t=ue(i=le(t),"rgb"),0===i[3]&&(t="transparent")),nu(e,n))},updateTransform:function(i){var r,n,a=this._model,o=this,s=this._api;a&&(r=[],a.eachComponent(function(t,e){var n=o.getViewOfComponentModel(e);n&&n.__alive&&(!n.updateTransform||(e=n.updateTransform(e,a,s,i))&&e.update)&&r.push(n)}),n=Z(),a.eachSeries(function(t){var e=o._chartsMap[t.__viewId];(!e.updateTransform||(e=e.updateTransform(t,a,s,i))&&e.update)&&n.set(t.uid,1)}),Jh(a),this._scheduler.performVisualTasks(a,i,{setDirty:!0,dirtyMap:n}),eu(o,a,0,i,n),nu(a,this._api))},updateView:function(t){var e=this._model;e&&(th.markUpdateMethod(t,"updateView"),Jh(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),tu(this,this._model,this._api,t),nu(e,this._api))},updateVisual:function(t){Xh.update.call(this,t)},updateLayout:function(t){Xh.update.call(this,t)}};function Yh(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),Kh(t,"component",e,n),Kh(t,"chart",e,n),n.plan()}function Uh(e,n,i,r,t){var a,o,s=e._model;function l(t){t&&t.__alive&&t[n]&&t[n](t.__model,s,e._api,i)}r?((a={})[r+"Id"]=i[r+"Id"],a[r+"Index"]=i[r+"Index"],a[r+"Name"]=i[r+"Name"],a={mainType:r,query:a},t&&(a.subType=t),null!=(o=i.excludeSeriesId)&&(o=Z(ki(o))),s&&s.eachComponent(a,function(t){o&&null!=o.get(t.id)||l(e["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},e)):Eh(e._componentsViews.concat(e._chartsViews),l)}function jh(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,n[t.__viewId])})}function Zh(e,t){var n=e.type,i=e.escapeConnect,r=ou[n],a=r.actionInfo,o=(s=(a.update||"update").split(":")).pop(),s=null!=s[0]&&Rh(s[0]);this[zh]=!0;var l=[e],h=!1;e.batch&&(h=!0,l=b(e.batch,function(t){return(t=k(C({},t),e)).batch=null,t}));var u,c=[],d="highlight"===n||"downplay"===n;Eh(l,function(t){(u=(u=r.action(t,this._model,this._api))||C({},t)).type=a.event||u.type,c.push(u),d?Uh(this,o,t,"series"):s&&Uh(this,o,t,s.main,s.sub)},this),"none"===o||d||s||(this[Fh]?(Yh(this),Xh.update.call(this,e),this[Fh]=!1):Xh[o].call(this,e)),u=h?{type:a.event||n,escapeConnect:i,batch:c}:c[0],this[zh]=!1,t||this._messageCenter.trigger(u.type,u)}function $h(t){for(var e=this._pendingActions;e.length;){var n=e.shift();Zh.call(this,n,t)}}function Qh(t){t||this.trigger("updated")}function Kh(t,e,r,a){for(var o="component"===e,s=o?t._componentsViews:t._chartsViews,l=o?t._componentsMap:t._chartsMap,h=t._zr,u=t._api,n=0;n<s.length;n++)s[n].__alive=!1;function i(t){var e,n="_ec_"+t.id+"_"+t.type,i=l[n];i||(e=Rh(t.type),(i=new(o?$l.getClass(e.main,e.sub):th.getClass(e.sub))).init(r,u),l[n]=i,s.push(i),h.add(i.group)),t.__viewId=i.__id=n,i.__alive=!0,i.__model=t,i.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},o||a.prepareView(i,t,r,u)}o?r.eachComponent(function(t,e){"series"!==t&&i(e)}):r.eachSeries(i);for(n=0;n<s.length;){var c=s[n];c.__alive?n++:(o||c.renderTask.dispose(),h.remove(c.group),c.dispose(r,u),s.splice(n,1),delete l[c.__id],c.__id=c.group.__ecComponentInfo=null)}}function Jh(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function tu(t,e,n,i){var r,a,o,s,l;r=t,a=e,o=n,s=i,Eh(l||r._componentsViews,function(t){var e=t.__model;t.render(e,a,o,s),ru(e,t)}),Eh(t._chartsViews,function(t){t.__alive=!1}),eu(t,e,0,i),Eh(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function eu(r,t,e,a,o){var s,n,i,l,h=r._scheduler;t.eachSeries(function(t){var e=r._chartsMap[t.__viewId];e.__alive=!0;var n,i=e.renderTask;h.updatePayload(i,a),o&&o.get(t.uid)&&i.dirty(),s|=i.perform(h.getPerformArgs(i)),e.group.silent=!!t.get("silent"),ru(t,e),e=e,n=t.get("blendMode")||null,e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}),h.unfinished|=s,n=r._zr,i=t,n=n.storage,l=0,n.traverse(function(t){t.isGroup||l++}),l>i.get("hoverLayerThreshold")&&!v.node&&n.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)}),lh(r._zr.dom,t)}function nu(e,n){Eh(uu,function(t){t(e,n)})}ei.resize=function(t){this._zr.resize(t);var e=this._model;this._loadingFX&&this._loadingFX.resize(),e&&(e=e.resetOption("media"),t=t&&t.silent,this[zh]=!0,e&&Yh(this),Xh.update.call(this),this[zh]=!1,$h.call(this,t),Qh.call(this,t))},ei.showLoading=function(t,e){Bh(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),fu[t]&&(t=fu[t](this._api,e),e=this._zr,this._loadingFX=t,e.add(t))},ei.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},ei.makeActionFromEvent=function(t){var e=C({},t);return e.type=su[t.type],e},ei.dispatchAction=function(t,e){Bh(e)||(e={silent:!!e}),ou[t.type]&&this._model&&(this[zh]?this._pendingActions.push(t):(Zh.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&v.browser.weChat&&this._throttledZrFlush(),$h.call(this,e.silent),Qh.call(this,e.silent)))},ei.appendData=function(t){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0},ei.on=Wh("on"),ei.off=Wh("off"),ei.one=Wh("one");var iu=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function ru(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))})}function au(){this.eventInfo}ei._initEvents=function(){Eh(iu,function(o){function t(t){var e,n,i,r=this.getModel(),a=t.target;"globalout"===o?e={}:a&&null!=a.dataIndex?e=(i=a.dataModel||r.getSeriesByIndex(a.seriesIndex))&&i.getDataParams(a.dataIndex,a.dataType,a)||{}:a&&a.eventData&&(e=C({},a.eventData)),e&&(n=e.componentType,i=e.componentIndex,"markLine"!==n&&"markPoint"!==n&&"markArea"!==n||(n="series",i=e.seriesIndex),i=(n=n&&null!=i&&r.getComponent(n,i))&&this["series"===n.mainType?"_chartsMap":"_componentsMap"][n.__viewId],e.event=t,e.type=o,this._ecEventProcessor.eventInfo={targetEl:a,packedEvent:e,model:n,view:i},this.trigger(o,e))}t.zrEventfulCallAtLast=!0,this._zr.on(o,t,this)},this),Eh(su,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},ei.isDisposed=function(){return this._disposed},ei.clear=function(){this.setOption({series:[]},!0)},ei.dispose=function(){var e,n;this._disposed||(this._disposed=!0,Vi(this.getDom(),yu,""),e=this._api,n=this._model,Eh(this._componentsViews,function(t){t.dispose(n,e)}),Eh(this._chartsViews,function(t){t.dispose(n,e)}),this._zr.dispose(),delete pu[this.id])},_(Gh,ft),au.prototype={constructor:au,normalizeQuery:function(t){var e,o,s,l={},h={},u={};return L(t)?(e=Rh(t),l.mainType=e.main||null,l.subType=e.sub||null):(o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1},D(t,function(t,e){for(var n=!1,i=0;i<o.length;i++){var r=o[i],a=e.lastIndexOf(r);0<a&&a===e.length-r.length&&("data"!==(a=e.slice(0,a))&&(l.mainType=a,l[r.toLowerCase()]=t,n=!0))}s.hasOwnProperty(e)&&(h[e]=t,n=!0),n||(u[e]=t)})),{cptQuery:l,dataQuery:h,otherQuery:u}},filter:function(t,e,n){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,a=i.packedEvent,o=i.model,s=i.view;if(!o||!s)return!0;var l=e.cptQuery,i=e.dataQuery;return h(l,o,"mainType")&&h(l,o,"subType")&&h(l,o,"index","componentIndex")&&h(l,o,"name")&&h(l,o,"id")&&h(i,a,"name")&&h(i,a,"dataIndex")&&h(i,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,r,a));function h(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},afterTrigger:function(){this.eventInfo=null}};var ou={},su={},lu=[],hu=[],uu=[],cu=[],du={},fu={},pu={},gu={},mu=+new Date,vu=+new Date,yu="_echarts_instance_";function _u(t){gu[t]=!1}Zt=_u;function xu(t){return pu[e=yu,(t=t).getAttribute?t.getAttribute(e):t[e]];var e}function wu(t,e){du[t]=e}function bu(t){hu.push(t)}function Mu(t,e){Cu(lu,t,e,1e3)}function Su(t,e,n){"function"==typeof e&&(n=e,e="");var i=Bh(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,Oh(Vh.test(i)&&Vh.test(e)),ou[i]||(ou[i]={action:n,actionInfo:t}),su[e]=i}function Iu(t,e){Cu(cu,t,e,1e3,"layout")}function Tu(t,e){Cu(cu,t,e,3e3,"visual")}function Cu(t,e,n,i,r){(Nh(e)||Bh(e))&&(n=e,e=i);r=uh.wrapStageHandler(n,r);return r.__prio=e,r.__raw=n,t.push(r),r}function ku(t,e){fu[t]=e}function Du(t){return $l.extend(t)}function Au(t){return Hl.extend(t)}function Lu(t){return th.extend(t)}Tu(2e3,i),bu(gl),Mu(5e3,function(t){var i=Z();t.eachSeries(function(t){var e,n=t.get("stack");n&&(e=i.get(n)||i.set(n,[]),(t={stackResultDimension:(n=t.getData()).getCalculationInfo("stackResultDimension"),stackedOverDimension:n.getCalculationInfo("stackedOverDimension"),stackedDimension:n.getCalculationInfo("stackedDimension"),stackedByDimension:n.getCalculationInfo("stackedByDimension"),isStackedByIndex:n.getCalculationInfo("isStackedByIndex"),data:n,seriesModel:t}).stackedDimension&&(t.isStackedByIndex||t.stackedByDimension)&&(e.length&&n.setCalculationInfo("stackedOnSeries",e[e.length-1].seriesModel),e.push(t)))}),i.each(ml)}),ku("default",function(i,t){k(t=t||{},{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var r=new Ea({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4}),a=new Va({shape:{startAngle:-hh/2,endAngle:-hh/2+.1,r:10},style:{stroke:t.color,lineCap:"round",lineWidth:5},zlevel:t.zlevel,z:10001}),o=new Ea({style:{fill:"none",text:t.text,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*hh/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*hh/2}).delay(300).start("circularInOut");t=new Fe;return t.add(a),t.add(o),t.add(r),t.resize=function(){var t=i.getWidth()/2,e=i.getHeight()/2;a.setShape({cx:t,cy:e});var n=a.shape.r;o.setShape({x:t-n,y:e-n,width:2*n,height:2*n}),r.setShape({x:0,y:0,width:i.getWidth(),height:i.getHeight()})},t.resize(),t}),Su({type:"highlight",event:"highlight",update:"highlight"},$),Su({type:"downplay",event:"downplay",update:"downplay"},$),wu("light",$t),wu("dark",Ut);function Pu(t){return t}function Ou(t,e,n,i,r){this._old=t,this._new=e,this._oldKeyGetter=n||Pu,this._newKeyGetter=i||Pu,this.context=r}function Eu(t,e,n,i,r){for(var a=0;a<t.length;a++){var o="_ec_"+r[i](t[a],a),s=e[o];null==s?(n.push(o),e[o]=a):(s.length||(e[o]=s=[s]),s.push(a))}}Ou.prototype={constructor:Ou,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],r=[];for(Eu(t,{},i,"_oldKeyGetter",this),Eu(e,n,r,"_newKeyGetter",this),a=0;a<t.length;a++)null!=(o=n[s=i[a]])?((h=o.length)?(1===h&&(n[s]=null),o=o.unshift()):n[s]=null,this._update&&this._update(o,a)):this._remove&&this._remove(a);for(var a=0;a<r.length;a++){var o,s=r[a];if(n.hasOwnProperty(s))if(null!=(o=n[s]))if(o.length)for(var l=0,h=o.length;l<h;l++)this._add&&this._add(o[l]);else this._add&&this._add(o)}}};var Nu=Z(["tooltip","label","itemName","itemId","seriesName"]);function Bu(r){var t={},a=t.encode={},o=Z(),s=[],l=[];D(r.dimensions,function(t){var e,i=r.getDimensionInfo(t),n=i.coordDim;n&&(e=a[n],(e=!a.hasOwnProperty(n)?a[n]=[]:e)[i.coordDimIndex]=t,i.isExtraCoord||(o.set(n,1),"ordinal"===(n=i.type)||"time"===n||(s[0]=t)),i.defaultTooltip&&l.push(t)),Nu.each(function(t,e){var n=a[e];a.hasOwnProperty(e)||(n=a[e]=[]);e=i.otherDims[e];null!=e&&!1!==e&&(n[e]=i.name)})});var i=[],h={};o.each(function(t,e){var n=a[e];h[e]=n[0],i=i.concat(n)}),t.dataDimsOnCoord=i,t.encodeFirstDimNotExtra=h;var e=a.label;e&&e.length&&(s=e.slice());e=a.tooltip;return e&&e.length?l=e.slice():l.length||(l=s.slice()),a.defaultedLabel=s,a.defaultedTooltip=l,t}var Ru=O,ei="undefined",zu={float:typeof Float64Array==ei?Array:Float64Array,int:typeof Int32Array==ei?Array:Int32Array,ordinal:Array,number:Array,time:Array},Fu=typeof Uint32Array==ei?Array:Uint32Array,Vu=typeof Int32Array==ei?Array:Int32Array,Wu=typeof Uint16Array==ei?Array:Uint16Array;function Hu(t){return 65535<t._rawCount?Fu:Wu}var Gu=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],qu=["_extent","_approximateExtent","_rawExtent"];function Xu(e,n){D(Gu.concat(n.__wrappedMethods||[]),function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e.__wrappedMethods=n.__wrappedMethods,D(qu,function(t){e[t]=T(n[t])}),e._calculationInfo=C(n._calculationInfo)}function Yu(t,e){t=t||["x","y"];for(var n={},i=[],r={},a=0;a<t.length;a++){var o=t[a],s=(o=L(o)?{name:o}:o).name;o.type=o.type||"float",o.coordDim||(o.coordDim=s,o.coordDimIndex=0),o.otherDims=o.otherDims||{},i.push(s),(n[s]=o).index=a,o.createInvertedIndices&&(r[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=Bu(this),this._invertedIndicesMap=r,this._calculationInfo={}}i=Yu.prototype;function Uu(t,e,n,i,r){var a=zu[e.type],o=i-1,s=e.name,l=t[s][o];if(l&&l.length<n){for(var h=new a(Math.min(r-o*n,n)),u=0;u<l.length;u++)h[u]=l[u];t[s][o]=h}for(var c=i*n;c<r;c+=n)t[s].push(new a(Math.min(r-c,n)))}function ju(r){var a=r._invertedIndicesMap;D(a,function(t,e){var n=r._dimensionInfos[e].ordinalMeta;if(n){t=a[e]=new Vu(n.categories.length);for(var i=0;i<t.length;i++)t[i]=-1;for(i=0;i<r._count;i++)t[r.get(e,i)]=i}})}function Zu(t,e,n){var i,r,a;return null!=e&&(i=t._chunkSize,r=Math.floor(n/i),e=t.dimensions[e],(r=t._storage[e][r])&&(a=r[n%i],(e=t._dimensionInfos[e].ordinalMeta)&&e.categories.length&&(a=e.categories[a]))),a}function $u(t){return t}function Qu(t){return t<this._count&&0<=t?this._indices[t]:-1}function Ku(t,e){var n=t._idList[e];return n=null==(n=null==n?Zu(t,t._idDimIdx,e):n)?"e\0\0"+e:n}function Ju(t){return t=!A(t)?[t]:t}function tc(t,e){var n=t.dimensions,i=new Yu(b(n,t.getDimensionInfo,t),t.hostModel);Xu(i,t);for(var r=i._storage={},a=t._storage,o=0;o<n.length;o++){var s=n[o];a[s]&&(0<=m(e,s)?(r[s]=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=function(t){var e=t.constructor;return e===Array?t.slice():new e(t)}(t[n]);return e}(a[s]),i._rawExtent[s]=ec(),i._extent[s]=null):r[s]=a[s])}return i}function ec(){return[1/0,-1/0]}i.type="list",i.hasItemOption=!0,i.getDimension=function(t){return t=!isNaN(t)?this.dimensions[t]||t:t},i.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},i.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},i.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];t=n.encode[t];return!0===e?(t||[]).slice():t&&t[e]},i.initData=function(t,e,n){(Ns.isInstance(t)||P(t))&&(t=new vl(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=Sl[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Sl.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},i.getProvider=function(){return this._rawData},i.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);t=e.count();e.persistent||(t+=n),this._initDataFromProvider(n,t)},i.appendValues=function(t,e){for(var n=this._chunkSize,i=this._storage,r=this.dimensions,a=r.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e?e.length:0),h=this._chunkCount,u=0;u<a;u++)o[v=r[u]]||(o[v]=ec()),i[v]||(i[v]=[]),Uu(i,this._dimensionInfos[v],n,h,l),this._chunkCount=i[v].length;for(var c=new Array(a),d=s;d<l;d++){for(var f=d-s,p=Math.floor(d/n),g=d%n,m=0;m<a;m++){var v=r[m],y=this._dimValueGetterArrayRows(t[f]||c,v,f,m);i[v][p][g]=y;var _=o[v];y<_[0]&&(_[0]=y),y>_[1]&&(_[1]=y)}e&&(this._nameList[d]=e[f])}this._rawCount=this._count=l,this._extent={},ju(this)},i._initDataFromProvider=function(t,e){if(!(e<=t)){for(var n,i=this._chunkSize,r=this._rawData,a=this._storage,o=this.dimensions,s=o.length,l=this._dimensionInfos,h=this._nameList,u=this._idList,c=this._rawExtent,d=this._nameRepeatCount={},f=this._chunkCount,p=0;p<s;p++){c[I=o[p]]||(c[I]=ec());var g=l[I];0===g.otherDims.itemName&&(n=this._nameDimIdx=p),0===g.otherDims.itemId&&(this._idDimIdx=p),a[I]||(a[I]=[]),Uu(a,g,i,f,e),this._chunkCount=a[I].length}for(var m=new Array(s),v=t;v<e;v++){for(var y,_,x,w,m=r.getItem(v,m),b=Math.floor(v/i),M=v%i,S=0;S<s;S++){var I,T=a[I=o[S]][b],C=this._dimValueGetter(m,I,v,S);T[M]=C;T=c[I];C<T[0]&&(T[0]=C),C>T[1]&&(T[1]=C)}r.pure||(x=h[v],m&&null==x&&(null!=m.name?h[v]=x=m.name:null==n||(_=a[y=o[n]][b])&&(x=_[M],(w=l[y].ordinalMeta)&&w.categories.length&&(x=w.categories[x]))),null==(w=null==m?null:m.id)&&null!=x&&(d[x]=d[x]||0,0<d[w=x]&&(w+="__ec__"+d[x]),d[x]++),null!=w&&(u[v]=w))}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},ju(this)}},i.count=function(){return this._count},i.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){r=new e(n);for(var i=0;i<n;i++)r[i]=t[i]}else r=new e(t.buffer,0,n)}else for(var r=new(e=Hu(this))(this.count()),i=0;i<r.length;i++)r[i]=i;return r},i.get=function(t,e){if(!(0<=e&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize),e=e%this._chunkSize;return n[t][i][e]},i.getByRawIndex=function(t,e){if(!(0<=e&&e<this._rawCount))return NaN;var n=this._storage[t];if(!n)return NaN;t=Math.floor(e/this._chunkSize),e%=this._chunkSize;return n[t][e]},i._getFast=function(t,e){var n=Math.floor(e/this._chunkSize),e=e%this._chunkSize;return this._storage[t][n][e]},i.getValues=function(t,e){var n=[];A(t)||(e=t,t=this.dimensions);for(var i=0,r=t.length;i<r;i++)n.push(this.get(t[i],e));return n},i.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=this._dimensionInfos,i=0,r=e.length;i<r;i++)if("ordinal"!==n[e[i]].type&&isNaN(this.get(e[i],t)))return!1;return!0},i.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t],n=ec();if(!e)return n;var i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(e=this._extent[t])return e.slice();for(var r=(e=n)[0],a=e[1],o=0;o<i;o++){var s=this._getFast(t,this.getRawIndex(o));s<r&&(r=s),a<s&&(a=s)}return this._extent[t]=e=[r,a]},i.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},i.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},i.getCalculationInfo=function(t){return this._calculationInfo[t]},i.setCalculationInfo=function(t,e){Ru(t)?C(this._calculationInfo,t):this._calculationInfo[t]=e},i.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,i=this.count();n<i;n++){var r=this.get(t,n);isNaN(r)||(e+=r)}return e},i.getMedian=function(t){var n=[];this.each(t,function(t,e){isNaN(t)||n.push(t)});var e=[].concat(n).sort(function(t,e){return t-e}),t=this.count();return 0===t?0:t%2==1?e[(t-1)/2]:(e[t/2]+e[t/2-1])/2},i.rawIndexOf=function(t,e){e=(t&&this._invertedIndicesMap[t])[e];return null==e||isNaN(e)?-1:e},i.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},i.indexOfRawIndex=function(t){if(!this._indices)return t;if(t>=this._rawCount||t<0)return-1;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var a=(i+r)/2|0;if(e[a]<t)i=1+a;else{if(!(e[a]>t))return a;r=a-1}}return-1},i.indicesOfNearest=function(t,e,n){var i=[];if(!this._storage[t])return i;null==n&&(n=1/0);for(var r=Number.MAX_VALUE,a=-1,o=0,s=this.count();o<s;o++){var l=e-this.get(t,o),h=Math.abs(l);l<=n&&h<=r&&((h<r||0<=l&&a<0)&&(r=h,a=l,i.length=0),i.push(o))}return i},i.getRawIndex=$u,i.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var i=this.dimensions[n];e.push(this.get(i,t))}return e},i.getName=function(t){t=this.getRawIndex(t);return this._nameList[t]||Zu(this,this._nameDimIdx,t)||""},i.getId=function(t){return Ku(this,this.getRawIndex(t))},i.each=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;for(var r=(t=b(Ju(t),this.getDimension,this)).length,a=0;a<this.count();a++)switch(r){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var o=0,s=[];o<r;o++)s[o]=this.get(t[o],a);s[o]=a,e.apply(n,s)}}},i.filterSelf=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=b(Ju(t),this.getDimension,this);for(var r=this.count(),a=new(Hu(this))(r),o=[],s=t.length,l=0,h=t[0],u=0;u<r;u++){var c=this.getRawIndex(u);if(0===s)f=e.call(n,u);else if(1===s)var d=this._getFast(h,c),f=e.call(n,d,u);else{for(var p=0;p<s;p++)o[p]=this._getFast(h,c);o[p]=u,f=e.apply(n,o)}f&&(a[l++]=c)}return l<r&&(this._indices=a),this._count=l,this._extent={},this.getRawIndex=this._indices?Qu:$u,this}},i.selectRange=function(t){if(this._count){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);var i=n.length;if(i){var r=this.count(),a=new(Hu(this))(r),o=0,s=n[0],l=t[s][0],h=t[s][1],u=!1;if(!this._indices){var c=0;if(1===i){for(var d=this._storage[n[0]],f=0;f<this._chunkCount;f++)for(var p=d[f],g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++)(l<=(w=p[m])&&w<=h||isNaN(w))&&(a[o++]=c),c++;u=!0}else if(2===i){for(var d=this._storage[s],v=this._storage[n[1]],y=t[n[1]][0],_=t[n[1]][1],f=0;f<this._chunkCount;f++)for(var p=d[f],x=v[f],g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++){var w=p[m],b=x[m];(l<=w&&w<=h||isNaN(w))&&(y<=b&&b<=_||isNaN(b))&&(a[o++]=c),c++}u=!0}}if(!u)if(1===i)for(m=0;m<r;m++){var M=this.getRawIndex(m);(l<=(w=this._getFast(s,M))&&w<=h||isNaN(w))&&(a[o++]=M)}else for(m=0;m<r;m++){for(var S=!0,M=this.getRawIndex(m),f=0;f<i;f++){var I=n[f];((w=this._getFast(e,M))<t[I][0]||w>t[I][1])&&(S=!1)}S&&(a[o++]=this.getRawIndex(m))}return o<r&&(this._indices=a),this._count=o,this._extent={},this.getRawIndex=this._indices?Qu:$u,this}}},i.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]);var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},n=n||i||this),r},i.map=function(t,e,n,i){n=n||i||this;i=tc(this,t=b(Ju(t),this.getDimension,this));i._indices=this._indices,i.getRawIndex=i._indices?Qu:$u;for(var r=i._storage,a=[],o=this._chunkSize,s=t.length,l=this.count(),h=[],u=i._rawExtent,c=0;c<l;c++){for(var d=0;d<s;d++)h[d]=this.get(t[d],c);h[s]=c;var f=e&&e.apply(n,h);if(null!=f){"object"!=typeof f&&(a[0]=f,f=a);for(var p=this.getRawIndex(c),g=Math.floor(p/o),m=p%o,v=0;v<f.length;v++){var y=t[v],_=f[v],x=u[y],y=r[y];y&&(y[g][m]=_),_<x[0]&&(x[0]=_),_>x[1]&&(x[1]=_)}}}return i},i.downSample=function(t,e,n,i){for(var r=tc(this,[t]),a=r._storage,o=[],s=Math.floor(1/e),l=a[t],h=this.count(),u=this._chunkSize,c=r._rawExtent[t],d=new(Hu(this))(h),f=0,p=0;p<h;p+=s){h-p<s&&(o.length=s=h-p);for(var g=0;g<s;g++){var m=this.getRawIndex(p+g),v=Math.floor(m/u);o[g]=l[v][m%u]}var y=n(o),_=this.getRawIndex(Math.min(p+i(o,y)||0,h-1));(l[Math.floor(_/u)][_%u]=y)<c[0]&&(c[0]=y),y>c[1]&&(c[1]=y),d[f++]=_}return r._count=f,r._indices=d,r.getRawIndex=Qu,r},i.getItemModel=function(t){var e=this.hostModel;return new Bo(this.getRawDataItem(t),e,e&&e.ecModel)},i.diff=function(e){var n=this;return new Ou(e?e.getIndices():[],this.getIndices(),function(t){return Ku(e,t)},function(t){return Ku(n,t)})},i.getVisual=function(t){var e=this._visual;return e&&e[t]},i.setVisual=function(t,e){if(Ru(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},i.setLayout=function(t,e){if(Ru(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},i.getLayout=function(t){return this._layout[t]},i.getItemLayout=function(t){return this._itemLayouts[t]},i.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?C(this._itemLayouts[t]||{},e):e},i.clearItemLayouts=function(){this._itemLayouts.length=0},i.getItemVisual=function(t,e,n){t=this._itemVisuals[t],t=t&&t[e];return null!=t||n?t:this.getVisual(e)},i.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},r=this.hasItemVisual;if(this._itemVisuals[t]=i,Ru(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a],r[a]=!0);else i[e]=n,r[e]=!0},i.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};function nc(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType}function ic(t,e,n){Ns.isInstance(e)||(e=Ns.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var i,r,a,o,s=(n.dimsDef||[]).slice(),l=Z(n.encodeDef),h=Z(),u=Z(),c=[],d=(i=e,r=t,a=n.dimCount,o=Math.max(i.dimensionsDetectCount||1,r.length,s.length,a||0),D(r,function(t){t=t.dimsDef;t&&(o=Math.max(o,t.length))}),o),f=0;f<d;f++){var p=s[f]=C({},O(s[f])?s[f]:{name:s[f]}),g=p.name,m=c[f]={otherDims:{}};null!=g&&null==h.get(g)&&(m.name=m.displayName=g,h.set(g,f)),null!=p.type&&(m.type=p.type),null!=p.displayName&&(m.displayName=p.displayName)}l.each(function(t,n){var i;1===(t=ki(t).slice()).length&&t[0]<0?l.set(n,!1):(i=l.set(n,[]),D(t,function(t,e){null!=(t=L(t)?h.get(t):t)&&t<d&&(i[e]=t,y(c[t],n,e))}))});var v=0;function y(t,e,n){null!=Nu.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,u.set(e,!0))}D(t,function(n,t){var i,r,a,e;L(n)?(a=n,n={}):(a=n.name,e=n.ordinalMeta,n.ordinalMeta=null,(n=T(n)).ordinalMeta=e,i=n.dimsDef,r=n.otherDims,n.name=n.coordDim=n.coordDimIndex=n.dimsDef=n.otherDims=null);var o=l.get(a);if(!1!==o){if(!(o=ki(o)).length)for(var s=0;s<(i&&i.length||1);s++){for(;v<c.length&&null!=c[v].coordDim;)v++;v<c.length&&o.push(v++)}D(o,function(t,e){t=c[t];y(k(t,n),a,e),null==t.name&&i&&(O(e=i[e])||(e={name:e}),t.name=t.displayName=e.name,t.defaultTooltip=e.defaultTooltip),r&&k(t.otherDims,r)})}});for(var _,x,w=n.generateCoord,b=null!=(M=n.generateCoordCount),M=w?M||1:0,S=w||"value",I=0;I<d;I++)null==(m=c[I]=c[I]||{}).coordDim&&(m.coordDim=rc(S,u,b),m.coordDimIndex=0,(!w||M<=0)&&(m.isExtraCoord=!0),M--),null==m.name&&(m.name=rc(m.coordDim,h)),null==m.type&&(_=e,x=I,m.name,Vs(_.data,_.sourceFormat,_.seriesLayoutBy,_.dimensionsDefine,_.startIndex,x))&&(m.type="ordinal");return c}function rc(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}i.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(nc,e)),this._graphicEls[t]=e},i.getItemGraphicEl=function(t){return this._graphicEls[t]},i.eachItemGraphicEl=function(n,i){D(this._graphicEls,function(t,e){t&&n&&n.call(i,t,e)})},i.cloneShallow=function(t){var e;return t||(e=b(this.dimensions,this.getDimensionInfo,this),t=new Yu(e,this.hostModel)),t._storage=this._storage,Xu(t,this),this._indices?(e=this._indices.constructor,t._indices=new e(this._indices)):t._indices=null,t.getRawIndex=t._indices?Qu:$u,t},i.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(W(arguments)))})},i.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],i.CHANGABLE_METHODS=["filterSelf","selectRange"];function ac(t,e){return ic((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})}function oc(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function sc(t,e,n){n=n||{},Ns.isInstance(t)||(t=Ns.seriesDataToSource(t));var r,i,a=e.get("coordinateSystem"),a=js.get(a),o=Ss(e),s=(s=o?b(o.coordSysDims,function(t){var e={name:t},t=o.axisMap.get(t);return t&&(t=t.get("type"),e.type="category"===(t=t)?"ordinal":"time"===t?"time":"float"),e}):s)||(a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),s=ac(t,{coordDimensions:s,generateCoord:n.generateCoord});o&&D(s,function(t,e){var n=t.coordDim,n=o.categoryAxisMap.get(n);n&&(null==r&&(r=e),t.ordinalMeta=n.getOrdinalMeta()),null!=t.otherDims.itemName&&(i=!0)}),i||null==r||(s[r].otherDims.itemName=0);var l,h,u,c,d,f,p,g,m,v,y=(n=e,l=s,g=(h=h||{}).byIndex,m=h.stackedCoordDimension,v=!(!n||!n.get("stack")),D(l,function(t,e){L(t)&&(l[e]=t={name:t}),v&&!t.isExtraCoord&&(g||u||!t.ordinalMeta||(u=t),c||"ordinal"===t.type||"time"===t.type||m&&m!==t.coordDim||(c=t))}),!c||g||u||(g=!0),c&&(y="__\0ecstackresult",d="__\0ecstackedover",u&&(u.createInvertedIndices=!0),f=c.coordDim,n=c.type,p=0,D(l,function(t){t.coordDim===f&&p++}),l.push({name:y,coordDim:f,coordDimIndex:p,type:n,isExtraCoord:!0,isCalculationCoord:!0}),p++,l.push({name:d,coordDim:d,coordDimIndex:p,type:n,isExtraCoord:!0,isCalculationCoord:!0})),{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:g,stackedOverDimension:d,stackResultDimension:y}),e=new Yu(s,e);e.setCalculationInfo(y);var y=null!=r&&function(t){if(t.sourceFormat===Cs){t=function(t){var e=0;for(;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=t&&!A(Li(t))}}(t)?function(t,e,n,i){return i===r?n:this.defaultDimValueGetter(t,e,n,i)}:null;return e.hasItemOption=!1,e.initData(t,null,y),e}Hl.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return sc(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var $t=Za({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,e=e.height/2;t.moveTo(n,i-e),t.lineTo(n+r,i+e),t.lineTo(n-r,i+e),t.closePath()}}),Ut=Za({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,e=e.height/2;t.moveTo(n,i-e),t.lineTo(n+r,i),t.lineTo(n,i+e),t.lineTo(n-r,i),t.closePath()}}),ei=Za({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,a=Math.max(r,e.height),o=r/2,s=o*o/(a-o),l=i-a+o+s,h=Math.asin(s/o),u=Math.cos(h)*o,c=Math.sin(h),e=Math.cos(h),r=.6*o,a=.7*o;t.moveTo(n-u,l+s),t.arc(n,l,o,Math.PI-h,2*Math.PI+h),t.bezierCurveTo(n+u-c*r,l+s+e*r,n,i-a,n,i),t.bezierCurveTo(n,i-a,n-u+c*r,l+s+e*r,n-u,l+s),t.closePath()}}),i=Za({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,e=e.y,i=i/3*2;t.moveTo(r,e),t.lineTo(r+i,e+n),t.lineTo(r,e+n/4*3),t.lineTo(r-i,e+n),t.lineTo(r,e),t.closePath()}}),lc={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){i=Math.min(n,i);r.x=t,r.y=e,r.width=i,r.height=i},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},hc={};D({line:Ba,rect:Ea,roundRect:Ea,square:Ea,circle:Sa,diamond:Ut,pin:ei,arrow:i,triangle:$t},function(t,e){hc[e]=new t});var uc=Za({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,n){var i=e.symbolType,r=hc[i];"none"!==e.symbolType&&(r=r||hc[i="rect"],lc[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n))}});function cc(t,e){var n,i;"image"!==this.type&&(n=this.style,(i=this.shape)&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1))}function dc(t,e,n,i,r,a,o){var s=0===t.indexOf("empty");return(r=0===(t=s?t.substr(5,1).toLowerCase()+t.substr(6):t).indexOf("image://")?Qa(t.slice(8),new ze(e,n,i,r),o?"center":"cover"):0===t.indexOf("path://")?$a(t.slice(7),{},new ze(e,n,i,r),o?"center":"cover"):new uc({shape:{symbolType:t,x:e,y:n,width:i,height:r}})).__isEmptyBrush=s,r.setColor=cc,r.setColor(a),r}function fc(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return Cl(t,e,n[0]);if(i){for(var r=[],a=0;a<n.length;a++){var o=Cl(t,e,n[a]);r.push(o)}return r.join(" ")}}function pc(t,e,n){Fe.call(this),this.updateData(t,e,n)}var i=pc.prototype,gc=pc.getSymbolSize=function(t,e){e=t.getItemVisual(e,"symbolSize");return e instanceof Array?e.slice():[+e,+e]};function mc(t){return[t[0]/2,t[1]/2]}function vc(t,e){this.parent.drift(t,e)}i._createSymbol=function(t,e,n,i,r){this.removeAll();r=dc(t,-1,-1,2,2,e.getItemVisual(n,"color"),r);r.attr({z2:100,culling:!0,scale:mc(i)}),r.drift=vc,this._symbolType=t,this.add(r)},i.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},i.getSymbolPath=function(){return this.childAt(0)},i.getScale=function(){return this.childAt(0).scale},i.highlight=function(){this.childAt(0).trigger("emphasis")},i.downplay=function(){this.childAt(0).trigger("normal")},i.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},i.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},i.updateData=function(t,e,n){this.silent=!1;var i,r,a=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,s=gc(t,e),l=a!==this._symbolType;l?(i=t.getItemVisual(e,"symbolKeepAspect"),this._createSymbol(a,t,e,s,i)):((r=this.childAt(0)).silent=!1,ko(r,{scale:mc(s)},o,e)),this._updateCommon(t,e,s,n),l&&(r=this.childAt(0),l=n&&n.fadeIn,n={scale:r.scale.slice()},l&&(n.style={opacity:r.style.opacity}),r.scale=[0,0],l&&(r.style.opacity=0),Do(r,n,o,e)),this._seriesModel=o};var yc=["itemStyle"],_c=["emphasis","itemStyle"],xc=["label"],wc=["emphasis","label"];function bc(){co(this)||Sc.call(this)}function Mc(){co(this)||Ic.call(this)}function Sc(){var t,e;this.incremental||this.useHoverLayer||(e=(t=this.__symbolOriginalScale)[1]/t[0],this.animateTo({scale:[Math.max(1.1*t[0],t[0]+3),Math.max(1.1*t[1],t[1]+3*e)]},400,"elasticOut"))}function Ic(){this.incremental||this.useHoverLayer||this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Tc(t){this.group=new Fe,this._symbolCtor=t||pc}i._updateCommon=function(n,t,e,i){var r=this.childAt(0),a=n.hostModel,o=n.getItemVisual(t,"color");"image"!==r.type&&r.useStyle({strokeNoScale:!0});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,h=i&&i.symbolRotate,u=i&&i.symbolOffset,c=i&&i.labelModel,d=i&&i.hoverLabelModel,f=i&&i.hoverAnimation,p=i&&i.cursorStyle;!i||n.hasItemOption?(s=(g=i&&i.itemModel?i.itemModel:n.getItemModel(t)).getModel(yc).getItemStyle(["color"]),l=g.getModel(_c).getItemStyle(),h=g.getShallow("symbolRotate"),u=g.getShallow("symbolOffset"),c=g.getModel(xc),d=g.getModel(wc),f=g.getShallow("hoverAnimation"),p=g.getShallow("cursor")):l=C({},l);var g=r.style;r.attr("rotation",(h||0)*Math.PI/180||0),u&&r.attr("position",[Go(u[0],e[0]),Go(u[1],e[1])]),p&&r.attr("cursor",p),r.setColor(o,i&&i.symbolInnerColor),r.setStyle(s);p=n.getItemVisual(t,"opacity");null!=p&&(g.opacity=p);s=n.getItemVisual(t,"liftZ"),p=r.__z2Origin;null!=s?null==p&&(r.__z2Origin=r.z2,r.z2+=s):null!=p&&(r.z2=p,r.__z2Origin=null);var m=i&&i.useNameLabel;_o(g,l,c,d,{labelFetcher:a,labelDataIndex:t,defaultText:function(t,e){return m?n.getName(t):fc(n,t)},isRectText:!0,autoColor:o}),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),r.hoverStyle=l,vo(r),r.__symbolOriginalScale=mc(e),f&&a.isAnimationEnabled()&&r.on("mouseover",bc).on("mouseout",Mc).on("emphasis",Sc).on("normal",Ic)},i.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,e&&e.keepLabel||(n.style.text=null),ko(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},y(pc,Fe);$t=Tc.prototype;function Cc(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&(!i.isIgnore||!i.isIgnore(n))&&(!i.clipShape||i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function kc(t){return(t=null!=t&&!O(t)?{isIgnore:t}:t)||{}}function Dc(t){t=t.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function Ac(t,e,n){var i,r=t.getBaseAxis(),a=t.getOtherAxis(r),o=function(t,e){var n=0,t=t.scale.getExtent();"start"===e?n=t[0]:"end"===e?n=t[1]:0<t[0]?n=t[0]:t[1]<0&&(n=t[1]);return n}(a,n),s=r.dim,l=a.dim,h=e.mapDimension(l),n=e.mapDimension(s),r="x"===l||"radius"===l?1:0,a=b(t.dimensions,function(t){return e.mapDimension(t)}),t=e.getCalculationInfo("stackResultDimension");return(i|=oc(e,a[0]))&&(a[0]=t),(i|=oc(e,a[1]))&&(a[1]=t),{dataDimsForPoint:a,valueStart:o,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:h,baseDim:n,baseDataOffset:r,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Lc(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,i),o[1-a]=r,e.dataToPoint(o)}$t.updateData=function(i,r){r=kc(r);var a=this.group,o=i.hostModel,s=this._data,l=this._symbolCtor,h=Dc(i);s||a.removeAll(),i.diff(s).add(function(t){var e,n=i.getItemLayout(t);Cc(i,n,t,r)&&((e=new l(i,t,h)).attr("position",n),i.setItemGraphicEl(t,e),a.add(e))}).update(function(t,e){var n=s.getItemGraphicEl(e),e=i.getItemLayout(t);Cc(i,e,t,r)?(n?(n.updateData(i,t,h),ko(n,{position:e},o)):(n=new l(i,t)).attr("position",e),a.add(n),i.setItemGraphicEl(t,n)):a.remove(n)}).remove(function(t){var e=s.getItemGraphicEl(t);e&&e.fadeOut(function(){a.remove(e)})}).execute(),this._data=i},$t.isPersistent=function(){return!0},$t.updateLayout=function(){var n=this._data;n&&n.eachItemGraphicEl(function(t,e){e=n.getItemLayout(e);t.attr("position",e)})},$t.incrementalPrepareUpdate=function(t){this._seriesScope=Dc(t),this._data=null,this.group.removeAll()},$t.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=kc(n);for(var r=t.start;r<t.end;r++){var a,o=e.getItemLayout(r);Cc(e,o,r,n)&&((a=new this._symbolCtor(e,r,this._seriesScope)).traverse(i),a.attr("position",o),this.group.add(a),e.setItemGraphicEl(r,a))}},$t.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var Pc=lt,Oc=ht,Ec=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},Nc=function(t,e){return t[0]=e[0],t[1]=e[1],t},Bc=[],Rc=[],zc=[];function Fc(t){return isNaN(t[0])||isNaN(t[1])}function Vc(t,e,n,i,r,a,o,s,l,h){return("none"!==h&&h?function(t,e,n,i,r,a,o,s,l,h,u){for(var c=0,d=n,f=0;f<i;f++){var p,g,m,v=e[d];if(r<=d||d<0)break;if(Fc(v)){if(u){d+=a;continue}break}d===n?t[0<a?"moveTo":"lineTo"](v[0],v[1]):0<l?(p=e[c],m=(v[g="y"===h?1:0]-p[g])*l,Nc(Rc,p),Rc[g]=p[g]+m,Nc(zc,v),zc[g]=v[g]-m,t.bezierCurveTo(Rc[0],Rc[1],zc[0],zc[1],v[0],v[1])):t.lineTo(v[0],v[1]),c=d,d+=a}return f}:function(t,e,n,i,r,a,o,s,l,h,u){for(var c,d=0,f=n,p=0;p<i;p++){var g=e[f];if(r<=f||f<0)break;if(Fc(g)){if(u){f+=a;continue}break}if(f===n)t[0<a?"moveTo":"lineTo"](g[0],g[1]),Nc(Rc,g);else if(0<l){var m=f+a,v=e[m];if(u)for(;v&&Fc(e[m]);)v=e[m+=a];var y,_=.5,x=e[d];!(v=e[m])||Fc(v)?Nc(zc,g):(Fc(v)&&!u&&(v=g),et(Bc,v,x),x="x"===h||"y"===h?(y="x"===h?0:1,c=Math.abs(g[y]-x[y]),Math.abs(g[y]-v[y])):(c=at(g,x),at(g,v)),Ec(zc,g,Bc,-l*(1-(_=x/(x+c))))),Pc(Rc,Rc,s),Oc(Rc,Rc,o),Pc(zc,zc,s),Oc(zc,zc,o),t.bezierCurveTo(Rc[0],Rc[1],zc[0],zc[1],g[0],g[1]),Ec(Rc,g,Bc,l*_)}else t.lineTo(g[0],g[1]);d=f,f+=a}return p}).apply(this,arguments)}function Wc(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var a=t[r];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>i[0]&&(i[0]=a[0]),a[1]>i[1]&&(i[1]=a[1])}return{min:e?n:i,max:e?i:n}}var Hc=aa.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Me(aa.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,r=n.length,a=Wc(n,e.smoothConstraint);if(e.connectNulls){for(;0<r&&Fc(n[r-1]);r--);for(;i<r&&Fc(n[i]);i++);}for(;i<r;)i+=Vc(t,n,i,r,r,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Gc=aa.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Me(aa.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,a=n.length,o=e.smoothMonotone,s=Wc(n,e.smoothConstraint),l=Wc(i,e.smoothConstraint);if(e.connectNulls){for(;0<a&&Fc(n[a-1]);a--);for(;r<a&&Fc(n[r]);r++);}for(;r<a;){var h=Vc(t,n,r,a,a,1,s.min,s.max,e.smooth,o,e.connectNulls);Vc(t,i,r+h-1,h,a,-1,l.min,l.max,e.stackedOnSmooth,o,e.connectNulls),r+=h+1,t.closePath()}}});function qc(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i[0]!==r[0]||i[1]!==r[1])return}return 1}}function Xc(t){return"number"==typeof t?t:t?.5:0}function Yc(t){var e,n=t.getGlobalExtent();return t.onBand&&(e=t.getBandWidth()/2-1,t=n[1]>n[0]?1:-1,n[0]+=t*e,n[1]-=t*e),n}function Uc(t,e,n,i){return"polar"===t.type?function(t,e,n,i){var r=t.getAngleAxis(),a=t.getRadiusAxis().getExtent().slice();a[0]>a[1]&&a.reverse();var o=r.getExtent(),s=Math.PI/180;return n&&(a[0]-=.5,a[1]+=.5),r=new Ta({shape:{cx:qo(t.cx,1),cy:qo(t.cy,1),r0:qo(a[0],1),r:qo(a[1],1),startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:r.inverse}}),e&&(r.shape.endAngle=-o[0]*s,Do(r,{shape:{endAngle:-o[1]*s}},i)),r}(t,e,n,i):(a=e,o=n,s=i,e=Yc((r=t).getAxis("x")),n=Yc(r.getAxis("y")),i=r.getBaseAxis().isHorizontal(),t=Math.min(e[0],e[1]),r=Math.min(n[0],n[1]),e=Math.max(e[0],e[1])-t,n=Math.max(n[0],n[1])-r,o?(t-=.5,e+=.5,r-=.5,n+=.5):(o=s.get("lineStyle.width")||2,o=s.get("clipOverflow")?o/2:Math.max(e,n),i?(r-=o,n+=2*o):(t-=o,e+=2*o)),r=new Ea({shape:{x:t,y:r,width:e,height:n}}),a&&(r.shape[i?"width":"height"]=0,Do(r,{shape:{width:e,height:n}},s)),r);var r,a,o,s}function jc(t,e,n){for(var e=e.getBaseAxis(),i="x"===e.dim||"radius"===e.dim?0:1,r=[],a=0;a<t.length-1;a++){var o=t[a+1],s=t[a];r.push(s);var l=[];switch(n){case"end":l[i]=o[i],l[1-i]=s[1-i],r.push(l);break;case"middle":var h=(s[i]+o[i])/2,u=[];l[i]=u[i]=h,l[1-i]=s[1-i],u[1-i]=o[1-i],r.push(l),r.push(u);break;default:l[i]=s[i],l[1-i]=o[1-i],r.push(l)}}return t[a]&&r.push(t[a]),r}function Zc(t,e,n){var i=t.get("showAllSymbol"),t="auto"===i;if(!i||t){n=n.getAxesByScale("ordinal")[0];if(n&&(!t||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),a=Math.max(1,Math.round(r/5)),o=0;o<r;o+=a)if(1.5*pc.getSymbolSize(e,o)[t.isHorizontal()?1:0]>i)return!1;return!0}(n,e))){var r=e.mapDimension(n.dim),a={};return D(n.getViewLabels(),function(t){a[t.tickValue]=1}),function(t){return!a.hasOwnProperty(e.get(r,t))}}}}th.extend({type:"line",init:function(){var t=new Fe,e=new Tc;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=a.mapArray(a.getItemLayout),h="polar"===i.type,u=this._coordSys,c=this._symbolDraw,d=this._polyline,f=this._polygon,p=this._lineGroup,g=t.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=function(t,e,n){if(!n.valueDim)return[];for(var i=[],r=0,a=e.count();r<a;r++)i.push(Lc(n,t,e,r));return i}(i,a,Ac(i,a,v)),_=t.get("showSymbol"),x=_&&!h&&Zc(t,a,i),w=this._data;w&&w.eachItemGraphicEl(function(t,e){t.__temp&&(r.remove(t),w.setItemGraphicEl(e,null))}),_||c.remove(),r.add(p);h=!h&&t.get("step");d&&u.type===i.type&&h===this._step?(m&&!f?f=this._newPolygon(l,y,i,g):f&&!m&&(p.remove(f),f=this._polygon=null),p.setClipPath(Uc(i,!1,!1,t)),_&&c.updateData(a,{isIgnore:x,clipShape:Uc(i,!1,!0,t)}),a.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),qc(this._stackedOnPoints,y)&&qc(this._points,l)||(g?this._updateAnimation(a,y,i,n,h,v):(h&&(l=jc(l,i,h),y=jc(y,i,h)),d.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:y})))):(_&&c.updateData(a,{isIgnore:x,clipShape:Uc(i,!1,!0,t)}),h&&(l=jc(l,i,h),y=jc(y,i,h)),d=this._newPolyline(l,i,g),m&&(f=this._newPolygon(l,y,i,g)),p.setClipPath(Uc(i,!0,!1,t)));g=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,r=n.length-1;0<=r;r--){var a,o=n[r].dimension,o=t.dimensions[o],o=t.getDimensionInfo(o);if("x"===(a=o&&o.coordDim)||"y"===a){i=n[r];break}}if(i){var s=e.getAxis(a),l=b(i.stops,function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}}),h=l.length,u=i.outerColors.slice();h&&l[0].coord>l[h-1].coord&&(l.reverse(),u.reverse());var c=l[0].coord-10,e=l[h-1].coord+10,d=e-c;if(d<.001)return"transparent";D(l,function(t){t.offset=(t.coord-c)/d}),l.push({offset:h?l[h-1].offset:.5,color:u[1]||"transparent"}),l.unshift({offset:h?l[0].offset:.5,color:u[0]||"transparent"});l=new Wa(0,0,0,0,l,!0);return l[a]=c,l[a+"2"]=e,l}}}(a,i)||a.getVisual("color");d.useStyle(k(o.getLineStyle(),{fill:"none",stroke:g,lineJoin:"bevel"}));p=t.get("smooth"),p=Xc(t.get("smooth"));d.setShape({smooth:p,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),f&&(o=a.getCalculationInfo("stackedOnSeries"),d=0,f.useStyle(k(s.getAreaStyle(),{fill:g,opacity:.7,lineJoin:"bevel"})),o&&(d=Xc(o.get("smooth"))),f.setShape({smooth:p,stackedOnSmooth:d,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})),this._data=a,this._coordSys=i,this._stackedOnPoints=y,this._points=l,this._step=h,this._valueOrigin=v},dispose:function(){},highlight:function(t,e,n,i){var r=t.getData(),a=Ni(r,i);if(!(a instanceof Array)&&null!=a&&0<=a){var o=r.getItemGraphicEl(a);if(!o){var s=r.getItemLayout(a);if(!s)return;(o=new pc(r,a)).position=s,o.setZ(t.get("zlevel"),t.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,r.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else th.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var r,a=t.getData(),o=Ni(a,i);null!=o&&0<=o?(r=a.getItemGraphicEl(o))&&(r.__temp?(a.setItemGraphicEl(o,null),this.group.remove(r)):r.downplay()):th.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Hc({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Gc({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(t,e,n,i,r,a){var o=this._polyline,s=this._polygon,l=t.hostModel,h=function(t,e,n,i,r,a,o,s){for(var l,h=(l=[],e.diff(t).add(function(t){l.push({cmd:"+",idx:t})}).update(function(t,e){l.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){l.push({cmd:"-",idx:t})}).execute(),l),u=[],c=[],d=[],f=[],p=[],g=[],m=[],v=Ac(r,e,o),y=Ac(a,t,s),_=0;_<h.length;_++){var x=h[_],w=!0;switch(x.cmd){case"=":var b=t.getItemLayout(x.idx),M=e.getItemLayout(x.idx1);(isNaN(b[0])||isNaN(b[1]))&&(b=M.slice()),u.push(b),c.push(M),d.push(n[x.idx]),f.push(i[x.idx1]),m.push(e.getRawIndex(x.idx1));break;case"+":var S=x.idx;u.push(r.dataToPoint([e.get(v.dataDimsForPoint[0],S),e.get(v.dataDimsForPoint[1],S)])),c.push(e.getItemLayout(S).slice()),d.push(Lc(v,r,e,S)),f.push(i[S]),m.push(e.getRawIndex(S));break;case"-":S=x.idx,M=t.getRawIndex(S);M!==S?(u.push(t.getItemLayout(S)),c.push(a.dataToPoint([t.get(y.dataDimsForPoint[0],S),t.get(y.dataDimsForPoint[1],S)])),d.push(n[S]),f.push(Lc(y,a,t,S)),m.push(M)):w=!1}w&&(p.push(x),g.push(g.length))}g.sort(function(t,e){return m[t]-m[e]});for(var I=[],T=[],C=[],k=[],D=[],_=0;_<g.length;_++){S=g[_];I[_]=u[S],T[_]=c[S],C[_]=d[S],k[_]=f[S],D[_]=p[S]}return{current:I,next:T,stackedOnCurrent:C,stackedOnNext:k,status:D}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),u=h.current,c=h.stackedOnCurrent,e=h.next,a=h.stackedOnNext;r&&(u=jc(h.current,n,r),c=jc(h.stackedOnCurrent,n,r),e=jc(h.next,n,r),a=jc(h.stackedOnNext,n,r)),o.shape.__points=h.current,o.shape.points=u,ko(o,{shape:{points:e}},l),s&&(s.setShape({points:u,stackedOnPoints:c}),ko(s,{shape:{points:e,stackedOnPoints:a}},l));for(var d,f=[],p=h.status,g=0;g<p.length;g++)"="!==p[g].cmd||(d=t.getItemGraphicEl(p[g].idx1))&&f.push({el:d,ptIdx:g});o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<f.length;t++)f[t].el.attr("position",o.shape.__points[f[t].ptIdx])})},remove:function(t){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(t,e){t.__temp&&(n.remove(t),i.setItemGraphicEl(e,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});function $c(t,e){return Math.round(t.length/2)}var Qc={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};function Kc(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Jc(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}Kc.prototype.parse=function(t){return t},Kc.prototype.getSetting=function(t){return this._setting[t]},Kc.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Kc.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Kc.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Kc.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Kc.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Kc.prototype.getExtent=function(){return this._extent.slice()},Kc.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Kc.prototype.isBlank=function(){return this._isBlank},Kc.prototype.setBlank=function(t){this._isBlank=t},Kc.prototype.getLabel=null,qi(Kc),Zi(Kc,{registerWhenExtend:!0}),Jc.createByAxisModel=function(t){var e=t.option,t=e.data,t=t&&b(t,ed);return new Jc({categories:t,needCollect:!t,deduplication:!1!==e.dedplication})};i=Jc.prototype;function td(t){return t._map||(t._map=Z(t.categories))}function ed(t){return O(t)&&null!=t.value?t.value:t+""}i.getOrdinal=function(t){return td(this).get(t)},i.parseAndCollect=function(t){var e=this._needCollect;if("string"!=typeof t&&!e)return t;if(e&&!this._deduplication)return n=this.categories.length,this.categories[n]=t,n;var n,i=td(this);return null==(n=i.get(t))&&(e?(n=this.categories.length,this.categories[n]=t,i.set(t,n)):n=NaN),n};var nd=Kc.prototype,id=Kc.extend({type:"ordinal",init:function(t,e){t&&!A(t)||(t=new Jc({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),nd.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return nd.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(nd.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:$,niceExtent:$});id.create=function(){return new id};var rd=qo;function ad(t){return Xo(t)+2}function od(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function sd(t,e){isFinite(t[0])||(t[0]=e[0]),isFinite(t[1])||(t[1]=e[1]),od(t,0,e),od(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var ld=qo,hd=Kc.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),hd.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=ad(t)},getTicks:function(){return function(t,e,n,i){var r=[];if(!t)return r;e[0]<n[0]&&r.push(e[0]);for(var a=n[0];a<=n[1]&&(r.push(a),(a=rd(a+t,i))!==r[r.length-1]);)if(1e4<r.length)return[];return e[1]>(r.length?r[r.length-1]:n[1])&&r.push(e[1]),r}(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(t,e){if(null==t)return"";e=e&&e.precision;return null==e?e=Xo(t)||0:"auto"===e&&(e=this._intervalPrecision),Ko(t=ld(t,e,!0))},niceTicks:function(t,e,n){t=t||5;var i,r=this._extent,a=r[1]-r[0];isFinite(a)&&(a<0&&(a=-a,r.reverse()),i=t,a=e,t=n,e={},r=(n=r)[1]-n[0],i=e.interval=Qo(r/i,!0),null!=a&&i<a&&(i=e.interval=a),null!=t&&t<i&&(i=e.interval=t),t=e.intervalPrecision=ad(i),sd(e.niceTickExtent=[rd(Math.ceil(n[0]/i)*i,t),rd(Math.floor(n[1]/i)*i,t)],n),this._intervalPrecision=(e=e).intervalPrecision,this._interval=e.interval,this._niceExtent=e.niceTickExtent)},niceExtent:function(t){var e=this._extent;e[0]===e[1]&&(0!==e[0]?(n=e[0],t.fixMax||(e[1]+=n/2),e[0]-=n/2):e[1]=1);var n=e[1]-e[0];isFinite(n)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);n=this._interval;t.fixMin||(e[0]=ld(Math.floor(e[0]/n)*n)),t.fixMax||(e[1]=ld(Math.ceil(e[1]/n)*n))}});hd.create=function(){return new hd};var ud="__ec_stack_",cd="undefined"!=typeof Float32Array?Float32Array:Array;function dd(t){return t.get("stack")||ud+t.seriesIndex}function fd(t){return t.dim+t.index}function pd(t,e){var n=[];return e.eachSeriesByType(t,function(t){vd(t)&&!yd(t)&&n.push(t)}),n}function gd(t){var s=[];return D(t,function(t){var e=t.getData(),n=t.coordinateSystem.getBaseAxis(),i=n.getExtent(),r="category"===n.type?n.getBandWidth():Math.abs(i[1]-i[0])/e.count(),a=Go(t.get("barWidth"),r),o=Go(t.get("barMaxWidth"),r),i=t.get("barGap"),e=t.get("barCategoryGap");s.push({bandWidth:r,barWidth:a,barMaxWidth:o,barGap:i,barCategoryGap:e,axisKey:fd(n),stackId:dd(t)})}),function(t){var o={};D(t,function(t,e){var n=t.axisKey,i=t.bandWidth,r=o[n]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=r.stacks;o[n]=r;i=t.stackId;a[i]||r.autoWidthCount++,a[i]=a[i]||{width:0,maxWidth:0};n=t.barWidth;n&&!a[i].width&&(a[i].width=n,n=Math.min(r.remainedWidth,n),r.remainedWidth-=n);n=t.barMaxWidth;n&&(a[i].maxWidth=n);n=t.barGap;null!=n&&(r.gap=n);t=t.barCategoryGap;null!=t&&(r.categoryGap=t)});var c={};return D(o,function(t,n){c[n]={};var e=t.stacks,i=t.bandWidth,i=Go(t.categoryGap,i),r=Go(t.gap,1),a=t.remainedWidth,o=t.autoWidthCount,s=(a-i)/(o+(o-1)*r),s=Math.max(s,0);D(e,function(t,e){var n=t.maxWidth;n&&n<s&&(n=Math.min(n,a),t.width&&(n=Math.min(n,t.width)),a-=n,t.width=n,o--)}),s=(a-i)/(o+(o-1)*r),s=Math.max(s,0);var l,h=0;D(e,function(t,e){t.width||(t.width=s),h+=(l=t).width*(1+r)}),l&&(h-=l.width*r);var u=-h/2;D(e,function(t,e){c[n][e]=c[n][e]||{offset:u,width:t.width},u+=t.width*(1+r)})}),c}(s)}function md(t,e,n){if(t&&e){e=t[fd(e)];return e=null!=e&&null!=n?e[dd(n)]:e}}$t={seriesType:"bar",plan:Ql(),reset:function(t){if(vd(t)&&yd(t)){var e=t.getData(),s=t.coordinateSystem,n=s.getBaseAxis(),l=s.getOtherAxis(n),h=e.mapDimension(l.dim),u=e.mapDimension(n.dim),c=l.isHorizontal(),d=c?0:1,f=md(gd([t]),n,t).width;return.5<f||(f=.5),{progress:function(t,e){var n,i=new cd(2*t.count),r=[],a=[],o=0;for(;null!=(n=t.next());)a[d]=e.get(h,n),a[1-d]=e.get(u,n),r=s.dataToPoint(a,null,r),i[o++]=r[0],i[o++]=r[1];e.setLayout({largePoints:i,barWidth:f,valueAxisStart:_d(0,l),valueAxisHorizontal:c})}}}}};function vd(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function yd(t){return t.pipelineContext&&t.pipelineContext.large}function _d(t,e){var n,i=e.getGlobalExtent(),i=i[0]>i[1]?(n=i[1],i[0]):(n=i[0],i[1]),e=e.toGlobalCoord(e.dataToCoord(0));return e=i<(e=e<n?n:e)?i:e}var xd=hd.prototype,wd=Math.ceil,bd=Math.floor,Me=36e5,Md=864e5,Sd=hd.extend({type:"time",getLabel:function(t){var e=this._stepLvl,t=new Date(t);return ss(e[0],t,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;e[0]===e[1]&&(e[0]-=Md,e[1]+=Md),e[1]===-1/0&&e[0]===1/0&&(n=new Date,e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-Md),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var n=this._interval;t.fixMin||(e[0]=qo(bd(e[0]/n)*n)),t.fixMax||(e[1]=qo(wd(e[1]/n)*n))},niceTicks:function(t,e,n){var i=this._extent,r=i[1]-i[0],a=r/(t=t||10);null!=e&&a<e&&(a=e);e=Id.length,a=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=1+r:i=r}return n}(Id,a=null!=n&&n<a?n:a,0,e),a=Id[Math.min(a,e-1)],e=a[1];"year"===a[0]&&(e*=Qo(r/e/t,!0));t=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,t=[Math.round(wd((i[0]-t)/e)*e+t),Math.round(bd((i[1]-t)/e)*e+t)];sd(t,i),this._stepLvl=a,this._interval=e,this._niceExtent=t},parse:function(t){return+Zo(t)}});D(["contain","normalize"],function(e){Sd.prototype[e]=function(t){return xd[e].call(this,this.parse(t))}});var Id=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",Me],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",6*Me],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",Md],["MM-dd\nyyyy",2*Md],["MM-dd\nyyyy",3*Md],["MM-dd\nyyyy",4*Md],["MM-dd\nyyyy",5*Md],["MM-dd\nyyyy",6*Md],["week",7*Md],["MM-dd\nyyyy",864e6],["week",14*Md],["week",21*Md],["month",31*Md],["week",42*Md],["month",62*Md],["week",70*Md],["quarter",95*Md],["month",31*Md*4],["month",13392e6],["half-year",16416e6],["month",31*Md*8],["month",26784e6],["year",380*Md]];Sd.create=function(t){return new Sd({useUTC:t.ecModel.get("useUTC")})};var Td=Kc.prototype,Cd=hd.prototype,kd=Xo,Dd=qo,Ad=Math.floor,Ld=Math.ceil,Pd=Math.pow,Od=Math.log,Ed=Kc.extend({type:"log",base:10,$constructor:function(){Kc.apply(this,arguments),this._originalScale=new hd},getTicks:function(){var n=this._originalScale,i=this._extent,r=n.getExtent();return b(Cd.getTicks.call(this),function(t){var e=qo(Pd(this.base,t)),e=t===i[0]&&n.__fixMin?Nd(e,r[0]):e;return e=t===i[1]&&n.__fixMax?Nd(e,r[1]):e},this)},getLabel:Cd.getLabel,scale:function(t){return t=Td.scale.call(this,t),Pd(this.base,t)},setExtent:function(t,e){var n=this.base;t=Od(t)/Od(n),e=Od(e)/Od(n),Cd.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=Td.getExtent.call(this);e[0]=Pd(t,e[0]),e[1]=Pd(t,e[1]);var n=this._originalScale,t=n.getExtent();return n.__fixMin&&(e[0]=Nd(e[0],t[0])),n.__fixMax&&(e[1]=Nd(e[1],t[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Od(t[0])/Od(e),t[1]=Od(t[1])/Od(e),Td.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n==1/0||n<=0)){var i=Math.pow(10,$o(n));for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;e=[qo(Ld(e[0]/i)*i),qo(Ad(e[1]/i)*i)];this._interval=i,this._niceExtent=e}},niceExtent:function(t){Cd.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function Nd(t,e){return Dd(t,kd(e))}function Bd(t,e){var n,i,r,a=t.type,o=e.getMin(),s=e.getMax(),l=null!=o,h=null!=s,u=t.getExtent();"ordinal"===a?n=e.getCategories().length:((i="boolean"==typeof(i=!A(i=e.get("boundaryGap"))?[i||0,i||0]:i)[0]?[0,0]:i)[0]=Go(i[0],1),i[1]=Go(i[1],1),r=u[1]-u[0]||Math.abs(u[0])),null==o&&(o="ordinal"===a?n?0:NaN:u[0]-i[0]*r),null==s&&(s="ordinal"===a?n?n-1:NaN:u[1]+i[1]*r),"dataMin"===o?o=u[0]:"function"==typeof o&&(o=o({min:u[0],max:u[1]})),"dataMax"===s?s=u[1]:"function"==typeof s&&(s=s({min:u[0],max:u[1]})),null!=o&&isFinite(o)||(o=NaN),null!=s&&isFinite(s)||(s=NaN),t.setBlank(R(o)||R(s)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(o=0<o&&0<s&&!l?0:o)<0&&s<0&&!h&&(s=0);var c,h=e.ecModel;return h&&"time"===a&&(D(h=pd("bar",h),function(t){c|=t.getBaseAxis()===e.axis}),c&&(h=gd(h),o=(h=function(t,e,n,i){var r=n.axis.getExtent(),r=r[1]-r[0],i=md(i,n.axis);if(void 0===i)return{min:t,max:e};var a=1/0;D(i,function(t){a=Math.min(t.offset,a)});var o=-1/0;D(i,function(t){o=Math.max(t.offset+t.width,o)}),a=Math.abs(a),o=Math.abs(o);n=a+o,i=e-t,i=i/(1-(a+o)/r)-i;return{min:t-=a/n*i,max:e+=o/n*i}}(o,s,e,h)).min,s=h.max)),[o,s]}function Rd(t,e){var n=Bd(t,e),i=null!=e.getMin(),r=null!=e.getMax(),a=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var o=t.type;t.setExtent(n[0],n[1]),t.niceExtent({splitNumber:a,fixMin:i,fixMax:r,minInterval:"interval"===o||"time"===o?e.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?e.get("maxInterval"):null});e=e.get("interval");null!=e&&t.setInterval&&t.setInterval(e)}function zd(i){var e,r=i.getLabelModel().get("formatter"),a="category"===i.type?i.scale.getExtent()[0]:null;return"string"==typeof r?(e=r,r=function(t){return t=i.scale.getLabel(t),e.replace("{value}",null!=t?t:"")}):"function"==typeof r?function(t,e){return null!=a&&(e=t-a),r((n=t,"category"===(t=i).type?t.scale.getLabel(n):n),e);var n}:function(t){return i.scale.getLabel(t)}}function Fd(t){var e=t.model,n=t.scale;if(e.get("axisLabel.show")&&!n.isBlank()){var i,r,e="category"===t.type,a=n.getExtent(),o=e?n.count():(i=n.getTicks()).length,s=t.getLabelModel(),l=zd(t),h=1;40<o&&(h=Math.ceil(o/40));for(var u,c,d=0;d<o;d+=h){var f=l(i?i[d]:a[0]+d),p=s.getTextRect(f),g=(u=p,c=s.get("rotate")||0,g=p=f=g=void 0,g=c*Math.PI/180,f=u.plain(),p=f.width,c=f.height,u=p*Math.cos(g)+c*Math.sin(g),g=p*Math.sin(g)+c*Math.cos(g),new ze(f.x,f.y,u,g));r?r.union(g):r=g}return r}}function Vd(t){t=t.get("interval");return null==t?"auto":t}function Wd(t){return"category"===t.type&&0===Vd(t.getLabelModel())}function Hd(t){return this._axes[t]}D(["contain","normalize"],function(e){Ed.prototype[e]=function(t){return t=Od(t)/Od(this.base),Td[e].call(this,t)}}),Ed.create=function(){return new Ed};function Gd(t){this._axes={},this._dimList=[],this.name=t||""}function qd(t){Gd.call(this,t)}Gd.prototype={constructor:Gd,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return b(this._dimList,Hd,this)},getAxesByScale:function(e){return e=e.toLowerCase(),x(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},r=0;r<n.length;r++){var a=n[r],o=this._axes[a];i[a]=o[e](t[a])}return i}},qd.prototype={constructor:qd,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),r=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=r.toGlobalCoord(r.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),a=i.getExtent(),n=n.parse(t[0]),t=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),n),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),t),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},y(qd,Gd);var Xd=Bi();function Yd(t){return"category"===t.type?(r=(e=t).getLabelModel(),a=jd(e,r),!r.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a):(t=(n=t).scale.getTicks(),i=zd(n),{labels:b(t,function(t,e){return{formattedLabel:i(t,e),rawLabel:n.scale.getLabel(t),tickValue:t}})});var n,i,e,r,a}function Ud(t,e){return"category"===t.type?function(t,e){var n,i,r=Zd(t,"ticks"),a=Vd(e),o=$d(r,a);if(o)return o;e.get("show")&&!t.scale.isBlank()||(n=[]);n=I(a)?Jd(t,a,!0):"auto"===a?(e=jd(t,t.getLabelModel()),i=e.labelCategoryInterval,b(e.labels,function(t){return t.tickValue})):Kd(t,i=a,!0);return Qd(r,a,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:t.scale.getTicks()}}function jd(t,e){var n,i=Zd(t,"labels"),r=Vd(e),e=$d(i,r);return e||Qd(i,r,{labels:I(r)?Jd(t,r):Kd(t,n="auto"===r?null!=(t=Xd(n=t).autoInterval)?t:Xd(n).autoInterval=n.calculateCategoryInterval():r),labelCategoryInterval:n})}function Zd(t,e){return Xd(t)[e]||(Xd(t)[e]=[])}function $d(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Qd(t,e,n){return t.push({key:e,value:n}),n}function Kd(t,e,n){var i=zd(t),r=t.scale,a=r.getExtent(),o=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),h=a[0],e=r.count();0!==h&&1<l&&2<e/l&&(h=Math.round(Math.ceil(h/l)*l));e=Wd(t),t=o.get("showMinLabel")||e,e=o.get("showMaxLabel")||e;t&&h!==a[0]&&c(a[0]);for(var u=h;u<=a[1];u+=l)c(u);function c(t){s.push(n?t:{formattedLabel:i(t),rawLabel:r.getLabel(t),tickValue:t})}return e&&u!==a[1]&&c(a[1]),s}function Jd(t,n,i){var r=t.scale,a=zd(t),o=[];return D(r.getTicks(),function(t){var e=r.getLabel(t);n(t,e)&&o.push(i?t:{formattedLabel:a(t),rawLabel:e,tickValue:t})}),o}function tf(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1}var ef=[0,1];function nf(t,e){e=(t[1]-t[0])/e/2;t[0]+=e,t[1]-=e}tf.prototype={constructor:tf,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),e=Math.max(e[0],e[1]);return n<=t&&t<=e},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return e=t||this.scale.getExtent(),n=this._extent,i=Math.log,t=Math.LN10,e=Math.floor(i(e[1]-e[0])/t),t=Math.round(i(Math.abs(n[1]-n[0]))/t),t=Math.min(Math.max(-e+t,0),20),isFinite(t)?t:20;var e,n,i},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&nf(n=n.slice(),i.count()),Ho(t,ef,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&nf(n=n.slice(),i.count());e=Ho(t,n,ef,e);return this.scale.scale(e)},pointToData:function(t,e){},getTicksCoords:function(t){var e,n,i,r,a=(t=t||{}).tickModel||this.getTickModel(),o=Ud(this,a),s=b(o.ticks,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this),l=a.get("alignWithLabel");function h(t,e){return r?e<t:t<e}return e=this,a=s,o.tickCategoryInterval,o=l,l=t.clamp,t=a.length,e.onBand&&!o&&t&&(e=e.getExtent(),1===t?(a[0].coord=e[0],n=a[1]={coord:e[0]}):(i=a[1].coord-a[0].coord,D(a,function(t){t.coord-=i/2}),n={coord:a[t-1].coord+i},a.push(n)),r=e[0]>e[1],h(a[0].coord,e[0])&&(l?a[0].coord=e[0]:a.shift()),l&&h(e[0],a[0].coord)&&a.unshift({coord:e[0]}),h(e[1],n.coord)&&(l?n.coord=e[1]:a.pop()),l&&h(n.coord,e[1])&&a.push({coord:e[1]})),s},getViewLabels:function(){return Yd(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),e=e[1]-e[0]+(this.onBand?1:0);0===e&&(e=1);t=Math.abs(t[1]-t[0]);return Math.abs(t)/e},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var e=(l=(a=t).getLabelModel(),{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:l.get("rotate")||0,font:l.getFont()}),n=zd(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=(h=t.scale).getExtent(),a=h.count();if(r[1]-r[0]<1)return 0;var o=1;40<a&&(o=Math.max(1,Math.floor(a/40)));for(var s=r[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),h=Math.abs(l*Math.cos(i)),l=Math.abs(l*Math.sin(i)),u=0,c=0;s<=r[1];s+=o)var d=Sn(n(s),e.font,"center","top"),f=1.3*d.width,d=1.3*d.height,u=Math.max(u,f,7),c=Math.max(c,d,7);return i=u/h,h=c/l,isNaN(i)&&(i=1/0),isNaN(h)&&(h=1/0),l=Math.max(0,Math.floor(Math.min(i,h))),i=Xd(t.model),h=i.lastAutoInterval,t=i.lastTickCount,null!=h&&null!=t&&Math.abs(h-l)<=1&&Math.abs(t-a)<=1&&l<h?l=h:(i.lastTickCount=a,i.lastAutoInterval=l),l}(this)}};function rf(t,e,n,i,r){tf.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom"}rf.prototype={constructor:rf,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},y(rf,tf);var i={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},af={};af.categoryAxis=f({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},i),af.valueAxis=f({boundaryGap:[0,0],splitNumber:5},i),af.timeAxis=k({scale:!0,min:"dataMin",max:"dataMax"},af.valueAxis),af.logAxis=k({scale:!0,logBase:10},af.valueAxis);var of=["value","category","time","log"],Me=function(a,t,o,e){D(of,function(r){t.extend({type:a+"Axis."+r,mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?ps(t):{};f(t,e.getTheme().get(r+"Axis")),f(t,this.getDefaultOption()),t.type=o(a,t),n&&fs(t,i,n)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Jc.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:function(t,e){for(var n=t[0],i=1,r=t.length;i<r;i++)n=f(n,t[i],e);return n}([{},af[r+"Axis"],e],!0)})}),_s.registerSubTypeDefaulter(a+"Axis",S(o,a))},i={getMin:function(t){var e=this.option,e=t||null==e.rangeStart?e.min:e.rangeStart;return e=this.axis&&null!=e&&"dataMin"!==e&&"function"!=typeof e&&!R(e)?this.axis.scale.parse(e):e},getMax:function(t){var e=this.option,e=t||null==e.rangeEnd?e.max:e.rangeEnd;return e=this.axis&&null!=e&&"dataMax"!==e&&"function"!=typeof e&&!R(e)?this.axis.scale.parse(e):e},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:$,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},sf=_s.extend({type:"cartesian2dAxis",axis:null,init:function(){sf.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){sf.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){sf.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function lf(t,e){return e.type||(e.data?"category":"value")}f(sf.prototype,i);i={offset:0};function hf(t,e){return t.getCoordSysModel()===e}function uf(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}Me("x",sf,lf,i),Me("y",sf,lf,i),_s.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});i=uf.prototype;function cf(t,e,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,a=t[e],e=n.model,n=e.get("axisLine.onZero"),e=e.get("axisLine.onZeroAxisIndex");if(n){if(null!=e)df(a[e])&&(r=a[e]);else for(var o in a)if(a.hasOwnProperty(o)&&df(a[o])&&!i[s(a[o])]){r=a[o];break}r&&(i[s(r)]=!0)}function s(t){return t.dim+"_"+t.index}}function df(t){return t&&"category"!==t.type&&"time"!==t.type&&(e=(t=(e=t).scale.getExtent())[0],t=t[1],!(0<e&&0<t||e<0&&t<0));var e}i.type="grid",i.axisPointerEnabled=!0,i.getRect=function(){return this._rect},i.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),D(n.x,function(t){Rd(t.scale,t.model)}),D(n.y,function(t){Rd(t.scale,t.model)});var i={};D(n.x,function(t){cf(n,"y",t,i)}),D(n.y,function(t){cf(n,"x",t,i)}),this.resize(this.model,e)},i.resize=function(t,e,n){var o=function(t,e,n){n=Jo(n||0);var i=e.width,r=e.height,a=Go(t.left,i),o=Go(t.top,r),s=Go(t.right,i),l=Go(t.bottom,r),h=Go(t.width,i),u=Go(t.height,r),c=n[2]+n[0],d=n[1]+n[3],e=t.aspect;switch(isNaN(h)&&(h=i-s-d-a),isNaN(u)&&(u=r-l-c-o),null!=e&&(isNaN(h)&&isNaN(u)&&(i/r<e?h=.8*i:u=.8*r),isNaN(h)&&(h=e*u),isNaN(u)&&(u=h/e)),isNaN(a)&&(a=i-s-h-d),isNaN(o)&&(o=r-l-u-c),t.left||t.right){case"center":a=i/2-h/2-n[3];break;case"right":a=i-h-d}switch(t.top||t.bottom){case"middle":case"center":o=r/2-u/2-n[0];break;case"bottom":o=r-u-c}return a=a||0,o=o||0,isNaN(h)&&(h=i-d-a-(s||0)),isNaN(u)&&(u=r-c-o-(l||0)),(l=new ze(a+n[3],o+n[0],h,u)).margin=n,l}(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=o;var i=this._axesList;function r(){D(i,function(t){var e,n,i=t.isHorizontal(),r=i?[0,o.width]:[0,o.height],a=t.inverse?1:0;t.setExtent(r[a],r[1-a]),t=t,e=i?o.x:o.y,i=t.getExtent(),n=i[0]+i[1],t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return n-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return n-t+e}})}r(),!n&&t.get("containLabel")&&(D(i,function(t){var e,n,i;t.model.get("axisLabel.inside")||(e=Fd(t))&&(n=t.isHorizontal()?"height":"width",i=t.model.get("axisLabel.margin"),o[n]-=e[n]+i,"top"===t.position?o.y+=e.height+i:"left"===t.position&&(o.x+=e.width+i))}),r())},i.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},i.getAxes=function(){return this._axesList.slice()},i.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];O(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===t||i[n].getAxis("y").index===e)return i[n]},i.getCartesians=function(){return this._coordsList.slice()},i.convertToPixel=function(t,e,n){e=this._findConvertTarget(t,e);return e.cartesian?e.cartesian.dataToPoint(n):e.axis?e.axis.toGlobalCoord(e.axis.dataToCoord(n)):null},i.convertFromPixel=function(t,e,n){e=this._findConvertTarget(t,e);return e.cartesian?e.cartesian.pointToData(n):e.axis?e.axis.coordToData(e.axis.toLocalCoord(n)):null},i._findConvertTarget=function(t,e){var n,i,r=e.seriesModel,a=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel,e=this._coordsList;return r?m(e,n=r.coordinateSystem)<0&&(n=null):a&&o?n=this.getCartesian(a.componentIndex,o.componentIndex):a?i=this.getAxis("x",a.componentIndex):o?i=this.getAxis("y",o.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},i.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},i._initCartesian=function(a,t,e){var o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",n("x"),this),t.eachComponent("yAxis",n("y"),this),!l.x||!l.y)return this._axesMap={},void(this._axesList=[]);function n(r){return function(t,e){var n,i;hf(t,a)&&(i=t.get("position"),"x"===r?"top"!==i&&"bottom"!==i&&o[i="bottom"]&&(i="top"===i?"bottom":"top"):"left"!==i&&"right"!==i&&o[i="left"]&&(i="left"===i?"right":"left"),o[i]=!0,i="category"===(n=new rf(r,function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new id(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new hd;default:return(Kc.getClass(e)||hd).create(t)}}(t),[0,0],t.get("type"),i)).type,n.onBand=i&&t.get("boundaryGap"),n.inverse=t.get("inverse"),(t.axis=n).model=t,n.grid=this,n.index=e,this._axesList.push(n),s[r][e]=n,l[r]++)}}D((this._axesMap=s).x,function(i,r){D(s.y,function(t,e){var n="x"+r+"y"+e,e=new qd(n);e.grid=this,e.model=a,this._coordsMap[n]=e,this._coordsList.push(e),e.addAxis(i),e.addAxis(t)},this)},this)},i._updateScale=function(t,r){function a(n,i){D(n.mapDimension(i.dim,!0),function(t){var e;i.scale.unionExtentFromData(n,oc(e=n,t=t)?e.getCalculationInfo("stackResultDimension"):t)})}D(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(t){var e,n,i;gf(t)&&(e=(i=pf(t))[0],n=i[1],hf(e,r)&&hf(n,r)&&(i=this.getCartesian(e.componentIndex,n.componentIndex),e=t.getData(),n=i.getAxis("x"),i=i.getAxis("y"),"list"===e.type&&(a(e,n),a(e,i))))},this)},i.getTooltipAxes=function(n){var i=[],r=[];return D(this.getCartesians(),function(t){var e=null!=n&&"auto"!==n?t.getAxis(n):t.getBaseAxis(),t=t.getOtherAxis(e);m(i,e)<0&&i.push(e),m(r,t)<0&&r.push(t)}),{baseAxes:i,otherAxes:r}};var ff=["xAxis","yAxis"];function pf(e){return b(ff,function(t){return e.getReferringComponents(t)[0]})}function gf(t){return"cartesian2d"===t.get("coordinateSystem")}uf.create=function(i,r){var a=[];return i.eachComponent("grid",function(t,e){var n=new uf(t,i,r);n.name="grid_"+e,n.resize(t,r,!0),t.coordinateSystem=n,a.push(n)}),i.eachSeries(function(t){var e,n,i;gf(t)&&(e=(i=pf(t))[0],n=i[1],i=e.getCoordSysModel().coordinateSystem,t.coordinateSystem=i.getCartesian(e.componentIndex,n.componentIndex))}),a},uf.dimensions=uf.prototype.dimensions=qd.prototype.dimensions,js.register("cartesian2d",uf);var mf=Math.PI;function vf(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e}function yf(t,e){this.opt=e,this.axisModel=t,k(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Fe,(e=new Fe({position:e.position.slice(),rotation:e.rotation})).updateTransform(),this._transform=e.transform,this._dumbGroup=e}yf.prototype={constructor:yf,hasBuilder:function(t){return!!_f[t]},add:function(t){_f[t].call(this)},getGroup:function(){return this.group}};var _f={axisLine:function(){var i,t,r,a,e,o,s,l=this.opt,n=this.axisModel;n.get("axisLine.show")&&(t=this.axisModel.axis.getExtent(),e=this._transform,i=[t[0],0],t=[t[1],0],e&&(st(i,i,e),st(t,t,e)),r=C({lineCap:"round"},n.getModel("axisLine.lineStyle").getLineStyle()),this.group.add(new Ba(to({anid:"line",shape:{x1:i[0],y1:i[1],x2:t[0],y2:t[1]},style:r,strokeContainThreshold:l.strokeContainThreshold||5,silent:!0,z2:1}))),a=n.get("axisLine.symbol"),e=n.get("axisLine.symbolSize"),"number"==typeof(n=n.get("axisLine.symbolOffset")||0)&&(n=[n,n]),null!=a&&("string"==typeof a&&(a=[a,a]),o=(e="string"==typeof e||"number"==typeof e?[e,e]:e)[0],s=e[1],D([{rotate:l.rotation+Math.PI/2,offset:n[0],r:0},{rotate:l.rotation-Math.PI/2,offset:n[1],r:Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1]))}],function(t,e){var n;"none"!==a[e]&&null!=a[e]&&(n=dc(a[e],-o/2,-s/2,o,s,r.stroke,!0),e=t.r+t.offset,e=[i[0]+e*Math.cos(l.rotation),i[1]-e*Math.sin(l.rotation)],n.attr({rotation:t.rotate,position:e,silent:!0,z2:11}),this.group.add(n))},this)))},axisTickLabel:function(){var t,e,n,i,r,a,o=this.axisModel,s=this.opt,l=function(t,e,n){var i=e.axis;if(e.get("axisTick.show")&&!i.scale.isBlank()){for(var r=e.getModel("axisTick"),a=r.getModel("lineStyle"),o=r.get("length"),s=i.getTicksCoords(),l=[],h=[],u=t._transform,c=[],d=0;d<s.length;d++){var f=s[d].coord;l[0]=f,l[1]=0,h[0]=f,h[1]=n.tickDirection*o,u&&(st(l,l,u),st(h,h,u));f=new Ba(to({anid:"tick_"+s[d].tickValue,shape:{x1:l[0],y1:l[1],x2:h[0],y2:h[1]},style:k(a.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));t.group.add(f),c.push(f)}return c}}(this,o,s),h=function(s,l,h){var u=l.axis;if(z(h.axisLabelShow,l.get("axisLabel.show"))&&!u.scale.isBlank()){var c=l.getModel("axisLabel"),d=c.get("margin"),t=u.getViewLabels(),e=(z(h.labelRotate,c.get("rotate"))||0)*mf/180,f=xf(h.rotation,e,h.labelDirection),p=l.getCategories(!0),g=[],m=wf(l),v=l.get("triggerEvent");return D(t,function(t,e){var n=t.tickValue,i=t.formattedLabel,r=t.rawLabel,a=c,o=(a=p&&p[n]&&p[n].textStyle?new Bo(p[n].textStyle,c,l.ecModel):a).getTextColor()||l.get("axisLine.lineStyle.color"),t=[u.dataToCoord(n),h.labelOffset+h.labelDirection*d],t=new Ma({anid:"label_"+n,position:t,rotation:f.rotation,silent:m,z2:10});xo(t.style,a,{text:i,textAlign:a.getShallow("align",!0)||f.textAlign,textVerticalAlign:a.getShallow("verticalAlign",!0)||a.getShallow("baseline",!0)||f.textVerticalAlign,textFill:"function"==typeof o?o("category"===u.type?r:"value"===u.type?n+"":n,e):o}),v&&(t.eventData=vf(l),t.eventData.targetType="axisLabel",t.eventData.value=r),s._dumbGroup.add(t),t.updateTransform(),g.push(t),s.group.add(t),t.decomposeTransform()}),g}}(this,o,s);e=h,n=l,Wd((t=o).axis)||(i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel"),n=n||[],a=(e=e||[])[0],s=e[1],h=e[e.length-1],l=e[e.length-2],o=n[0],t=n[1],e=n[n.length-1],n=n[n.length-2],!1===i?(bf(a),bf(o)):Mf(a,s)&&(i?(bf(s),bf(t)):(bf(a),bf(o))),!1===r?(bf(h),bf(e)):Mf(l,h)&&(r?(bf(l),bf(n)):(bf(h),bf(e))))},axisName:function(){var t,e,n,i,r,a,o,s,l=this.opt,h=this.axisModel,u=z(l.axisName,h.get("name"));u&&(r=h.get("nameLocation"),t=l.nameDirection,e=h.getModel("nameTextStyle"),s=h.get("nameGap")||0,n=(o=this.axisModel.axis.getExtent())[0]>o[1]?-1:1,n=["start"===r?o[0]-n*s:"end"===r?o[1]+n*s:(o[0]+o[1])/2,Sf(r)?l.labelOffset+t*s:0],null!=(s=h.get("nameRotate"))&&(s=s*mf/180),Sf(r)?i=xf(l.rotation,null!=s?s:l.rotation,t):(i=function(t,e,n,i){var r,t=Yo(n-t.rotation),i=i[0]>i[1],i="start"===e&&!i||"start"!==e&&i;i=Uo(t-mf/2)?(r=i?"bottom":"top","center"):Uo(t-1.5*mf)?(r=i?"top":"bottom","center"):(r="middle",t<1.5*mf&&mf/2<t?i?"left":"right":i?"right":"left");return{rotation:t,textAlign:i,textVerticalAlign:r}}(l,r,s||0,o),null!=(a=l.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(i.rotation)),isFinite(a)||(a=null))),r=e.getFont(),o=(s=h.get("nameTruncate",!0)||{}).ellipsis,l=z(l.nameTruncateMaxWidth,s.maxWidth,a),a=null!=o&&null!=l?ls(u,l,r,o,{minChar:2,placeholder:s.placeholder}):u,l=h.get("tooltip",!0),(s={componentType:o=h.mainType,name:u,$vars:["name"]})[o+"Index"]=h.componentIndex,xo((l=new Ma({anid:"name",__fullText:u,__truncatedText:a,position:n,rotation:i.rotation,silent:wf(h),z2:1,tooltip:l&&l.show?C({content:u,formatter:function(){return u},formatterParams:s},l):null})).style,e,{text:a,textFont:r,textFill:e.getTextColor()||h.get("axisLine.lineStyle.color"),textAlign:i.textAlign,textVerticalAlign:i.textVerticalAlign}),h.get("triggerEvent")&&(l.eventData=vf(h),l.eventData.targetType="axisName",l.eventData.name=u),this._dumbGroup.add(l),l.updateTransform(),this.group.add(l),l.decomposeTransform())}},xf=yf.innerTextLayout=function(t,e,n){var i,t=Yo(e-t),n=Uo(t)?(i=0<n?"top":"bottom","center"):Uo(t-mf)?(i=0<n?"bottom":"top","center"):(i="middle",0<t&&t<mf?0<n?"right":"left":0<n?"left":"right");return{rotation:t,textAlign:n,textVerticalAlign:i}};function wf(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function bf(t){t&&(t.ignore=!0)}function Mf(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var r=Lt([]);return Et(r,r,-t.rotation),n.applyTransform(Pt([],r,t.getLocalTransform())),i.applyTransform(Pt([],r,e.getLocalTransform())),n.intersect(i)}}function Sf(t){return"middle"===t||"center"===t}function If(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[t.type+"||"+t.id]}var Tf=Du({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){var r,a,o,s,l,h;!this.axisPointerClass||(h=If(r=t))&&(s=h.axisPointerModel,l=h.axis.scale,a=s.option,o=s.get("status"),null!=(r=s.get("value"))&&(r=l.parse(r)),s=!!s.get("handle.show"),null==o&&(a.status=s?"show":"hide"),(l=l.getExtent().slice())[0]>l[1]&&l.reverse(),(r=null==r||r>l[1]?l[1]:r)<l[0]&&(r=l[0]),a.value=r,s&&(a.status=h.axis.scale.isBlank()?"hide":"show")),Tf.superApply(this,"render",arguments),Cf(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,i,r){Cf(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),Tf.superApply(this,"remove",arguments)},dispose:function(t,e){kf(this,e),Tf.superApply(this,"dispose",arguments)}});function Cf(t,e,n,i,r,a){var o,s=Tf.getAxisPointerClass(t.axisPointerClass);s&&((o=(o=If(o=e))&&o.axisPointerModel)?(t._axisPointer||(t._axisPointer=new s)).render(e,o,i,a):kf(t,i))}function kf(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var Df=[];Tf.registerAxisPointerClass=function(t,e){Df[t]=e},Tf.getAxisPointerClass=function(t){return t&&Df[t]};var Af,Lf,Pf,Of=["axisLine","axisTickLabel","axisName"],Ef=["splitArea","splitLine"],Nf=Tf.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,i){this.group.removeAll();var r,a,o=this._axisGroup;this._axisGroup=new Fe,this.group.add(this._axisGroup),e.get("show")&&(a=function(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,a={},o=r.getAxesOnZeroOf()[0],s=r.position,l=o?"onZero":s,h=r.dim,t=[(u=i.getRect()).x,u.x+u.width,u.y,u.y+u.height],r={left:0,right:1,top:0,bottom:1,onZero:2},i=e.get("offset")||0,u="x"===h?[t[2]-i,t[3]+i]:[t[0]-i,t[1]+i];return o&&(i=o.toGlobalCoord(o.dataToCoord(0)),u[r.onZero]=Math.max(Math.min(i,u[1]),u[0])),a.position=["y"===h?u[r[l]]:t[0],"x"===h?u[r[l]]:t[3]],a.rotation=Math.PI/2*("x"===h?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=o?u[r[s]]-u[r.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),z(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection),e=e.get("axisLabel.rotate"),a.labelRotate="top"===l?-e:e,a.z2=1,a}(r=e.getCoordSysModel(),e),a=new yf(e,a),D(Of,a.add,a),this._axisGroup.add(a.getGroup()),D(Ef,function(t){e.get(t+".show")&&this["_"+t](e,r)},this),Lo(o,this._axisGroup,e),Nf.superCall(this,"render",e,t,n,i))},remove:function(){this._splitAreaColors=null},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank())for(var i=t.getModel("splitLine"),t=i.getModel("lineStyle"),r=A(r=t.get("color"))?r:[r],a=e.coordinateSystem.getRect(),o=n.isHorizontal(),s=0,l=n.getTicksCoords({tickModel:i}),h=[],u=[],c=t.getLineStyle(),d=0;d<l.length;d++){var f=n.toGlobalCoord(l[d].coord);o?(h[0]=f,h[1]=a.y,u[0]=f,u[1]=a.y+a.height):(h[0]=a.x,h[1]=f,u[0]=a.x+a.width,u[1]=f);var p=s++%r.length,f=l[d].tickValue;this._axisGroup.add(new Ba(to({anid:null!=f?"line_"+l[d].tickValue:null,shape:{x1:h[0],y1:h[1],x2:u[0],y2:u[1]},style:k({stroke:r[p]},c),silent:!0})))}},_splitArea:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),t=i.getModel("areaStyle"),r=t.get("color"),a=e.coordinateSystem.getRect(),o=n.getTicksCoords({tickModel:i,clamp:!0});if(o.length){var s=r.length,l=this._splitAreaColors,h=Z(),u=0;if(l)for(var c=0;c<o.length;c++){var d=l.get(o[c].tickValue);if(null!=d){u=(d+(s-1)*c)%s;break}}for(var f=n.toGlobalCoord(o[0].coord),p=t.getAreaStyle(),r=A(r)?r:[r],c=1;c<o.length;c++){var g,m,v,y,_=n.toGlobalCoord(o[c].coord),f=n.isHorizontal()?(g=f,m=a.y,y=a.height,g+(v=_-g)):(g=a.x,m=f,v=a.width,m+(y=_-m)),_=o[c-1].tickValue;null!=_&&h.set(_,u),this._axisGroup.add(new Ea({anid:null!=_?"area_"+_:null,shape:{x:g,y:m,width:v,height:y},style:k({fill:r[u]},p),silent:!0})),u=(u+1)%s}this._splitAreaColors=h}}}});function Bf(t,e){"outside"===t.textPosition&&(t.textPosition=e)}Nf.extend({type:"xAxis"}),Nf.extend({type:"yAxis"}),Du({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Ea({shape:t.coordinateSystem.getRect(),style:k({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),bu(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),Tu((Lf="circle",Pf=Af="line",{seriesType:Af,performRawSeries:!0,reset:function(a,t,e){var n=a.getData(),i=a.get("symbol")||Lf,o=a.get("symbolSize"),r=a.get("symbolKeepAspect");if(n.setVisual({legendSymbol:Pf||i,symbol:i,symbolSize:o,symbolKeepAspect:r}),!t.isSeriesFiltered(a))return{dataEach:n.hasItemOption||"function"==typeof o?function(t,e){var n,i,r;"function"==typeof o&&(n=a.getRawValue(e),i=a.getDataParams(e),t.setItemVisual(e,"symbolSize",o(n,i))),t.hasItemOption&&(n=(r=t.getItemModel(e)).getShallow("symbol",!0),i=r.getShallow("symbolSize",!0),r=r.getShallow("symbolKeepAspect",!0),null!=n&&t.setItemVisual(e,"symbol",n),null!=i&&t.setItemVisual(e,"symbolSize",i),null!=r&&t.setItemVisual(e,"symbolKeepAspect",r))}:null}}})),Iu({seriesType:"line",plan:Ql(),reset:function(t){var e=t.getData(),u=t.coordinateSystem,c=t.pipelineContext.large;if(u){var d=b(u.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),f=d.length,t=e.getCalculationInfo("stackResultDimension");return oc(e,d[0])&&(d[0]=t),oc(e,d[1])&&(d[1]=t),f&&{progress:function(t,e){for(var n,i,r=t.end-t.start,a=c&&new Float32Array(r*f),o=t.start,s=0,l=[],h=[];o<t.end;o++)i=1===f?(n=e.get(d[0],o),!isNaN(n)&&u.dataToPoint(n,null,h)):(n=l[0]=e.get(d[0],o),i=l[1]=e.get(d[1],o),!isNaN(n)&&!isNaN(i)&&u.dataToPoint(l,null,h)),c?(a[s++]=i?i[0]:NaN,a[s++]=i?i[1]:NaN):e.setItemLayout(o,i&&i.slice()||[NaN,NaN]);c&&e.setLayout("symbolPoints",a)}}}}}),Mu(Ie.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var i,r,a=t.getData(),o=t.get("sampling"),s=t.coordinateSystem;"cartesian2d"===s.type&&o&&(i=s.getBaseAxis(),s=s.getOtherAxis(i),i=(i=i.getExtent())[1]-i[0],1<(i=Math.round(a.count()/i))&&("string"==typeof o?r=Qc[o]:"function"==typeof o&&(r=o),r&&t.setData(a.downSample(a.mapDimension(s.dim),1/i,r,$c))))}}),Hl.extend({type:"series.__base_bar__",getInitialData:function(t,e){return sc(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),t=i.getLayout("offset"),i=i.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=t+i/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}}).extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return t=t<e?e:t}});var Rf=Vt([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),zf=["itemStyle","barBorderWidth"];C(Bo.prototype,{getBarItemStyle:function(t){var e=Rf(this,t);return!this.getBorderLineDash||(t=this.getBorderLineDash())&&(e.lineDash=t),e}}),Lu({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){t=t.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(r,t,e){var a,o=this.group,s=r.getData(),l=this._data,h=r.coordinateSystem,n=h.getBaseAxis();"cartesian2d"===h.type?a=n.isHorizontal():"polar"===h.type&&(a="angle"===n.dim);var u=r.isAnimationEnabled()?r:null;s.diff(l).add(function(t){var e,n,i;s.hasValue(t)&&(e=s.getItemModel(t),n=Hf[h.type](s,t,e),i=Ff[h.type](s,t,e,n,a,u),s.setItemGraphicEl(t,i),o.add(i),Gf(i,s,t,e,n,r,a,"polar"===h.type))}).update(function(t,e){var n,i=l.getItemGraphicEl(e);s.hasValue(t)?(n=s.getItemModel(t),e=Hf[h.type](s,t,n),i?ko(i,{shape:e},u,t):i=Ff[h.type](s,t,n,e,a,u,!0),s.setItemGraphicEl(t,i),o.add(i),Gf(i,s,t,n,e,r,a,"polar"===h.type)):o.remove(i)}).remove(function(t){var e=l.getItemGraphicEl(t);"cartesian2d"===h.type?e&&Vf(t,u,e):e&&Wf(t,u,e)}).execute(),this._data=s},_renderLarge:function(t,e,n){this._clear(),Xf(t,this.group)},_incrementalRenderLarge:function(t,e){Xf(e,this.group,!0)},dispose:$,remove:function(t){this._clear(t)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?n.eachItemGraphicEl(function(t){("sector"===t.type?Wf:Vf)(t.dataIndex,e,t)}):t.removeAll(),this._data=null}});var Ff={cartesian2d:function(t,e,n,i,r,a,o){var s,l=new Ea({shape:C({},i)});return a&&(s={},l.shape[r=r?"height":"width"]=0,s[r]=i[r],Po[o?"updateProps":"initProps"](l,{shape:s},a,e)),l},polar:function(t,e,n,i,r,a,o){var s,l=i.startAngle<i.endAngle,h=new Ta({shape:k({clockwise:l},i)});return a&&(s={},h.shape[l=r?"r":"endAngle"]=r?0:i.startAngle,s[l]=i[l],Po[o?"updateProps":"initProps"](h,{shape:s},a,e)),h}};function Vf(t,e,n){n.style.text=null,ko(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function Wf(t,e,n){n.style.text=null,ko(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}var Hf={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),t=function(t,e){t=t.get(zf)||0;return Math.min(t,Math.abs(e.width),Math.abs(e.height))}(n,i),e=0<i.width?1:-1,n=0<i.height?1:-1;return{x:i.x+e*t/2,y:i.y+n*t/2,width:i.width-e*t,height:i.height-n*t}},polar:function(t,e,n){e=t.getItemLayout(e);return{cx:e.cx,cy:e.cy,r0:e.r0,r:e.r,startAngle:e.startAngle,endAngle:e.endAngle}}};function Gf(t,e,n,i,r,a,o,s){var l=e.getItemVisual(n,"color"),h=e.getItemVisual(n,"opacity"),u=i.getModel("itemStyle"),e=i.getModel("emphasis.itemStyle").getBarItemStyle();s||t.setShape("r",u.get("barBorderRadius")||0),t.useStyle(k({fill:l,opacity:h},u.getBarItemStyle()));u=i.getShallow("cursor");u&&t.attr("cursor",u);o?r.height:r.width;s||(r=t.style,s=l,l=a,a=n,_o(r,n=e,(i=i).getModel("label"),i.getModel("emphasis.label"),{labelFetcher:l,labelDataIndex:a,defaultText:fc(l.getData(),a),isRectText:!0,autoColor:s}),Bf(r),Bf(n)),vo(t,e)}var qf=aa.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,r=this.__valueIdx,a=0;a<n.length;a+=2)i[this.__valueIdx]=n[a+r],t.moveTo(i[0],i[1]),t.lineTo(n[a],n[a+1])}});function Xf(t,e,n){var i=t.getData(),r=[],a=i.getLayout("valueAxisHorizontal")?1:0;r[1-a]=i.getLayout("valueAxisStart");a=new qf({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:r,__valueIdx:a});e.add(a),e=a,a=t,i=(t=i).getVisual("borderColor")||t.getVisual("color"),a=a.getModel("itemStyle").getItemStyle(["color","borderColor"]),e.useStyle(a),e.style.fill=null,e.style.stroke=i,e.style.lineWidth=t.getLayout("barWidth")}Iu(S(function(t,e){var I=gd(e=pd(t,e)),T={};D(e,function(t){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),r=dd(t),a=I[fd(i)][r],o=a.offset,s=a.width,a=n.getOtherAxis(i),l=t.get("barMinHeight")||0;T[r]=T[r]||[],e.setLayout({offset:o,size:s});for(var h=e.mapDimension(a.dim),u=e.mapDimension(i.dim),c=oc(e,h),d=a.isHorizontal(),f=_d(0,a),p=0,g=e.count();p<g;p++){var m,v,y,_,x,w,b,M=e.get(h,p),S=e.get(u,p);isNaN(M)||(m=0<=M?"p":"n",v=f,c&&(T[r][S]||(T[r][S]={p:f,n:f}),v=T[r][S][m]),d?(y=v,_=(b=n.dataToPoint([M,S]))[1]+o,x=b[0]-f,w=s,Math.abs(x)<l&&(x=(x<0?-1:1)*l),c&&(T[r][S][m]+=x)):(y=(b=n.dataToPoint([S,M]))[0]+o,_=v,x=s,w=b[1]-f,Math.abs(w)<l&&(w=(w<=0?-1:1)*l),c&&(T[r][S][m]+=w)),e.setItemLayout(p,{x:y,y:_,width:x,height:w}))}},this)},"bar")),Iu($t),Tu({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var $t={updateSelectedMap:function(t){this._targetList=A(t)?t.slice():[],this._selectTargetMap=M(t||[],function(t,e){return t.set(e.name,e),t},Z())},select:function(t,e){t=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(t){t.selected=!1}),t&&(t.selected=!0)},unSelect:function(t,e){t=null!=e?this._targetList[e]:this._selectTargetMap.get(t);t&&(t.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){t=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return t&&t.selected}},Yf=Au({type:"series.pie",init:function(t){Yf.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){Yf.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return function(t,e,n){e=A(e)?{coordDimensions:e}:C({},e);var i=t.getSource(),e=ac(i,e),t=new Yu(e,t);return t.initData(i,n),t}(this,["value"])},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,r=t.count();i<r;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:function(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===Cs||i===Ds){e=t.getRawDataItem(e);return(e=i===Cs&&!O(e)?null:e)?e[n]:void 0}}}(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=Yf.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),function(t){i.push(t)}),n.percent=function(t,e,n){if(!t[e])return 0;var i=M(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return 0;for(var r=Math.pow(10,n),t=b(t,function(t){return(isNaN(t)?0:t)/i*r*100}),a=100*r,o=b(t,function(t){return Math.floor(t)}),s=M(o,function(t,e){return t+e},0),l=b(t,function(t,e){return t-o[e]});s<a;){for(var h=Number.NEGATIVE_INFINITY,u=null,c=0,d=l.length;c<d;++c)l[c]>h&&(h=l[c],u=c);++o[u],l[u]=0,++s}return o[e]/r}(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Di(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});function Uf(t,e,n,i){var r=e.getData(),a=this.dataIndex,a=r.getName(a),o=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:a,seriesId:e.id}),r.each(function(t){jf(r.getItemGraphicEl(t),r.getItemLayout(t),e.isSelected(r.getName(t)),o,n)})}function jf(t,e,n,i,r){e=(e.startAngle+e.endAngle)/2,i=n?i:0,i=[Math.cos(e)*i,Math.sin(e)*i];r?t.animate().when(200,{position:i}).start("bounceOut"):t.attr("position",i)}function Zf(t,e){Fe.call(this);var n=new Ta({z2:2}),i=new Aa,r=new Ma;function a(){i.ignore=i.hoverIgnore,r.ignore=r.hoverIgnore}function o(){i.ignore=i.normalIgnore,r.ignore=r.normalIgnore}this.add(n),this.add(i),this.add(r),this.updateData(t,e,!0),this.on("emphasis",a).on("normal",o).on("mouseover",a).on("mouseout",o)}_(Yf,$t);$t=Zf.prototype;$t.updateData=function(t,e,n){var i=this.childAt(0),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e),s=C({},o);s.label=null,n?(i.setShape(s),"scale"===r.getShallow("animationType")?(i.shape.r=o.r0,Do(i,{shape:{r:o.r}},r,e)):(i.shape.endAngle=o.startAngle,ko(i,{shape:{endAngle:o.endAngle}},r,e))):ko(i,{shape:s},r,e);s=t.getItemVisual(e,"color");i.useStyle(k({lineJoin:"bevel",fill:s},a.getModel("itemStyle").getItemStyle())),i.hoverStyle=a.getModel("emphasis.itemStyle").getItemStyle();s=a.getShallow("cursor");function l(){i.stopAnimation(!0),i.animateTo({shape:{r:o.r+r.get("hoverOffset")}},300,"elasticOut")}function h(){i.stopAnimation(!0),i.animateTo({shape:{r:o.r}},300,"elasticOut")}s&&i.attr("cursor",s),jf(this,t.getItemLayout(e),r.isSelected(null,e),r.get("selectedOffset"),r.get("animation")),i.off("mouseover").off("mouseout").off("emphasis").off("normal"),a.get("hoverAnimation")&&r.isAnimationEnabled()&&i.on("mouseover",l).on("mouseout",h).on("emphasis",l).on("normal",h),this._updateLabel(t,e),vo(this)},$t._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label;t.getItemVisual(e,"color");ko(n,{shape:{points:o.linePoints||[[o.x,o.y],[o.x,o.y],[o.x,o.y]]}},r,e),ko(i,{style:{x:o.x,y:o.y}},r,e),i.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var s=a.getModel("label"),l=a.getModel("emphasis.label"),r=a.getModel("labelLine"),a=a.getModel("emphasis.labelLine"),h=t.getItemVisual(e,"color");_o(i.style,i.hoverStyle={},s,l,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:h,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),i.ignore=i.normalIgnore=!s.get("show"),i.hoverIgnore=!l.get("show"),n.ignore=n.normalIgnore=!r.get("show"),n.hoverIgnore=!a.get("show"),n.setStyle({stroke:h,opacity:t.getItemVisual(e,"opacity")}),n.setStyle(r.getModel("lineStyle").getLineStyle()),n.hoverStyle=a.getModel("lineStyle").getLineStyle();r=r.get("smooth");n.setShape({smooth:r=r&&!0===r?.4:r})},y(Zf,Fe);th.extend({type:"pie",init:function(){var t=new Fe;this._sectorGroup=t},render:function(t,e,n,i){var r,a,o,s,l,h,u;i&&i.from===this.uid||(r=t.getData(),a=this._data,o=this.group,i=e.get("animation"),s=!a,l=t.get("animationType"),h=S(Uf,this.uid,t,i,n),u=t.get("selectedMode"),r.diff(a).add(function(t){var e=new Zf(r,t);s&&"scale"!==l&&e.eachChild(function(t){t.stopAnimation(!0)}),u&&e.on("click",h),r.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){e=a.getItemGraphicEl(e);e.updateData(r,t),e.off("click"),u&&e.on("click",h),o.add(e),r.setItemGraphicEl(t,e)}).remove(function(t){t=a.getItemGraphicEl(t);o.remove(t)}).execute(),i&&s&&0<r.count()&&"scale"!==l?(e=r.getItemLayout(0),i=Math.max(n.getWidth(),n.getHeight())/2,n=w(o.removeClipPath,o),o.setClipPath(this._createClipPath(e.cx,e.cy,i,e.startAngle,e.clockwise,n,t))):o.removeClipPath(),this._data=r)},dispose:function(){},_createClipPath:function(t,e,n,i,r,a,o){n=new Ta({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:r}});return Do(n,{shape:{endAngle:i+(r?1:-1)*Math.PI*2}},o,a),n},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){e=t[0]-n.cx,t=t[1]-n.cy,t=Math.sqrt(e*e+t*t);return t<=n.r&&t>=n.r0}}});function $f(r,t,e,n,i,a,o){function s(t,e){for(var n=t;0<=n&&(r[n].y-=e,!(0<n&&r[n].y>r[n-1].y+r[n-1].height));n--);}function l(t,e,n,i,r,a){for(var o=e?Number.MAX_VALUE:0,s=0,l=t.length;s<l;s++){var h=Math.abs(t[s].y-i),u=t[s].len,c=t[s].len2,h=h<r+u?Math.sqrt((r+u+c)*(r+u+c)-h*h):Math.abs(t[s].x-n);e&&o<=h&&(h=o-10),!e&&h<=o&&(h=o+10),t[s].x=n+h*a,o=h}}r.sort(function(t,e){return t.y-e.y});for(var h,u=0,c=r.length,d=[],f=[],p=0;p<c;p++)(h=r[p].y-u)<0&&function(t,e,n){for(var i=t;i<e;i++)if(r[i].y+=n,t<i&&i+1<e&&r[i+1].y>r[i].y+r[i].height)return s(i,n/2);s(e-1,n/2)}(p,c,-h),u=r[p].y+r[p].height;o-u<0&&s(c-1,u-o);for(p=0;p<c;p++)(r[p].y>=e?f:d).push(r[p]);l(d,!1,t,e,n,i),l(f,!0,t,e,n,i)}function Qf(t){return"center"===t.position}function Kf(v,y,t,e){var _,x,w=v.getData(),b=[],M=!1;w.each(function(t){var e=w.getItemLayout(t),n=w.getItemModel(t),i=n.getModel("label"),r=i.get("position")||n.get("emphasis.label.position"),a=n.getModel("labelLine"),o=a.get("length"),s=a.get("length2"),l=(e.startAngle+e.endAngle)/2,h=Math.cos(l),u=Math.sin(l);_=e.cx,x=e.cy;var c,d,f,p="inside"===r||"inner"===r,g="center"===r?(c=e.cx,d=e.cy,"center"):(c=(n=(p?(e.r+e.r0)/2*h:e.r*h)+_)+3*h,d=(a=(p?(e.r+e.r0)/2*u:e.r*u)+x)+3*u,p||(c=(g=(f=n+h*(o+y-e.r))+(h<0?-1:1)*s)+(h<0?-5:5),f=[[n,a],[f,d=m=a+u*(o+y-e.r)],[g,m]]),p?"center":0<h?"left":"right"),m=i.getFont(),l=i.get("rotate")?h<0?-l+Math.PI:-l:0,m=Sn(v.getFormattedLabel(t,"normal")||w.getName(t),m,g,"top");M=!!l,e.label={x:c,y:d,position:r,height:m.height,len:o,len2:s,linePoints:f,textAlign:g,verticalAlign:"middle",rotation:l,inside:p},p||b.push(e.label)}),!M&&v.get("avoidLabelOverlap")&&function(t,e,n,i,r){for(var a=[],o=[],s=0;s<t.length;s++)Qf(t[s])||(t[s].x<e?a:o).push(t[s]);$f(o,e,n,i,1,0,r),$f(a,e,n,i,-1,0,r);for(var l,h,s=0;s<t.length;s++)Qf(t[s])||(l=t[s].linePoints)&&(h=l[1][0]-l[2][0],t[s].x<e?l[2][0]=t[s].x+3:l[2][0]=t[s].x-3,l[1][1]=l[2][1]=t[s].y,l[1][0]=l[2][0]+h)}(b,_,x,y,e)}var Jf,tp,ep=2*Math.PI,np=Math.PI/180;Jf="pie",D([{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}],function(r){r.update="updateView",Su(r,function(t,e){var i={};return e.eachComponent({mainType:"series",subType:Jf,query:t},function(e){e[r.method]&&e[r.method](t.name,t.dataIndex);var n=e.getData();n.each(function(t){t=n.getName(t);i[t]=e.isSelected(t)||!1})}),{name:t.name,selected:i}})}),Tu((tp="pie",{getTargetSeries:function(t){var e={},n=Z();return t.eachSeriesByType(tp,function(t){t.__paletteScope=e,n.set(t.uid,t)}),n},reset:function(i,t){var r=i.getRawData(),a={},o=i.getData();o.each(function(t){var e=o.getRawIndex(t);a[e]=t}),r.each(function(t){var e=a[t],n=null!=e&&o.getItemVisual(e,"color",!0);n?r.setItemVisual(t,"color",n):(n=r.getItemModel(t).get("itemStyle.color")||i.getColorFromPalette(r.getName(t)||t+"",i.__paletteScope,r.count()),r.setItemVisual(t,"color",n),null!=e&&o.setItemVisual(e,"color",n))})}})),Iu(S(function(t,e,T,n){e.eachSeriesByType(t,function(t){var r=t.getData(),e=r.mapDimension("value"),n=t.get("center"),i=t.get("radius");A(i)||(i=[0,i]),A(n)||(n=[n,n]);var a=T.getWidth(),o=T.getHeight(),s=Math.min(a,o),l=Go(n[0],a),h=Go(n[1],o),u=Go(i[0],s/2),c=Go(i[1],s/2),d=-t.get("startAngle")*np,f=t.get("minAngle")*np,p=0;r.each(e,function(t){isNaN(t)||p++});var g=r.getSum(e),m=Math.PI/(g||p)*2,v=t.get("clockwise"),y=t.get("roseType"),_=t.get("stillShowZeroSum"),x=r.getDataExtent(e);x[0]=0;var w,b=ep,M=0,S=d,I=v?1:-1;r.each(e,function(t,e){var n,i;isNaN(t)?r.setItemLayout(e,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:l,cy:h,r0:u,r:y?NaN:c}):((n="area"!==y?0===g&&_?m:t*m:ep/p)<f?b-=n=f:M+=t,i=S+I*n,r.setItemLayout(e,{angle:n,startAngle:S,endAngle:i,clockwise:v,cx:l,cy:h,r0:u,r:y?Ho(t,x,[u,c]):c}),S=i)}),b<ep&&p&&(b<=.001?(w=ep/p,r.each(e,function(t,e){isNaN(t)||((t=r.getItemLayout(e)).angle=w,t.startAngle=d+I*e*w,t.endAngle=d+I*(e+1)*w)})):(m=b/M,S=d,r.each(e,function(t,e){isNaN(t)||(t=(e=r.getItemLayout(e)).angle===f?f:t*m,e.startAngle=S,e.endAngle=S+I*t,S+=I*t)}))),Kf(t,c,0,o)})},"pie")),Mu({seriesType:"pie",reset:function(t,e){var i,r=e.findComponents({mainType:"legend"});r&&r.length&&(i=t.getData()).filterSelf(function(t){for(var e=i.getName(t),n=0;n<r.length;n++)if(!r[n].isSelected(e))return!1;return!0})}}),t.version="4.2.1",t.dependencies={zrender:"4.0.6"},t.PRIORITY=Ie,t.init=function(t,e,n){var i,r,a=xu(t);return a||((n=new Gh(t,e,n)).id="ec_"+mu++,pu[n.id]=n,Vi(t,yu,n.id),i=n,r="__connectUpdateStatus",Eh(su,function(t,e){i._messageCenter.on(e,function(t){var e,n;gu[i.group]&&0!==i[r]&&(t&&t.escapeConnect||(e=i.makeActionFromEvent(t),n=[],Eh(pu,function(t){t!==i&&t.group===i.group&&n.push(t)}),o(n,0),Eh(n,function(t){1!==t[r]&&t.dispatchAction(e)}),o(n,2)))})}),n);function o(t,e){for(var n=0;n<t.length;n++)t[n][r]=e}},t.connect=function(e){var t;return A(e)&&(t=e,e=null,Eh(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+vu++,Eh(t,function(t){t.group=e})),gu[e]=!0,e},t.disConnect=_u,t.disconnect=Zt,t.dispose=function(t){"string"==typeof t?t=pu[t]:t instanceof Gh||(t=xu(t)),t instanceof Gh&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=xu,t.getInstanceById=function(t){return pu[t]},t.registerTheme=wu,t.registerPreprocessor=bu,t.registerProcessor=Mu,t.registerPostUpdate=function(t){uu.push(t)},t.registerAction=Su,t.registerCoordinateSystem=function(t,e){js.register(t,e)},t.getCoordinateSystemDimensions=function(t){if(t=js.get(t))return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},t.registerLayout=Iu,t.registerVisual=Tu,t.registerLoading=ku,t.extendComponentModel=function(t){return _s.extend(t)},t.extendComponentView=Du,t.extendSeriesModel=Au,t.extendChartView=Lu,t.setCanvasCreator=function(t){var e;(e="createCanvas")===e&&(g=null),a[e]=t},t.registerMap=function(t,e,n){Ah(t,e,n)},t.getMap=function(t){return(t=Lh(t))&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},t.dataTool={}});
